var He=Object.defineProperty;var ze=(T,n,y)=>n in T?He(T,n,{enumerable:!0,configurable:!0,writable:!0,value:y}):T[n]=y;var Mt=(T,n,y)=>(ze(T,typeof n!="symbol"?n+"":n,y),y),ie=(T,n,y)=>{if(!n.has(T))throw TypeError("Cannot "+y)};var D=(T,n,y)=>(ie(T,n,"read from private field"),y?y.call(T):n.get(T)),at=(T,n,y)=>{if(n.has(T))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(T):n.set(T,y)},mt=(T,n,y,e)=>(ie(T,n,"write to private field"),e?e.call(T,y):n.set(T,y),y),ae=(T,n,y,e)=>({set _(i){mt(T,n,i,y)},get _(){return D(T,n,e)}}),ht=(T,n,y)=>(ie(T,n,"access private method"),y);import{b as getAugmentedNamespace,r as reactExports,R as React}from"./jsx-runtime-437b9e56.js";import{_ as _objectWithoutPropertiesLoose,aw as _setPrototypeOf,ax as _assertThisInitialized,ay as propTypesExports,a as _extends,c as clsx}from"./App-6ec6889a.js";function commonjsRequire(T){throw new Error('Could not dynamically require "'+T+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(T){pdfExports=T}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(n,y){module.exports=y()})(globalThis,()=>(()=>{var __webpack_modules__=[,(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.UNSUPPORTED_FEATURES=n.TextRenderingMode=n.StreamType=n.RenderingIntentFlag=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.LINE_FACTOR=n.LINE_DESCENT_FACTOR=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FontType=n.FeatureTest=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.AnnotationType=n.AnnotationStateModelType=n.AnnotationReviewState=n.AnnotationReplyType=n.AnnotationMode=n.AnnotationMarkedState=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationEditorType=n.AnnotationEditorPrefix=n.AnnotationEditorParamsType=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.arrayByteLength=rt,n.arraysToBytes=ut,n.assert=d,n.bytesToString=I,n.createPromiseCapability=ft,n.createValidAbsoluteUrl=R,n.escapeString=xt,n.getModificationDate=it,n.getVerbosityLevel=nt,n.info=lt,n.isArrayBuffer=Ot,n.isArrayEqual=Zt,n.isAscii=Ft,n.objectFromMap=et,n.objectSize=ot,n.setVerbosityLevel=X,n.shadow=j,n.string32=Z,n.stringToBytes=q,n.stringToPDFString=Et,n.stringToUTF16BEString=kt,n.stringToUTF8String=zt,n.unreachable=B,n.utf8StringToString=Pt,n.warn=_t,y(2);const e=[1,0,0,1,0,0];n.IDENTITY_MATRIX=e;const i=[.001,0,0,.001,0,0];n.FONT_IDENTITY_MATRIX=i;const F=1.35;n.LINE_FACTOR=F;const M=.35;n.LINE_DESCENT_FACTOR=M;const x={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};n.RenderingIntentFlag=x;const b={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};n.AnnotationMode=b;const p="pdfjs_internal_editor_";n.AnnotationEditorPrefix=p;const w={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};n.AnnotationEditorType=w;const L={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};n.AnnotationEditorParamsType=L;const C={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};n.PermissionFlag=C;const E={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};n.TextRenderingMode=E;const h={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};n.ImageKind=h;const t={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};n.AnnotationType=t;const s={MARKED:"Marked",REVIEW:"Review"};n.AnnotationStateModelType=s;const l={MARKED:"Marked",UNMARKED:"Unmarked"};n.AnnotationMarkedState=l;const v={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};n.AnnotationReviewState=v;const A={GROUP:"Group",REPLY:"R"};n.AnnotationReplyType=A;const c={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};n.AnnotationFlag=c;const r={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};n.AnnotationFieldFlag=r;const a={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};n.AnnotationBorderStyleType=a;const g={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};n.AnnotationActionEventType=g;const k={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};n.DocumentActionEventType=k;const S={O:"PageOpen",C:"PageClose"};n.PageActionEventType=S;const m={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};n.StreamType=m;const O={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};n.FontType=O;const tt={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=tt;const st={NONE:0,BINARY:1,STREAM:2};n.CMapCompressionType=st;const Q={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};n.OPS=Q;const K={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};n.UNSUPPORTED_FEATURES=K;const G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};n.PasswordResponses=G;let $=tt.WARNINGS;function X(J){Number.isInteger(J)&&($=J)}function nt(){return $}function lt(J){$>=tt.INFOS&&console.log(`Info: ${J}`)}function _t(J){$>=tt.WARNINGS&&console.log(`Warning: ${J}`)}function B(J){throw new Error(J)}function d(J,H){J||B(H)}function u(J){if(!J)return!1;switch(J.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function R(J,H=null,z=null){if(!J)return null;try{if(z&&typeof J=="string"){if(z.addDefaultProtocol&&J.startsWith("www.")){const yt=J.match(/\./g);yt&&yt.length>=2&&(J=`http://${J}`)}if(z.tryConvertEncoding)try{J=zt(J)}catch{}}const gt=H?new URL(J,H):new URL(J);if(u(gt))return gt}catch{}return null}function j(J,H,z){return Object.defineProperty(J,H,{value:z,enumerable:!0,configurable:!0,writable:!1}),z}const U=function(){function H(z,gt){this.constructor===H&&B("Cannot initialize BaseException."),this.message=z,this.name=gt}return H.prototype=new Error,H.constructor=H,H}();n.BaseException=U;class W extends U{constructor(H,z){super(H,"PasswordException"),this.code=z}}n.PasswordException=W;class Y extends U{constructor(H,z){super(H,"UnknownErrorException"),this.details=z}}n.UnknownErrorException=Y;class V extends U{constructor(H){super(H,"InvalidPDFException")}}n.InvalidPDFException=V;class o extends U{constructor(H){super(H,"MissingPDFException")}}n.MissingPDFException=o;class f extends U{constructor(H,z){super(H,"UnexpectedResponseException"),this.status=z}}n.UnexpectedResponseException=f;class _ extends U{constructor(H){super(H,"FormatError")}}n.FormatError=_;class P extends U{constructor(H){super(H,"AbortException")}}n.AbortException=P;function I(J){(typeof J!="object"||J===null||J.length===void 0)&&B("Invalid argument for bytesToString");const H=J.length,z=8192;if(H<z)return String.fromCharCode.apply(null,J);const gt=[];for(let yt=0;yt<H;yt+=z){const vt=Math.min(yt+z,H),St=J.subarray(yt,vt);gt.push(String.fromCharCode.apply(null,St))}return gt.join("")}function q(J){typeof J!="string"&&B("Invalid argument for stringToBytes");const H=J.length,z=new Uint8Array(H);for(let gt=0;gt<H;++gt)z[gt]=J.charCodeAt(gt)&255;return z}function rt(J){if(J.length!==void 0)return J.length;if(J.byteLength!==void 0)return J.byteLength;B("Invalid argument for arrayByteLength")}function ut(J){const H=J.length;if(H===1&&J[0]instanceof Uint8Array)return J[0];let z=0;for(let vt=0;vt<H;vt++)z+=rt(J[vt]);let gt=0;const yt=new Uint8Array(z);for(let vt=0;vt<H;vt++){let St=J[vt];St instanceof Uint8Array||(typeof St=="string"?St=q(St):St=new Uint8Array(St));const Ct=St.byteLength;yt.set(St,gt),gt+=Ct}return yt}function Z(J){return String.fromCharCode(J>>24&255,J>>16&255,J>>8&255,J&255)}function ot(J){return Object.keys(J).length}function et(J){const H=Object.create(null);for(const[z,gt]of J)H[z]=gt;return H}function ct(){const J=new Uint8Array(4);return J[0]=1,new Uint32Array(J.buffer,0,1)[0]===1}function pt(){try{return new Function(""),!0}catch{return!1}}class N{static get isLittleEndian(){return j(this,"isLittleEndian",ct())}static get isEvalSupported(){return j(this,"isEvalSupported",pt())}static get isOffscreenCanvasSupported(){return j(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}n.FeatureTest=N;const dt=[...Array(256).keys()].map(J=>J.toString(16).padStart(2,"0"));class bt{static makeHexColor(H,z,gt){return`#${dt[H]}${dt[z]}${dt[gt]}`}static scaleMinMax(H,z){let gt;H[0]?(H[0]<0&&(gt=z[0],z[0]=z[1],z[1]=gt),z[0]*=H[0],z[1]*=H[0],H[3]<0&&(gt=z[2],z[2]=z[3],z[3]=gt),z[2]*=H[3],z[3]*=H[3]):(gt=z[0],z[0]=z[2],z[2]=gt,gt=z[1],z[1]=z[3],z[3]=gt,H[1]<0&&(gt=z[2],z[2]=z[3],z[3]=gt),z[2]*=H[1],z[3]*=H[1],H[2]<0&&(gt=z[0],z[0]=z[1],z[1]=gt),z[0]*=H[2],z[1]*=H[2]),z[0]+=H[4],z[1]+=H[4],z[2]+=H[5],z[3]+=H[5]}static transform(H,z){return[H[0]*z[0]+H[2]*z[1],H[1]*z[0]+H[3]*z[1],H[0]*z[2]+H[2]*z[3],H[1]*z[2]+H[3]*z[3],H[0]*z[4]+H[2]*z[5]+H[4],H[1]*z[4]+H[3]*z[5]+H[5]]}static applyTransform(H,z){const gt=H[0]*z[0]+H[1]*z[2]+z[4],yt=H[0]*z[1]+H[1]*z[3]+z[5];return[gt,yt]}static applyInverseTransform(H,z){const gt=z[0]*z[3]-z[1]*z[2],yt=(H[0]*z[3]-H[1]*z[2]+z[2]*z[5]-z[4]*z[3])/gt,vt=(-H[0]*z[1]+H[1]*z[0]+z[4]*z[1]-z[5]*z[0])/gt;return[yt,vt]}static getAxialAlignedBoundingBox(H,z){const gt=bt.applyTransform(H,z),yt=bt.applyTransform(H.slice(2,4),z),vt=bt.applyTransform([H[0],H[3]],z),St=bt.applyTransform([H[2],H[1]],z);return[Math.min(gt[0],yt[0],vt[0],St[0]),Math.min(gt[1],yt[1],vt[1],St[1]),Math.max(gt[0],yt[0],vt[0],St[0]),Math.max(gt[1],yt[1],vt[1],St[1])]}static inverseTransform(H){const z=H[0]*H[3]-H[1]*H[2];return[H[3]/z,-H[1]/z,-H[2]/z,H[0]/z,(H[2]*H[5]-H[4]*H[3])/z,(H[4]*H[1]-H[5]*H[0])/z]}static apply3dTransform(H,z){return[H[0]*z[0]+H[1]*z[1]+H[2]*z[2],H[3]*z[0]+H[4]*z[1]+H[5]*z[2],H[6]*z[0]+H[7]*z[1]+H[8]*z[2]]}static singularValueDecompose2dScale(H){const z=[H[0],H[2],H[1],H[3]],gt=H[0]*z[0]+H[1]*z[2],yt=H[0]*z[1]+H[1]*z[3],vt=H[2]*z[0]+H[3]*z[2],St=H[2]*z[1]+H[3]*z[3],Ct=(gt+St)/2,Dt=Math.sqrt((gt+St)**2-4*(gt*St-vt*yt))/2,Rt=Ct+Dt||1,Tt=Ct-Dt||1;return[Math.sqrt(Rt),Math.sqrt(Tt)]}static normalizeRect(H){const z=H.slice(0);return H[0]>H[2]&&(z[0]=H[2],z[2]=H[0]),H[1]>H[3]&&(z[1]=H[3],z[3]=H[1]),z}static intersect(H,z){const gt=Math.max(Math.min(H[0],H[2]),Math.min(z[0],z[2])),yt=Math.min(Math.max(H[0],H[2]),Math.max(z[0],z[2]));if(gt>yt)return null;const vt=Math.max(Math.min(H[1],H[3]),Math.min(z[1],z[3])),St=Math.min(Math.max(H[1],H[3]),Math.max(z[1],z[3]));return vt>St?null:[gt,vt,yt,St]}static bezierBoundingBox(H,z,gt,yt,vt,St,Ct,Dt){const Rt=[],Tt=[[],[]];let Lt,It,Ut,wt,Nt,Wt,$t,Vt;for(let Xt=0;Xt<2;++Xt){if(Xt===0?(It=6*H-12*gt+6*vt,Lt=-3*H+9*gt-9*vt+3*Ct,Ut=3*gt-3*H):(It=6*z-12*yt+6*St,Lt=-3*z+9*yt-9*St+3*Dt,Ut=3*yt-3*z),Math.abs(Lt)<1e-12){if(Math.abs(It)<1e-12)continue;wt=-Ut/It,0<wt&&wt<1&&Rt.push(wt);continue}$t=It*It-4*Ut*Lt,Vt=Math.sqrt($t),!($t<0)&&(Nt=(-It+Vt)/(2*Lt),0<Nt&&Nt<1&&Rt.push(Nt),Wt=(-It-Vt)/(2*Lt),0<Wt&&Wt<1&&Rt.push(Wt))}let Gt=Rt.length,jt;const qt=Gt;for(;Gt--;)wt=Rt[Gt],jt=1-wt,Tt[0][Gt]=jt*jt*jt*H+3*jt*jt*wt*gt+3*jt*wt*wt*vt+wt*wt*wt*Ct,Tt[1][Gt]=jt*jt*jt*z+3*jt*jt*wt*yt+3*jt*wt*wt*St+wt*wt*wt*Dt;return Tt[0][qt]=H,Tt[1][qt]=z,Tt[0][qt+1]=Ct,Tt[1][qt+1]=Dt,Tt[0].length=Tt[1].length=qt+2,[Math.min(...Tt[0]),Math.min(...Tt[1]),Math.max(...Tt[0]),Math.max(...Tt[1])]}}n.Util=bt;const At=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Et(J){if(J[0]>="ï"){let z;if(J[0]==="þ"&&J[1]==="ÿ"?z="utf-16be":J[0]==="ÿ"&&J[1]==="þ"?z="utf-16le":J[0]==="ï"&&J[1]==="»"&&J[2]==="¿"&&(z="utf-8"),z)try{const gt=new TextDecoder(z,{fatal:!0}),yt=q(J);return gt.decode(yt)}catch(gt){_t(`stringToPDFString: "${gt}".`)}}const H=[];for(let z=0,gt=J.length;z<gt;z++){const yt=At[J.charCodeAt(z)];H.push(yt?String.fromCharCode(yt):J.charAt(z))}return H.join("")}function xt(J){return J.replace(/([()\\\n\r])/g,H=>H===`
`?"\\n":H==="\r"?"\\r":`\\${H}`)}function Ft(J){return/^[\x00-\x7F]*$/.test(J)}function kt(J){const H=["þÿ"];for(let z=0,gt=J.length;z<gt;z++){const yt=J.charCodeAt(z);H.push(String.fromCharCode(yt>>8&255),String.fromCharCode(yt&255))}return H.join("")}function zt(J){return decodeURIComponent(escape(J))}function Pt(J){return unescape(encodeURIComponent(J))}function Ot(J){return typeof J=="object"&&J!==null&&J.byteLength!==void 0}function Zt(J,H){if(J.length!==H.length)return!1;for(let z=0,gt=J.length;z<gt;z++)if(J[z]!==H[z])return!1;return!0}function it(J=new Date){return[J.getUTCFullYear().toString(),(J.getUTCMonth()+1).toString().padStart(2,"0"),J.getUTCDate().toString().padStart(2,"0"),J.getUTCHours().toString().padStart(2,"0"),J.getUTCMinutes().toString().padStart(2,"0"),J.getUTCSeconds().toString().padStart(2,"0")].join("")}function ft(){const J=Object.create(null);let H=!1;return Object.defineProperty(J,"settled",{get(){return H}}),J.promise=new Promise(function(z,gt){J.resolve=function(yt){H=!0,z(yt)},J.reject=function(yt){H=!0,gt(yt)}}),J}},(T,n,y)=>{y(3)},(T,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeJS=void 0;const y=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=y},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var T,y,e,i,F,M,x,b,p,oe,L,C;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:h,NodeCMapReaderFactory:t,NodeStandardFontDataFactory:s}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=h,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=t,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=s}let createPDFNetworkStream;function setPDFNetworkStreamFactory(h){createPDFNetworkStream=h}function getDocument(h){const t=new PDFDocumentLoadingTask;let s;if(typeof h=="string"||h instanceof URL)s={url:h};else if((0,_util.isArrayBuffer)(h))s={data:h};else if(h instanceof PDFDataRangeTransport)s={range:h};else{if(typeof h!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!h.url&&!h.data&&!h.range)throw new Error("Invalid parameter object: need either .data, .range or .url");s=h}const l=Object.create(null);let v=null,A=null;for(const r in s){const a=s[r];switch(r){case"url":if(typeof window<"u")try{l[r]=new URL(a,window.location).href;continue}catch(g){(0,_util.warn)(`Cannot create valid URL: "${g}".`)}else if(typeof a=="string"||a instanceof URL){l[r]=a.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":v=a;continue;case"worker":A=a;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&a instanceof Buffer)l[r]=new Uint8Array(a);else{if(a instanceof Uint8Array)break;if(typeof a=="string")l[r]=(0,_util.stringToBytes)(a);else if(typeof a=="object"&&a!==null&&!isNaN(a.length))l[r]=new Uint8Array(a);else if((0,_util.isArrayBuffer)(a))l[r]=new Uint8Array(a);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}l[r]=a}if(l.CMapReaderFactory=l.CMapReaderFactory||DefaultCMapReaderFactory,l.StandardFontDataFactory=l.StandardFontDataFactory||DefaultStandardFontDataFactory,l.ignoreErrors=l.stopAtErrors!==!0,l.fontExtraProperties=l.fontExtraProperties===!0,l.pdfBug=l.pdfBug===!0,l.enableXfa=l.enableXfa===!0,(!Number.isInteger(l.rangeChunkSize)||l.rangeChunkSize<1)&&(l.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof l.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(l.docBaseUrl))&&(l.docBaseUrl=null),(!Number.isInteger(l.maxImageSize)||l.maxImageSize<-1)&&(l.maxImageSize=-1),typeof l.cMapUrl!="string"&&(l.cMapUrl=null),typeof l.standardFontDataUrl!="string"&&(l.standardFontDataUrl=null),typeof l.useWorkerFetch!="boolean"&&(l.useWorkerFetch=l.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&l.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof l.isEvalSupported!="boolean"&&(l.isEvalSupported=!0),typeof l.disableFontFace!="boolean"&&(l.disableFontFace=_is_node.isNodeJS),typeof l.useSystemFonts!="boolean"&&(l.useSystemFonts=!_is_node.isNodeJS&&!l.disableFontFace),(typeof l.ownerDocument!="object"||l.ownerDocument===null)&&(l.ownerDocument=globalThis.document),typeof l.disableRange!="boolean"&&(l.disableRange=!1),typeof l.disableStream!="boolean"&&(l.disableStream=!1),typeof l.disableAutoFetch!="boolean"&&(l.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(l.verbosity),!A){const r={verbosity:l.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};A=r.port?PDFWorker.fromPort(r):new PDFWorker(r),t._worker=A}const c=t.docId;return A.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const r=_fetchDocument(A,l,v,c),a=new Promise(function(g){let k;v?k=new _transport_stream.PDFDataTransportStream({length:l.length,initialData:l.initialData,progressiveDone:l.progressiveDone,contentDispositionFilename:l.contentDispositionFilename,disableRange:l.disableRange,disableStream:l.disableStream},v):l.data||(k=createPDFNetworkStream({url:l.url,length:l.length,httpHeaders:l.httpHeaders,withCredentials:l.withCredentials,rangeChunkSize:l.rangeChunkSize,disableRange:l.disableRange,disableStream:l.disableStream})),g(k)});return Promise.all([r,a]).then(function([g,k]){if(t.destroyed)throw new Error("Loading aborted");const S=new _message_handler.MessageHandler(c,g,A.port),m=new WorkerTransport(S,t,k,l);t._transport=m,S.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(h,t,s,l){if(h.destroyed)throw new Error("Worker was destroyed");s&&(t.length=s.length,t.initialData=s.initialData,t.progressiveDone=s.progressiveDone,t.contentDispositionFilename=s.contentDispositionFilename);const v=await h.messageHandler.sendWithPromise("GetDocRequest",{docId:l,apiVersion:"2.16.105",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,enableXfa:t.enableXfa,useSystemFonts:t.useSystemFonts,cMapUrl:t.useWorkerFetch?t.cMapUrl:null,standardFontDataUrl:t.useWorkerFetch?t.standardFontDataUrl:null});if(t.data&&(t.data=null),h.destroyed)throw new Error("Worker was destroyed");return v}const n=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${ae(n,T)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=!0,await((t=this._transport)==null?void 0:t.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=n;T=new WeakMap,at(PDFDocumentLoadingTask,T,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,s,l=!1,v=null){this.length=t,this.initialData=s,this.progressiveDone=l,this.contentDispositionFilename=v,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,s){for(const l of this._rangeListeners)l(t,s)}onDataProgress(t,s){this._readyCapability.promise.then(()=>{for(const l of this._progressListeners)l(t,s)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const s of this._progressiveReadListeners)s(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,s){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,s){this._pdfInfo=t,this._transport=s,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,s,l,v,A=!1){this._pageIndex=t,this._pageInfo=s,this._ownerDocument=v,this._transport=l,this._stats=A?new _display_utils.StatTimer:null,this._pdfBug=A,this.commonObjs=l.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:s=this.rotate,offsetX:l=0,offsetY:v=0,dontFlip:A=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:s,offsetX:l,offsetY:v,dontFlip:A})}getAnnotations({intent:t="display"}={}){const s=this._transport.getRenderingIntent(t);let l=this._annotationPromises.get(s.cacheKey);return l||(l=this._transport.getAnnotations(this._pageIndex,s.renderingIntent),this._annotationPromises.set(s.cacheKey,l),l=l.then(v=>{for(const A of v)A.titleObj!==void 0&&Object.defineProperty(A,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),A.titleObj.str}}),A.contentsObj!==void 0&&Object.defineProperty(A,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),A.contentsObj.str}});return v})),l}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:s,intent:l="display",annotationMode:v=_util.AnnotationMode.ENABLE,transform:A=null,imageLayer:c=null,canvasFactory:r=null,background:a=null,optionalContentConfigPromise:g=null,annotationCanvasMap:k=null,pageColors:S=null,printAnnotationStorage:m=null}){var X,nt;((X=arguments[0])==null?void 0:X.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&v===_util.AnnotationMode.ENABLE&&(v=_util.AnnotationMode.ENABLE_FORMS)),((nt=arguments[0])==null?void 0:nt.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&v===_util.AnnotationMode.ENABLE&&(v=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const O=this._transport.getRenderingIntent(l,v,m);this.pendingCleanup=!1,g||(g=this._transport.getOptionalContentConfig());let tt=this._intentStates.get(O.cacheKey);tt||(tt=Object.create(null),this._intentStates.set(O.cacheKey,tt)),tt.streamReaderCancelTimeout&&(clearTimeout(tt.streamReaderCancelTimeout),tt.streamReaderCancelTimeout=null);const st=r||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Q=!!(O.renderingIntent&_util.RenderingIntentFlag.PRINT);tt.displayReadyCapability||(tt.displayReadyCapability=(0,_util.createPromiseCapability)(),tt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(O));const K=lt=>{tt.renderTasks.delete(G),(this.cleanupAfterRender||Q)&&(this.pendingCleanup=!0),this._tryCleanup(),lt?(G.capability.reject(lt),this._abortOperatorList({intentState:tt,reason:lt instanceof Error?lt:new Error(lt)})):G.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},G=new InternalRenderTask({callback:K,params:{canvasContext:t,viewport:s,transform:A,imageLayer:c,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:k,operatorList:tt.operatorList,pageIndex:this._pageIndex,canvasFactory:st,useRequestAnimationFrame:!Q,pdfBug:this._pdfBug,pageColors:S});(tt.renderTasks||(tt.renderTasks=new Set)).add(G);const $=G.task;return Promise.all([tt.displayReadyCapability.promise,g]).then(([lt,_t])=>{if(this.pendingCleanup){K();return}this._stats&&this._stats.time("Rendering"),G.initializeGraphics({transparency:lt,optionalContentConfig:_t}),G.operatorListChanged()}).catch(K),$}getOperatorList({intent:t="display",annotationMode:s=_util.AnnotationMode.ENABLE,printAnnotationStorage:l=null}={}){function v(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(r))}const A=this._transport.getRenderingIntent(t,s,l,!0);let c=this._intentStates.get(A.cacheKey);c||(c=Object.create(null),this._intentStates.set(A.cacheKey,c));let r;return c.opListReadCapability||(r=Object.create(null),r.operatorListChanged=v,c.opListReadCapability=(0,_util.createPromiseCapability)(),(c.renderTasks||(c.renderTasks=new Set)).add(r),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(A)),c.opListReadCapability.promise}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:t!==!0,includeMarkedContent:s===!0},{highWaterMark:100,size(v){return v.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(l=>_xfa_text.XfaText.textContent(l));const s=this.streamTextContent(t);return new Promise(function(l,v){function A(){c.read().then(function({value:a,done:g}){if(g){l(r);return}Object.assign(r.styles,a.styles),r.items.push(...a.items),A()},v)}const c=s.getReader(),r={items:[],styles:Object.create(null)};A()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const t=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const l of s.renderTasks)t.push(l.completed),l.cancel();this.objs.clear();for(const s of this._bitmaps)s.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:s,operatorList:l}of this._intentStates.values())if(s.size>0||!l.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const s of this._bitmaps)s.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(t,s){const l=this._intentStates.get(s);l&&(this._stats&&this._stats.timeEnd("Page Request"),l.displayReadyCapability&&l.displayReadyCapability.resolve(t))}_renderPageChunk(t,s){for(let l=0,v=t.length;l<v;l++)s.operatorList.fnArray.push(t.fnArray[l]),s.operatorList.argsArray.push(t.argsArray[l]);s.operatorList.lastChunk=t.lastChunk,s.operatorList.separateAnnots=t.separateAnnots;for(const l of s.renderTasks)l.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:s,annotationStorageMap:l}){const A=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:s,annotationStorage:l}).getReader(),c=this._intentStates.get(s);c.streamReader=A;const r=()=>{A.read().then(({value:a,done:g})=>{if(g){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(a,c),r())},a=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const g of c.renderTasks)g.operatorListChanged();this._tryCleanup()}if(c.displayReadyCapability)c.displayReadyCapability.reject(a);else if(c.opListReadCapability)c.opListReadCapability.reject(a);else throw a}})};r()}_abortOperatorList({intentState:t,reason:s,force:l=!1}){if(t.streamReader){if(!l){if(t.renderTasks.size>0)return;if(s instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:s,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(t.streamReader.cancel(new _util.AbortException(s.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[v,A]of this._intentStates)if(A===t){this._intentStates.delete(v);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(t,s){const l={data:structuredClone(t,s)};this._deferred.then(()=>{for(const v of this._listeners)v.call(this,l)})}addEventListener(t,s){this._listeners.push(s)}removeEventListener(t,s){const l=this._listeners.indexOf(s);this._listeners.splice(l,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const h=(y=document==null?void 0:document.currentScript)==null?void 0:y.src;h&&(PDFWorkerUtil.fallbackWorkerSrc=h.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(h,t){let s;try{if(s=new URL(h),!s.origin||s.origin==="null")return!1}catch{return!1}const l=new URL(t,s);return s.origin===l.origin},PDFWorkerUtil.createCDNWrapper=function(h){const t=`importScripts("${h}");`;return URL.createObjectURL(new Blob([t]))}}const _PDFWorker=class{constructor({name:h=null,port:t=null,verbosity:s=(0,_util.getVerbosityLevel)()}={}){if(t&&D(_PDFWorker,e).has(t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=h,this.destroyed=!1,this.verbosity=s,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t){D(_PDFWorker,e).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(h){this._port=h,this._messageHandler=new _message_handler.MessageHandler("main","worker",h),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:h}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,h)||(h=PDFWorkerUtil.createCDNWrapper(new URL(h,window.location).href));const t=new Worker(h),s=new _message_handler.MessageHandler("main","worker",t),l=()=>{t.removeEventListener("error",v),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},v=()=>{this._webWorker||l()};t.addEventListener("error",v),s.on("test",c=>{if(t.removeEventListener("error",v),this.destroyed){l();return}c?(this._messageHandler=s,this._port=t,this._webWorker=t,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),s.destroy(),t.terminate())}),s.on("ready",c=>{if(t.removeEventListener("error",v),this.destroyed){l();return}try{A()}catch{this._setupFakeWorker()}});const A=()=>{const c=new Uint8Array;s.send("test",c,[c.buffer])};A();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(h=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const s=`fake${PDFWorkerUtil.fakeWorkerId++}`,l=new _message_handler.MessageHandler(s+"_worker",s,t);h.setup(l,t);const v=new _message_handler.MessageHandler(s,s+"_worker",t);this._messageHandler=v,this._readyCapability.resolve(),v.send("configure",{verbosity:this.verbosity})}).catch(h=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${h.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),D(_PDFWorker,e).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(h){if(!(h!=null&&h.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return D(this,e).has(h.port)?D(this,e).get(h.port):new _PDFWorker(h)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var h;try{return((h=globalThis.pdfjsWorker)==null?void 0:h.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;e=new WeakMap,at(PDFWorker,e,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(t,s,l,v){at(this,i,null);at(this,F,new Map);at(this,M,new Map);at(this,x,null);this.messageHandler=t,this.loadingTask=s,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:s.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:v.ownerDocument,styleElement:v.styleElement}),this._params=v,v.useWorkerFetch||(this.CMapReaderFactory=new v.CMapReaderFactory({baseUrl:v.cMapUrl,isCompressed:v.cMapPacked}),this.StandardFontDataFactory=new v.StandardFontDataFactory({baseUrl:v.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=l,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return D(this,i)}getRenderingIntent(t,s=_util.AnnotationMode.ENABLE,l=null,v=!1){let A=_util.RenderingIntentFlag.DISPLAY,c=null;switch(t){case"any":A=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":A=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(s){case _util.AnnotationMode.DISABLE:A+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:A+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:A+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,c=(A&_util.RenderingIntentFlag.PRINT&&l instanceof _annotation_storage.PrintAnnotationStorage?l:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${s}`)}return v&&(A+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:A,cacheKey:`${A}_${_annotation_storage.AnnotationStorage.getHash(c)}`,annotationStorageMap:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const l of D(this,F).values())t.push(l._destroy());D(this,F).clear(),D(this,M).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return t.push(s),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),mt(this,x,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:s}=this;t.on("GetReader",(l,v)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=A=>{this._lastProgress={loaded:A.loaded,total:A.total}},v.onPull=()=>{this._fullReader.read().then(function({value:A,done:c}){if(c){v.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(A),"GetReader - expected an ArrayBuffer."),v.enqueue(new Uint8Array(A),1,[A])}).catch(A=>{v.error(A)})},v.onCancel=A=>{this._fullReader.cancel(A),v.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",l=>{const v=(0,_util.createPromiseCapability)(),A=this._fullReader;return A.headersReady.then(()=>{var c;(!A.isStreamingSupported||!A.isRangeSupported)&&(this._lastProgress&&((c=s.onProgress)==null||c.call(s,this._lastProgress)),A.onProgress=r=>{var a;(a=s.onProgress)==null||a.call(s,{loaded:r.loaded,total:r.total})}),v.resolve({isStreamingSupported:A.isStreamingSupported,isRangeSupported:A.isRangeSupported,contentLength:A.contentLength})},v.reject),v.promise}),t.on("GetRangeReader",(l,v)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const A=this._networkStream.getRangeReader(l.begin,l.end);if(!A){v.close();return}v.onPull=()=>{A.read().then(function({value:c,done:r}){if(r){v.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(c),"GetRangeReader - expected an ArrayBuffer."),v.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{v.error(c)})},v.onCancel=c=>{A.cancel(c),v.ready.catch(r=>{if(!this.destroyed)throw r})}}),t.on("GetDoc",({pdfInfo:l})=>{this._numPages=l.numPages,this._htmlForXfa=l.htmlForXfa,delete l.htmlForXfa,s._capability.resolve(new PDFDocumentProxy(l,this))}),t.on("DocException",function(l){let v;switch(l.name){case"PasswordException":v=new _util.PasswordException(l.message,l.code);break;case"InvalidPDFException":v=new _util.InvalidPDFException(l.message);break;case"MissingPDFException":v=new _util.MissingPDFException(l.message);break;case"UnexpectedResponseException":v=new _util.UnexpectedResponseException(l.message,l.status);break;case"UnknownErrorException":v=new _util.UnknownErrorException(l.message,l.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}s._capability.reject(v)}),t.on("PasswordRequest",l=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),s.onPassword){const v=A=>{A instanceof Error?this._passwordCapability.reject(A):this._passwordCapability.resolve({password:A})};try{s.onPassword(v,l.code)}catch(A){this._passwordCapability.reject(A)}}else this._passwordCapability.reject(new _util.PasswordException(l.message,l.code));return this._passwordCapability.promise}),t.on("DataLoaded",l=>{var v;(v=s.onProgress)==null||v.call(s,{loaded:l.length,total:l.length}),this.downloadInfoCapability.resolve(l)}),t.on("StartRenderPage",l=>{if(this.destroyed)return;D(this,F).get(l.pageIndex)._startRenderPage(l.transparency,l.cacheKey)}),t.on("commonobj",([l,v,A])=>{var c;if(!this.destroyed&&!this.commonObjs.has(l))switch(v){case"Font":const r=this._params;if("error"in A){const k=A.error;(0,_util.warn)(`Error during font loading: ${k}`),this.commonObjs.resolve(l,k);break}let a=null;r.pdfBug&&((c=globalThis.FontInspector)!=null&&c.enabled)&&(a={registerFont(k,S){globalThis.FontInspector.fontAdded(k,S)}});const g=new _font_loader.FontFaceObject(A,{isEvalSupported:r.isEvalSupported,disableFontFace:r.disableFontFace,ignoreErrors:r.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:a});this.fontLoader.bind(g).catch(k=>t.sendWithPromise("FontFallback",{id:l})).finally(()=>{!r.fontExtraProperties&&g.data&&(g.data=null),this.commonObjs.resolve(l,g)});break;case"FontPath":case"Image":this.commonObjs.resolve(l,A);break;default:throw new Error(`Got unknown common object type ${v}`)}}),t.on("obj",([l,v,A,c])=>{var a;if(this.destroyed)return;const r=D(this,F).get(v);if(!r.objs.has(l))switch(A){case"Image":r.objs.resolve(l,c);const g=8e6;if(c){let k;if(c.bitmap){const{bitmap:S,width:m,height:O}=c;k=m*O*4,r._bitmaps.add(S)}else k=((a=c.data)==null?void 0:a.length)||0;k>g&&(r.cleanupAfterRender=!0)}break;case"Pattern":r.objs.resolve(l,c);break;default:throw new Error(`Got unknown object type ${A}`)}}),t.on("DocProgress",l=>{var v;this.destroyed||(v=s.onProgress)==null||v.call(s,{loaded:l.loaded,total:l.total})}),t.on("DocStats",l=>{this.destroyed||mt(this,i,Object.freeze({streamTypes:Object.freeze(l.streamTypes),fontTypes:Object.freeze(l.fontTypes)}))}),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",l=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(l):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",l=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(l):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:t}){var s,l;this.destroyed||(l=(s=this.loadingTask).onUnsupportedFeature)==null||l.call(s,t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const s=t-1,l=D(this,M).get(s);if(l)return l;const v=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(A=>{if(this.destroyed)throw new Error("Transport destroyed");const c=new PDFPageProxy(s,A,this,this._params.ownerDocument,this._params.pdfBug);return D(this,F).set(s,c),c});return D(this,M).set(s,v),v}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:s})}saveDocument(){var t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((t=this._fullReader)==null?void 0:t.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return D(this,x)||mt(this,x,this.messageHandler.sendWithPromise("GetMetadata",null).then(t=>{var s,l;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const s of D(this,F).values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),mt(this,x,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}i=new WeakMap,F=new WeakMap,M=new WeakMap,x=new WeakMap;class PDFObjects{constructor(){at(this,p);at(this,b,Object.create(null))}get(t,s=null){if(s){const v=ht(this,p,oe).call(this,t);return v.capability.promise.then(()=>s(v.data)),null}const l=D(this,b)[t];if(!(l!=null&&l.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${t}.`);return l.data}has(t){const s=D(this,b)[t];return(s==null?void 0:s.capability.settled)||!1}resolve(t,s=null){const l=ht(this,p,oe).call(this,t);l.data=s,l.capability.resolve()}clear(){mt(this,b,Object.create(null))}}b=new WeakMap,p=new WeakSet,oe=function(t){const s=D(this,b)[t];return s||(D(this,b)[t]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(t){at(this,L,null);mt(this,L,t),this.onContinue=null}get promise(){return D(this,L).capability.promise}cancel(){D(this,L).cancel()}get separateAnnots(){const{separateAnnots:t}=D(this,L).operatorList;if(!t)return!1;const{annotationCanvasMap:s}=D(this,L);return t.form||t.canvas&&(s==null?void 0:s.size)>0}}L=new WeakMap,exports.RenderTask=RenderTask;const E=class{constructor({callback:t,params:s,objs:l,commonObjs:v,annotationCanvasMap:A,operatorList:c,pageIndex:r,canvasFactory:a,useRequestAnimationFrame:g=!1,pdfBug:k=!1,pageColors:S=null}){this.callback=t,this.params=s,this.objs=l,this.commonObjs=v,this.annotationCanvasMap=A,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=r,this.canvasFactory=a,this._pdfBug=k,this.pageColors=S,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:s}){var a;if(this.cancelled)return;if(this._canvas){if(D(E,C).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");D(E,C).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:l,viewport:v,transform:A,imageLayer:c,background:r}=this.params;this.gfx=new _canvas.CanvasGraphics(l,this.commonObjs,this.objs,this.canvasFactory,c,s,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:A,viewport:v,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&D(E,C).delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&D(E,C).delete(this._canvas),this.callback())))}};let InternalRenderTask=E;C=new WeakMap,at(InternalRenderTask,C,new WeakSet);const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(T,n,y)=>{var b,Te,w;Object.defineProperty(n,"__esModule",{value:!0}),n.PrintAnnotationStorage=n.AnnotationStorage=void 0;var e=y(1),i=y(6),F=y(10);class M{constructor(){at(this,b);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(C,E){const h=this._storage.get(C);return h===void 0?E:Object.assign(E,h)}getRawValue(C){return this._storage.get(C)}remove(C){if(this._storage.delete(C),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const E of this._storage.values())if(E instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(C,E){const h=this._storage.get(C);let t=!1;if(h!==void 0)for(const[s,l]of Object.entries(E))h[s]!==l&&(t=!0,h[s]=l);else t=!0,this._storage.set(C,E);t&&ht(this,b,Te).call(this),E instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(E.constructor._type)}has(C){return this._storage.has(C)}getAll(){return this._storage.size>0?(0,e.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new x(this)}get serializable(){if(this._storage.size===0)return null;const C=new Map;for(const[E,h]of this._storage){const t=h instanceof i.AnnotationEditor?h.serialize():h;t&&C.set(E,t)}return C}static getHash(C){if(!C)return"";const E=new F.MurmurHash3_64;for(const[h,t]of C)E.update(`${h}:${JSON.stringify(t)}`);return E.hexdigest()}}b=new WeakSet,Te=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},n.AnnotationStorage=M;class x extends M{constructor(E){super();at(this,w,null);mt(this,w,structuredClone(E.serializable))}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return D(this,w)}}w=new WeakMap,n.PrintAnnotationStorage=x},(T,n,y)=>{var M,x,b,p,w,L;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditor=void 0;var e=y(7),i=y(1);const C=class{constructor(h){at(this,M,this.focusin.bind(this));at(this,x,this.focusout.bind(this));at(this,b,!1);at(this,p,!1);at(this,w,!1);at(this,L,C._zIndex++);this.constructor===C&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=h.parent,this.id=h.id,this.width=this.height=null,this.pageIndex=h.parent.pageIndex,this.name=h.name,this.div=null;const[t,s]=this.parent.viewportBaseDimensions;this.x=h.x/t,this.y=h.y/s,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=D(this,L)}focusin(h){D(this,b)?mt(this,b,!1):this.parent.setSelected(this)}focusout(h){if(!this.isAttachedToDOM)return;const t=h.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(h.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(h){const t=this.parent.div.getBoundingClientRect();this.startX=h.clientX-t.x,this.startY=h.clientY-t.y,h.dataTransfer.setData("text/plain",this.id),h.dataTransfer.effectAllowed="move"}setAt(h,t,s,l){const[v,A]=this.parent.viewportBaseDimensions;[s,l]=this.screenToPageTranslation(s,l),this.x=(h+s)/v,this.y=(t+l)/A,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(h,t){const[s,l]=this.parent.viewportBaseDimensions;[h,t]=this.screenToPageTranslation(h,t),this.x+=h/s,this.y+=t/l,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(h,t){const{rotation:s}=this.parent.viewport;switch(s){case 90:return[t,-h];case 180:return[-h,-t];case 270:return[-t,h];default:return[h,t]}}setDims(h,t){const[s,l]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*h/s}%`,this.div.style.height=`${100*t/l}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",D(this,M)),this.div.addEventListener("focusout",D(this,x));const[h,t]=this.getInitialTranslation();return this.translate(h,t),(0,e.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(h){const t=e.KeyboardManager.platform.isMac;if(h.button!==0||h.ctrlKey&&t){h.preventDefault();return}h.ctrlKey&&!t||h.shiftKey||h.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this),mt(this,b,!0)}getRect(h,t){const[s,l]=this.parent.viewportBaseDimensions,[v,A]=this.parent.pageDimensions,c=v*h/s,r=A*t/l,a=this.x*v,g=this.y*A,k=this.width*v,S=this.height*A;switch(this.rotation){case 0:return[a+c,A-g-r-S,a+c+k,A-g-r];case 90:return[a+r,A-g+c,a+r+S,A-g+c+k];case 180:return[a-c-k,A-g+r,a-c,A-g+r+S];case 270:return[a-r-S,A-g-c-k,a-r,A-g-c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(h,t){const[s,l,v,A]=h,c=v-s,r=A-l;switch(this.rotation){case 0:return[s,t-A,c,r];case 90:return[s,t-l,r,c];case 180:return[v,t-l,c,r];case 270:return[v,t-A,r,c];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){mt(this,w,!0)}disableEditMode(){mt(this,w,!1)}isInEditMode(){return D(this,w)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var h;(h=this.div)==null||h.addEventListener("focusin",D(this,M))}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(h,t){const s=new this.prototype.constructor({parent:t,id:t.getNextId()});s.rotation=h.rotation;const[l,v]=t.pageDimensions,[A,c,r,a]=s.getRectInCurrentCoords(h.rect,v);return s.x=A/l,s.y=c/v,s.width=r/l,s.height=a/v,s}remove(){this.div.removeEventListener("focusin",D(this,M)),this.div.removeEventListener("focusout",D(this,x)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var h;(h=this.div)==null||h.classList.add("selectedEditor")}unselect(){var h;(h=this.div)==null||h.classList.remove("selectedEditor")}updateParams(h,t){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return D(this,p)}set isEditing(h){mt(this,p,h),h?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let F=C;M=new WeakMap,x=new WeakMap,b=new WeakMap,p=new WeakMap,w=new WeakMap,L=new WeakMap,Mt(F,"_colorManager",new e.ColorManager),Mt(F,"_zIndex",1),n.AnnotationEditor=F},(T,n,y)=>{var E,h,t,s,l,v,xe,r,g,k,S,m,O,tt,st,Q,K,G,$,X,nt,lt,_t,B,d,u,Pe,j,le,W,Bt,V,Jt,f,Ce,P,we,q,ce,ut,Qt,ot,te;Object.defineProperty(n,"__esModule",{value:!0}),n.KeyboardManager=n.CommandManager=n.ColorManager=n.AnnotationEditorUIManager=void 0,n.bindEvents=F,n.opacityToHex=M;var e=y(1),i=y(8);function F(pt,N,dt){for(const bt of dt)N.addEventListener(bt,pt[bt].bind(pt))}function M(pt){return Math.round(Math.min(255,Math.max(1,255*pt))).toString(16).padStart(2,"0")}class x{constructor(){at(this,E,0)}getId(){return`${e.AnnotationEditorPrefix}${ae(this,E)._++}`}}E=new WeakMap;class b{constructor(N=128){at(this,h,[]);at(this,t,!1);at(this,s,void 0);at(this,l,-1);mt(this,s,N)}add({cmd:N,undo:dt,mustExec:bt,type:At=NaN,overwriteIfSameType:Et=!1,keepUndo:xt=!1}){if(bt&&N(),D(this,t))return;const Ft={cmd:N,undo:dt,type:At};if(D(this,l)===-1){D(this,h).length>0&&(D(this,h).length=0),mt(this,l,0),D(this,h).push(Ft);return}if(Et&&D(this,h)[D(this,l)].type===At){xt&&(Ft.undo=D(this,h)[D(this,l)].undo),D(this,h)[D(this,l)]=Ft;return}const kt=D(this,l)+1;kt===D(this,s)?D(this,h).splice(0,1):(mt(this,l,kt),kt<D(this,h).length&&D(this,h).splice(kt)),D(this,h).push(Ft)}undo(){D(this,l)!==-1&&(mt(this,t,!0),D(this,h)[D(this,l)].undo(),mt(this,t,!1),mt(this,l,D(this,l)-1))}redo(){D(this,l)<D(this,h).length-1&&(mt(this,l,D(this,l)+1),mt(this,t,!0),D(this,h)[D(this,l)].cmd(),mt(this,t,!1))}hasSomethingToUndo(){return D(this,l)!==-1}hasSomethingToRedo(){return D(this,l)<D(this,h).length-1}destroy(){mt(this,h,null)}}h=new WeakMap,t=new WeakMap,s=new WeakMap,l=new WeakMap,n.CommandManager=b;const c=class{constructor(N){at(this,v);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const dt=c.platform.isMac;for(const[bt,At]of N)for(const Et of bt){const xt=Et.startsWith("mac+");dt&&xt?(this.callbacks.set(Et.slice(4),At),this.allKeys.add(Et.split("+").at(-1))):!dt&&!xt&&(this.callbacks.set(Et,At),this.allKeys.add(Et.split("+").at(-1)))}}static get platform(){const N=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:N.includes("Win"),isMac:N.includes("Mac")})}exec(N,dt){if(!this.allKeys.has(dt.key))return;const bt=this.callbacks.get(ht(this,v,xe).call(this,dt));bt&&(bt.bind(N)(),dt.stopPropagation(),dt.preventDefault())}};let p=c;v=new WeakSet,xe=function(N){N.altKey&&this.buffer.push("alt"),N.ctrlKey&&this.buffer.push("ctrl"),N.metaKey&&this.buffer.push("meta"),N.shiftKey&&this.buffer.push("shift"),this.buffer.push(N.key);const dt=this.buffer.join("+");return this.buffer.length=0,dt},n.KeyboardManager=p;class w{constructor(){at(this,r,null)}copy(N){N&&(Array.isArray(N)?mt(this,r,N.map(dt=>dt.serialize())):mt(this,r,[N.serialize()]),mt(this,r,D(this,r).filter(dt=>!!dt)),D(this,r).length===0&&mt(this,r,null))}paste(){return D(this,r)}isEmpty(){return D(this,r)===null}destroy(){mt(this,r,null)}}r=new WeakMap;const a=class{get _colors(){const N=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(N),(0,e.shadow)(this,"_colors",N)}convert(N){const dt=(0,i.getRGB)(N);if(!window.matchMedia("(forced-colors: active)").matches)return dt;for(const[bt,At]of this._colors)if(At.every((Et,xt)=>Et===dt[xt]))return a._colorsMapping.get(bt);return dt}getHexCode(N){const dt=this._colors.get(N);return dt?e.Util.makeHexColor(...dt):N}};let L=a;Mt(L,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),n.ColorManager=L;const ct=class{constructor(N,dt){at(this,u);at(this,j);at(this,W);at(this,V);at(this,f);at(this,P);at(this,q);at(this,ut);at(this,ot);at(this,g,null);at(this,k,new Map);at(this,S,new Map);at(this,m,new w);at(this,O,new b);at(this,tt,0);at(this,st,null);at(this,Q,null);at(this,K,new x);at(this,G,!1);at(this,$,e.AnnotationEditorType.NONE);at(this,X,new Set);at(this,nt,this.keydown.bind(this));at(this,lt,this.onEditingAction.bind(this));at(this,_t,this.onPageChanging.bind(this));at(this,B,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});at(this,d,null);mt(this,d,N),mt(this,Q,dt),D(this,Q)._on("editingaction",D(this,lt)),D(this,Q)._on("pagechanging",D(this,_t))}destroy(){ht(this,j,le).call(this),D(this,Q)._off("editingaction",D(this,lt)),D(this,Q)._off("pagechanging",D(this,_t));for(const N of D(this,S).values())N.destroy();D(this,S).clear(),D(this,k).clear(),mt(this,g,null),D(this,X).clear(),D(this,m).destroy(),D(this,O).destroy()}onPageChanging({pageNumber:N}){mt(this,tt,N-1)}focusMainContainer(){D(this,d).focus()}keydown(N){var dt;(dt=this.getActive())!=null&&dt.shouldGetKeyboardEvents()||ct._keyboardManager.exec(this,N)}onEditingAction(N){["undo","redo","cut","copy","paste","delete","selectAll"].includes(N.name)&&this[N.name]()}setEditingState(N){N?(ht(this,u,Pe).call(this),ht(this,W,Bt).call(this,{isEditing:D(this,$)!==e.AnnotationEditorType.NONE,isEmpty:ht(this,ut,Qt).call(this),hasSomethingToUndo:D(this,O).hasSomethingToUndo(),hasSomethingToRedo:D(this,O).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:D(this,m).isEmpty()})):(ht(this,j,le).call(this),ht(this,W,Bt).call(this,{isEditing:!1}))}registerEditorTypes(N){mt(this,st,N);for(const dt of D(this,st))ht(this,V,Jt).call(this,dt.defaultPropertiesToUpdate)}getId(){return D(this,K).getId()}addLayer(N){D(this,S).set(N.pageIndex,N),D(this,G)?N.enable():N.disable()}removeLayer(N){D(this,S).delete(N.pageIndex)}updateMode(N){if(mt(this,$,N),N===e.AnnotationEditorType.NONE)this.setEditingState(!1),ht(this,P,we).call(this);else{this.setEditingState(!0),ht(this,f,Ce).call(this);for(const dt of D(this,S).values())dt.updateMode(N)}}updateToolbar(N){N!==D(this,$)&&D(this,Q).dispatch("switchannotationeditormode",{source:this,mode:N})}updateParams(N,dt){for(const bt of D(this,X))bt.updateParams(N,dt);for(const bt of D(this,st))bt.updateDefaultParams(N,dt)}getEditors(N){const dt=[];for(const bt of D(this,k).values())bt.pageIndex===N&&dt.push(bt);return dt}getEditor(N){return D(this,k).get(N)}addEditor(N){D(this,k).set(N.id,N)}removeEditor(N){D(this,k).delete(N.id),this.unselect(N)}setActiveEditor(N){D(this,g)!==N&&(mt(this,g,N),N&&ht(this,V,Jt).call(this,N.propertiesToUpdate))}toggleSelected(N){if(D(this,X).has(N)){D(this,X).delete(N),N.unselect(),ht(this,W,Bt).call(this,{hasSelectedEditor:this.hasSelection});return}D(this,X).add(N),N.select(),ht(this,V,Jt).call(this,N.propertiesToUpdate),ht(this,W,Bt).call(this,{hasSelectedEditor:!0})}setSelected(N){for(const dt of D(this,X))dt!==N&&dt.unselect();D(this,X).clear(),D(this,X).add(N),N.select(),ht(this,V,Jt).call(this,N.propertiesToUpdate),ht(this,W,Bt).call(this,{hasSelectedEditor:!0})}isSelected(N){return D(this,X).has(N)}unselect(N){N.unselect(),D(this,X).delete(N),ht(this,W,Bt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return D(this,X).size!==0}undo(){D(this,O).undo(),ht(this,W,Bt).call(this,{hasSomethingToUndo:D(this,O).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ht(this,ut,Qt).call(this)})}redo(){D(this,O).redo(),ht(this,W,Bt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:D(this,O).hasSomethingToRedo(),isEmpty:ht(this,ut,Qt).call(this)})}addCommands(N){D(this,O).add(N),ht(this,W,Bt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ht(this,ut,Qt).call(this)})}delete(){if(D(this,g)&&D(this,g).commitOrRemove(),!this.hasSelection)return;const N=[...D(this,X)],dt=()=>{for(const At of N)At.remove()},bt=()=>{for(const At of N)ht(this,q,ce).call(this,At)};this.addCommands({cmd:dt,undo:bt,mustExec:!0})}copy(){if(D(this,g)&&D(this,g).commitOrRemove(),this.hasSelection){const N=[];for(const dt of D(this,X))dt.isEmpty()||N.push(dt);if(N.length===0)return;D(this,m).copy(N),ht(this,W,Bt).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(D(this,m).isEmpty())return;this.unselectAll();const N=D(this,S).get(D(this,tt)),dt=D(this,m).paste().map(Et=>N.deserialize(Et)),bt=()=>{for(const Et of dt)ht(this,q,ce).call(this,Et);ht(this,ot,te).call(this,dt)},At=()=>{for(const Et of dt)Et.remove()};this.addCommands({cmd:bt,undo:At,mustExec:!0})}selectAll(){for(const N of D(this,X))N.commit();ht(this,ot,te).call(this,D(this,k).values())}unselectAll(){if(D(this,g)){D(this,g).commitOrRemove();return}if(ht(this,ot,te).size!==0){for(const N of D(this,X))N.unselect();D(this,X).clear(),ht(this,W,Bt).call(this,{hasSelectedEditor:!1})}}isActive(N){return D(this,g)===N}getActive(){return D(this,g)}getMode(){return D(this,$)}};let C=ct;g=new WeakMap,k=new WeakMap,S=new WeakMap,m=new WeakMap,O=new WeakMap,tt=new WeakMap,st=new WeakMap,Q=new WeakMap,K=new WeakMap,G=new WeakMap,$=new WeakMap,X=new WeakMap,nt=new WeakMap,lt=new WeakMap,_t=new WeakMap,B=new WeakMap,d=new WeakMap,u=new WeakSet,Pe=function(){D(this,d).addEventListener("keydown",D(this,nt))},j=new WeakSet,le=function(){D(this,d).removeEventListener("keydown",D(this,nt))},W=new WeakSet,Bt=function(N){Object.entries(N).some(([bt,At])=>D(this,B)[bt]!==At)&&D(this,Q).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(D(this,B),N)})},V=new WeakSet,Jt=function(N){D(this,Q).dispatch("annotationeditorparamschanged",{source:this,details:N})},f=new WeakSet,Ce=function(){if(!D(this,G)){mt(this,G,!0);for(const N of D(this,S).values())N.enable()}},P=new WeakSet,we=function(){if(this.unselectAll(),D(this,G)){mt(this,G,!1);for(const N of D(this,S).values())N.disable()}},q=new WeakSet,ce=function(N){const dt=D(this,S).get(N.pageIndex);dt?dt.addOrRebuild(N):this.addEditor(N)},ut=new WeakSet,Qt=function(){if(D(this,k).size===0)return!0;if(D(this,k).size===1)for(const N of D(this,k).values())return N.isEmpty();return!1},ot=new WeakSet,te=function(N){D(this,X).clear();for(const dt of N)dt.isEmpty()||(D(this,X).add(dt),dt.select());ht(this,W,Bt).call(this,{hasSelectedEditor:!0})},Mt(C,"_keyboardManager",new p([[["ctrl+a","mac+meta+a"],ct.prototype.selectAll],[["ctrl+c","mac+meta+c"],ct.prototype.copy],[["ctrl+v","mac+meta+v"],ct.prototype.paste],[["ctrl+x","mac+meta+x"],ct.prototype.cut],[["ctrl+z","mac+meta+z"],ct.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ct.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ct.prototype.delete],[["Escape","mac+Escape"],ct.prototype.unselectAll]])),n.AnnotationEditorUIManager=C},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=n.AnnotationPrefix=void 0,n.deprecated=a,n.getColorValues=O,n.getCurrentTransform=tt,n.getCurrentTransformInverse=st,n.getFilenameFromUrl=l,n.getPdfFilenameFromUrl=v,n.getRGB=m,n.getXfaPageViewport=S,n.isDataScheme=t,n.isPdfFile=s,n.isValidFetchUrl=c,n.loadScript=r;var e=y(9),i=y(1);const F="http://www.w3.org/2000/svg",M="pdfjs_internal_id_";n.AnnotationPrefix=M;const Q=class{};let x=Q;Mt(x,"CSS",96),Mt(x,"PDF",72),Mt(x,"PDF_TO_CSS_UNITS",Q.CSS/Q.PDF),n.PixelsPerInch=x;class b extends e.BaseCanvasFactory{constructor({ownerDocument:G=globalThis.document}={}){super(),this._document=G}_createCanvas(G,$){const X=this._document.createElement("canvas");return X.width=G,X.height=$,X}}n.DOMCanvasFactory=b;async function p(K,G=!1){if(c(K,document.baseURI)){const $=await fetch(K);if(!$.ok)throw new Error($.statusText);return G?new Uint8Array(await $.arrayBuffer()):(0,i.stringToBytes)(await $.text())}return new Promise(($,X)=>{const nt=new XMLHttpRequest;nt.open("GET",K,!0),G&&(nt.responseType="arraybuffer"),nt.onreadystatechange=()=>{if(nt.readyState===XMLHttpRequest.DONE){if(nt.status===200||nt.status===0){let lt;if(G&&nt.response?lt=new Uint8Array(nt.response):!G&&nt.responseText&&(lt=(0,i.stringToBytes)(nt.responseText)),lt){$(lt);return}}X(new Error(nt.statusText))}},nt.send(null)})}class w extends e.BaseCMapReaderFactory{_fetchData(G,$){return p(G,this.isCompressed).then(X=>({cMapData:X,compressionType:$}))}}n.DOMCMapReaderFactory=w;class L extends e.BaseStandardFontDataFactory{_fetchData(G){return p(G,!0)}}n.DOMStandardFontDataFactory=L;class C extends e.BaseSVGFactory{_createSVG(G){return document.createElementNS(F,G)}}n.DOMSVGFactory=C;class E{constructor({viewBox:G,scale:$,rotation:X,offsetX:nt=0,offsetY:lt=0,dontFlip:_t=!1}){this.viewBox=G,this.scale=$,this.rotation=X,this.offsetX=nt,this.offsetY=lt;const B=(G[2]+G[0])/2,d=(G[3]+G[1])/2;let u,R,j,U;switch(X%=360,X<0&&(X+=360),X){case 180:u=-1,R=0,j=0,U=1;break;case 90:u=0,R=1,j=1,U=0;break;case 270:u=0,R=-1,j=-1,U=0;break;case 0:u=1,R=0,j=0,U=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}_t&&(j=-j,U=-U);let W,Y,V,o;u===0?(W=Math.abs(d-G[1])*$+nt,Y=Math.abs(B-G[0])*$+lt,V=Math.abs(G[3]-G[1])*$,o=Math.abs(G[2]-G[0])*$):(W=Math.abs(B-G[0])*$+nt,Y=Math.abs(d-G[1])*$+lt,V=Math.abs(G[2]-G[0])*$,o=Math.abs(G[3]-G[1])*$),this.transform=[u*$,R*$,j*$,U*$,W-u*$*B-j*$*d,Y-R*$*B-U*$*d],this.width=V,this.height=o}clone({scale:G=this.scale,rotation:$=this.rotation,offsetX:X=this.offsetX,offsetY:nt=this.offsetY,dontFlip:lt=!1}={}){return new E({viewBox:this.viewBox.slice(),scale:G,rotation:$,offsetX:X,offsetY:nt,dontFlip:lt})}convertToViewportPoint(G,$){return i.Util.applyTransform([G,$],this.transform)}convertToViewportRectangle(G){const $=i.Util.applyTransform([G[0],G[1]],this.transform),X=i.Util.applyTransform([G[2],G[3]],this.transform);return[$[0],$[1],X[0],X[1]]}convertToPdfPoint(G,$){return i.Util.applyInverseTransform([G,$],this.transform)}}n.PageViewport=E;class h extends i.BaseException{constructor(G,$){super(G,"RenderingCancelledException"),this.type=$}}n.RenderingCancelledException=h;function t(K){const G=K.length;let $=0;for(;$<G&&K[$].trim()==="";)$++;return K.substring($,$+5).toLowerCase()==="data:"}function s(K){return typeof K=="string"&&/\.pdf$/i.test(K)}function l(K){const G=K.indexOf("#"),$=K.indexOf("?"),X=Math.min(G>0?G:K.length,$>0?$:K.length);return K.substring(K.lastIndexOf("/",X)+1,X)}function v(K,G="document.pdf"){if(typeof K!="string")return G;if(t(K))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),G;const $=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,X=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,nt=$.exec(K);let lt=X.exec(nt[1])||X.exec(nt[2])||X.exec(nt[3]);if(lt&&(lt=lt[0],lt.includes("%")))try{lt=X.exec(decodeURIComponent(lt))[0]}catch{}return lt||G}class A{constructor(){this.started=Object.create(null),this.times=[]}time(G){G in this.started&&(0,i.warn)(`Timer is already running for ${G}`),this.started[G]=Date.now()}timeEnd(G){G in this.started||(0,i.warn)(`Timer has not been started for ${G}`),this.times.push({name:G,start:this.started[G],end:Date.now()}),delete this.started[G]}toString(){const G=[];let $=0;for(const X of this.times){const nt=X.name;nt.length>$&&($=nt.length)}for(const X of this.times){const nt=X.end-X.start;G.push(`${X.name.padEnd($)} ${nt}ms
`)}return G.join("")}}n.StatTimer=A;function c(K,G){try{const{protocol:$}=G?new URL(K,G):new URL(K);return $==="http:"||$==="https:"}catch{return!1}}function r(K,G=!1){return new Promise(($,X)=>{const nt=document.createElement("script");nt.src=K,nt.onload=function(lt){G&&nt.remove(),$(lt)},nt.onerror=function(){X(new Error(`Cannot load script at: ${nt.src}`))},(document.head||document.documentElement).append(nt)})}function a(K){console.log("Deprecated API usage: "+K)}let g;class k{static toDateObject(G){if(!G||typeof G!="string")return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const $=g.exec(G);if(!$)return null;const X=parseInt($[1],10);let nt=parseInt($[2],10);nt=nt>=1&&nt<=12?nt-1:0;let lt=parseInt($[3],10);lt=lt>=1&&lt<=31?lt:1;let _t=parseInt($[4],10);_t=_t>=0&&_t<=23?_t:0;let B=parseInt($[5],10);B=B>=0&&B<=59?B:0;let d=parseInt($[6],10);d=d>=0&&d<=59?d:0;const u=$[7]||"Z";let R=parseInt($[8],10);R=R>=0&&R<=23?R:0;let j=parseInt($[9],10)||0;return j=j>=0&&j<=59?j:0,u==="-"?(_t+=R,B+=j):u==="+"&&(_t-=R,B-=j),new Date(Date.UTC(X,nt,lt,_t,B,d))}}n.PDFDateString=k;function S(K,{scale:G=1,rotation:$=0}){const{width:X,height:nt}=K.attributes.style,lt=[0,0,parseInt(X),parseInt(nt)];return new E({viewBox:lt,scale:G,rotation:$})}function m(K){if(K.startsWith("#")){const G=parseInt(K.slice(1),16);return[(G&16711680)>>16,(G&65280)>>8,G&255]}return K.startsWith("rgb(")?K.slice(4,-1).split(",").map(G=>parseInt(G)):K.startsWith("rgba(")?K.slice(5,-1).split(",").map(G=>parseInt(G)).slice(0,3):((0,i.warn)(`Not a valid color format: "${K}"`),[0,0,0])}function O(K){const G=document.createElement("span");G.style.visibility="hidden",document.body.append(G);for(const $ of K.keys()){G.style.color=$;const X=window.getComputedStyle(G).color;K.set($,m(X))}G.remove()}function tt(K){const{a:G,b:$,c:X,d:nt,e:lt,f:_t}=K.getTransform();return[G,$,X,nt,lt,_t]}function st(K){const{a:G,b:$,c:X,d:nt,e:lt,f:_t}=K.getTransform().invertSelf();return[G,$,X,nt,lt,_t]}},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var e=y(1);class i{constructor(){this.constructor===i&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(p,w){if(p<=0||w<=0)throw new Error("Invalid canvas size");const L=this._createCanvas(p,w);return{canvas:L,context:L.getContext("2d")}}reset(p,w,L){if(!p.canvas)throw new Error("Canvas is not specified");if(w<=0||L<=0)throw new Error("Invalid canvas size");p.canvas.width=w,p.canvas.height=L}destroy(p){if(!p.canvas)throw new Error("Canvas is not specified");p.canvas.width=0,p.canvas.height=0,p.canvas=null,p.context=null}_createCanvas(p,w){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}n.BaseCanvasFactory=i;class F{constructor({baseUrl:p=null,isCompressed:w=!1}){this.constructor===F&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=p,this.isCompressed=w}async fetch({name:p}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!p)throw new Error("CMap name must be specified.");const w=this.baseUrl+p+(this.isCompressed?".bcmap":""),L=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(w,L).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${w}`)})}_fetchData(p,w){(0,e.unreachable)("Abstract method `_fetchData` called.")}}n.BaseCMapReaderFactory=F;class M{constructor({baseUrl:p=null}){this.constructor===M&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=p}async fetch({filename:p}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!p)throw new Error("Font filename must be specified.");const w=`${this.baseUrl}${p}`;return this._fetchData(w).catch(L=>{throw new Error(`Unable to load font data at: ${w}`)})}_fetchData(p){(0,e.unreachable)("Abstract method `_fetchData` called.")}}n.BaseStandardFontDataFactory=M;class x{constructor(){this.constructor===x&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(p,w,L=!1){if(p<=0||w<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),L||(C.setAttribute("width",`${p}px`),C.setAttribute("height",`${w}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${p} ${w}`),C}createElement(p){if(typeof p!="string")throw new Error("Invalid SVG element type");return this._createSVG(p)}_createSVG(p){(0,e.unreachable)("Abstract method `_createSVG` called.")}}n.BaseSVGFactory=x},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MurmurHash3_64=void 0;var e=y(1);const i=3285377520,F=4294901760,M=65535;class x{constructor(p){this.h1=p?p&4294967295:i,this.h2=p?p&4294967295:i}update(p){let w,L;if(typeof p=="string"){w=new Uint8Array(p.length*2),L=0;for(let g=0,k=p.length;g<k;g++){const S=p.charCodeAt(g);S<=255?w[L++]=S:(w[L++]=S>>>8,w[L++]=S&255)}}else if((0,e.isArrayBuffer)(p))w=p.slice(),L=w.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const C=L>>2,E=L-C*4,h=new Uint32Array(w.buffer,0,C);let t=0,s=0,l=this.h1,v=this.h2;const A=3432918353,c=461845907,r=A&M,a=c&M;for(let g=0;g<C;g++)g&1?(t=h[g],t=t*A&F|t*r&M,t=t<<15|t>>>17,t=t*c&F|t*a&M,l^=t,l=l<<13|l>>>19,l=l*5+3864292196):(s=h[g],s=s*A&F|s*r&M,s=s<<15|s>>>17,s=s*c&F|s*a&M,v^=s,v=v<<13|v>>>19,v=v*5+3864292196);switch(t=0,E){case 3:t^=w[C*4+2]<<16;case 2:t^=w[C*4+1]<<8;case 1:t^=w[C*4],t=t*A&F|t*r&M,t=t<<15|t>>>17,t=t*c&F|t*a&M,C&1?l^=t:v^=t}this.h1=l,this.h2=v}hexdigest(){let p=this.h1,w=this.h2;p^=w>>>1,p=p*3981806797&F|p*36045&M,w=w*4283543511&F|((w<<16|p>>>16)*2950163797&F)>>>16,p^=w>>>1,p=p*444984403&F|p*60499&M,w=w*3301882366&F|((w<<16|p>>>16)*3120437893&F)>>>16,p^=w>>>1;const L=(p>>>0).toString(16),C=(w>>>0).toString(16);return L.padStart(8,"0")+C.padStart(8,"0")}}n.MurmurHash3_64=x},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var e=y(1);class i{constructor({docId:b,onUnsupportedFeature:p,ownerDocument:w=globalThis.document,styleElement:L=null}){this.constructor===i&&(0,e.unreachable)("Cannot initialize BaseFontLoader."),this.docId=b,this._onUnsupportedFeature=p,this._document=w,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(b){this.nativeFontFaces.push(b),this._document.fonts.add(b)}insertRule(b){let p=this.styleElement;p||(p=this.styleElement=this._document.createElement("style"),p.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(p));const w=p.sheet;w.insertRule(b,w.cssRules.length)}clear(){for(const b of this.nativeFontFaces)this._document.fonts.delete(b);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(b){if(b.attached||b.missingFile)return;if(b.attached=!0,this.isFontLoadingAPISupported){const w=b.createNativeFontFace();if(w){this.addNativeFontFace(w);try{await w.loaded}catch(L){throw this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,e.warn)(`Failed to load font '${w.family}': '${L}'.`),b.disableFontFace=!0,L}}return}const p=b.createFontFaceRule();if(p){if(this.insertRule(p),this.isSyncFontLoadingSupported)return;await new Promise(w=>{const L=this._queueLoadingCallback(w);this._prepareFontLoadEvent([p],[b],L)})}}_queueLoadingCallback(b){(0,e.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var p;const b=!!((p=this._document)!=null&&p.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",b)}get isSyncFontLoadingSupported(){(0,e.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,e.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(b,p,w){(0,e.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let F;n.FontLoader=F,n.FontLoader=F=class extends i{constructor(b){super(b),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let b=!1;if(typeof navigator>"u")b=!0;else{const p=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(p==null?void 0:p[1])>=14&&(b=!0)}return(0,e.shadow)(this,"isSyncFontLoadingSupported",b)}_queueLoadingCallback(b){function p(){for((0,e.assert)(!L.done,"completeRequest() cannot be called twice."),L.done=!0;w.requests.length>0&&w.requests[0].done;){const C=w.requests.shift();setTimeout(C.callback,0)}}const w=this.loadingContext,L={id:`pdfjs-font-loading-${w.nextRequestId++}`,done:!1,complete:p,callback:b};return w.requests.push(L),L}get _loadTestFont(){const b=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,e.shadow)(this,"_loadTestFont",b())}_prepareFontLoadEvent(b,p,w){function L(st,Q){return st.charCodeAt(Q)<<24|st.charCodeAt(Q+1)<<16|st.charCodeAt(Q+2)<<8|st.charCodeAt(Q+3)&255}function C(st,Q,K,G){const $=st.substring(0,Q),X=st.substring(Q+K);return $+G+X}let E,h;const t=this._document.createElement("canvas");t.width=1,t.height=1;const s=t.getContext("2d");let l=0;function v(st,Q){if(l++,l>30){(0,e.warn)("Load test font never loaded."),Q();return}if(s.font="30px "+st,s.fillText(".",0,20),s.getImageData(0,0,1,1).data[3]>0){Q();return}setTimeout(v.bind(null,st,Q))}const A=`lt${Date.now()}${this.loadTestFontId++}`;let c=this._loadTestFont;c=C(c,976,A.length,A);const a=16,g=1482184792;let k=L(c,a);for(E=0,h=A.length-3;E<h;E+=4)k=k-g+L(A,E)|0;E<A.length&&(k=k-g+L(A+"XXX",E)|0),c=C(c,a,4,(0,e.string32)(k));const S=`url(data:font/opentype;base64,${btoa(c)});`,m=`@font-face {font-family:"${A}";src:${S}}`;this.insertRule(m);const O=[];for(const st of p)O.push(st.loadedName);O.push(A);const tt=this._document.createElement("div");tt.style.visibility="hidden",tt.style.width=tt.style.height="10px",tt.style.position="absolute",tt.style.top=tt.style.left="0px";for(const st of O){const Q=this._document.createElement("span");Q.textContent="Hi",Q.style.fontFamily=st,tt.append(Q)}this._document.body.append(tt),v(A,()=>{tt.remove(),w.complete()})}};class M{constructor(b,{isEvalSupported:p=!0,disableFontFace:w=!1,ignoreErrors:L=!1,onUnsupportedFeature:C,fontRegistry:E=null}){this.compiledGlyphs=Object.create(null);for(const h in b)this[h]=b[h];this.isEvalSupported=p!==!1,this.disableFontFace=w===!0,this.ignoreErrors=L===!0,this._onUnsupportedFeature=C,this.fontRegistry=E}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let b;if(!this.cssFontInfo)b=new FontFace(this.loadedName,this.data,{});else{const p={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(p.style=`oblique ${this.cssFontInfo.italicAngle}deg`),b=new FontFace(this.cssFontInfo.fontFamily,this.data,p)}return this.fontRegistry&&this.fontRegistry.registerFont(this),b}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const b=(0,e.bytesToString)(this.data),p=`url(data:${this.mimetype};base64,${btoa(b)});`;let w;if(!this.cssFontInfo)w=`@font-face {font-family:"${this.loadedName}";src:${p}}`;else{let L=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(L+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),w=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${L}src:${p}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,p),w}getPathGenerator(b,p){if(this.compiledGlyphs[p]!==void 0)return this.compiledGlyphs[p];let w;try{w=b.get(this.loadedName+"_path_"+p)}catch(L){if(!this.ignoreErrors)throw L;return this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,e.warn)(`getPathGenerator - ignoring character: "${L}".`),this.compiledGlyphs[p]=function(C,E){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const L=[];for(const C of w){const E=C.args!==void 0?C.args.join(","):"";L.push("c.",C.cmd,"(",E,`);
`)}return this.compiledGlyphs[p]=new Function("c","size",L.join(""))}return this.compiledGlyphs[p]=function(L,C){for(const E of w)E.cmd==="scale"&&(E.args=[C,-C]),L[E.cmd].apply(L,E.args)}}}n.FontFaceObject=M},(T,n,y)=>{var nt,he;Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var e=y(8),i=y(1),F=y(13),M=y(14),x=y(3);const b=16,p=100,w=4096,L=15,C=10,E=x.isNodeJS&&typeof Path2D>"u"?-1:1e3,h=16;function t(B,d){if(B._removeMirroring)throw new Error("Context is already forwarding operations.");B.__originalSave=B.save,B.__originalRestore=B.restore,B.__originalRotate=B.rotate,B.__originalScale=B.scale,B.__originalTranslate=B.translate,B.__originalTransform=B.transform,B.__originalSetTransform=B.setTransform,B.__originalResetTransform=B.resetTransform,B.__originalClip=B.clip,B.__originalMoveTo=B.moveTo,B.__originalLineTo=B.lineTo,B.__originalBezierCurveTo=B.bezierCurveTo,B.__originalRect=B.rect,B.__originalClosePath=B.closePath,B.__originalBeginPath=B.beginPath,B._removeMirroring=()=>{B.save=B.__originalSave,B.restore=B.__originalRestore,B.rotate=B.__originalRotate,B.scale=B.__originalScale,B.translate=B.__originalTranslate,B.transform=B.__originalTransform,B.setTransform=B.__originalSetTransform,B.resetTransform=B.__originalResetTransform,B.clip=B.__originalClip,B.moveTo=B.__originalMoveTo,B.lineTo=B.__originalLineTo,B.bezierCurveTo=B.__originalBezierCurveTo,B.rect=B.__originalRect,B.closePath=B.__originalClosePath,B.beginPath=B.__originalBeginPath,delete B._removeMirroring},B.save=function(){d.save(),this.__originalSave()},B.restore=function(){d.restore(),this.__originalRestore()},B.translate=function(R,j){d.translate(R,j),this.__originalTranslate(R,j)},B.scale=function(R,j){d.scale(R,j),this.__originalScale(R,j)},B.transform=function(R,j,U,W,Y,V){d.transform(R,j,U,W,Y,V),this.__originalTransform(R,j,U,W,Y,V)},B.setTransform=function(R,j,U,W,Y,V){d.setTransform(R,j,U,W,Y,V),this.__originalSetTransform(R,j,U,W,Y,V)},B.resetTransform=function(){d.resetTransform(),this.__originalResetTransform()},B.rotate=function(R){d.rotate(R),this.__originalRotate(R)},B.clip=function(R){d.clip(R),this.__originalClip(R)},B.moveTo=function(u,R){d.moveTo(u,R),this.__originalMoveTo(u,R)},B.lineTo=function(u,R){d.lineTo(u,R),this.__originalLineTo(u,R)},B.bezierCurveTo=function(u,R,j,U,W,Y){d.bezierCurveTo(u,R,j,U,W,Y),this.__originalBezierCurveTo(u,R,j,U,W,Y)},B.rect=function(u,R,j,U){d.rect(u,R,j,U),this.__originalRect(u,R,j,U)},B.closePath=function(){d.closePath(),this.__originalClosePath()},B.beginPath=function(){d.beginPath(),this.__originalBeginPath()}}class s{constructor(d){this.canvasFactory=d,this.cache=Object.create(null)}getCanvas(d,u,R){let j;return this.cache[d]!==void 0?(j=this.cache[d],this.canvasFactory.reset(j,u,R)):(j=this.canvasFactory.create(u,R),this.cache[d]=j),j}delete(d){delete this.cache[d]}clear(){for(const d in this.cache){const u=this.cache[d];this.canvasFactory.destroy(u),delete this.cache[d]}}}function l(B,d,u,R,j,U,W,Y,V,o){const[f,_,P,I,q,rt]=(0,e.getCurrentTransform)(B);if(_===0&&P===0){const ot=W*f+q,et=Math.round(ot),ct=Y*I+rt,pt=Math.round(ct),N=(W+V)*f+q,dt=Math.abs(Math.round(N)-et)||1,bt=(Y+o)*I+rt,At=Math.abs(Math.round(bt)-pt)||1;return B.setTransform(Math.sign(f),0,0,Math.sign(I),et,pt),B.drawImage(d,u,R,j,U,0,0,dt,At),B.setTransform(f,_,P,I,q,rt),[dt,At]}if(f===0&&I===0){const ot=Y*P+q,et=Math.round(ot),ct=W*_+rt,pt=Math.round(ct),N=(Y+o)*P+q,dt=Math.abs(Math.round(N)-et)||1,bt=(W+V)*_+rt,At=Math.abs(Math.round(bt)-pt)||1;return B.setTransform(0,Math.sign(_),Math.sign(P),0,et,pt),B.drawImage(d,u,R,j,U,0,0,At,dt),B.setTransform(f,_,P,I,q,rt),[At,dt]}B.drawImage(d,u,R,j,U,W,Y,V,o);const ut=Math.hypot(f,_),Z=Math.hypot(P,I);return[ut*V,Z*o]}function v(B){const{width:d,height:u}=B;if(d>E||u>E)return null;const R=1e3,j=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=d+1;let W=new Uint8Array(U*(u+1)),Y,V,o;const f=d+7&-8;let _=new Uint8Array(f*u),P=0;for(const Z of B.data){let ot=128;for(;ot>0;)_[P++]=Z&ot?0:255,ot>>=1}let I=0;for(P=0,_[P]!==0&&(W[0]=1,++I),V=1;V<d;V++)_[P]!==_[P+1]&&(W[V]=_[P]?2:1,++I),P++;for(_[P]!==0&&(W[V]=2,++I),Y=1;Y<u;Y++){P=Y*f,o=Y*U,_[P-f]!==_[P]&&(W[o]=_[P]?1:8,++I);let Z=(_[P]?4:0)+(_[P-f]?8:0);for(V=1;V<d;V++)Z=(Z>>2)+(_[P+1]?4:0)+(_[P-f+1]?8:0),j[Z]&&(W[o+V]=j[Z],++I),P++;if(_[P-f]!==_[P]&&(W[o+V]=_[P]?2:4,++I),I>R)return null}for(P=f*(u-1),o=Y*U,_[P]!==0&&(W[o]=8,++I),V=1;V<d;V++)_[P]!==_[P+1]&&(W[o+V]=_[P]?4:8,++I),P++;if(_[P]!==0&&(W[o+V]=4,++I),I>R)return null;const q=new Int32Array([0,U,-1,0,-U,0,0,0,1]),rt=new Path2D;for(Y=0;I&&Y<=u;Y++){let Z=Y*U;const ot=Z+d;for(;Z<ot&&!W[Z];)Z++;if(Z===ot)continue;rt.moveTo(Z%U,Y);const et=Z;let ct=W[Z];do{const pt=q[ct];do Z+=pt;while(!W[Z]);const N=W[Z];N!==5&&N!==10?(ct=N,W[Z]=0):(ct=N&51*ct>>4,W[Z]&=ct>>2|ct<<2),rt.lineTo(Z%U,Z/U|0),W[Z]||--I}while(et!==Z);--Y}return _=null,W=null,function(Z){Z.save(),Z.scale(1/d,-1/u),Z.translate(0,-u),Z.fill(rt),Z.beginPath(),Z.restore()}}class A{constructor(d,u){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,d,u])}clone(){const d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}setCurrentPoint(d,u){this.x=d,this.y=u}updatePathMinMax(d,u,R){[u,R]=i.Util.applyTransform([u,R],d),this.minX=Math.min(this.minX,u),this.minY=Math.min(this.minY,R),this.maxX=Math.max(this.maxX,u),this.maxY=Math.max(this.maxY,R)}updateRectMinMax(d,u){const R=i.Util.applyTransform(u,d),j=i.Util.applyTransform(u.slice(2),d);this.minX=Math.min(this.minX,R[0],j[0]),this.minY=Math.min(this.minY,R[1],j[1]),this.maxX=Math.max(this.maxX,R[0],j[0]),this.maxY=Math.max(this.maxY,R[1],j[1])}updateScalingPathMinMax(d,u){i.Util.scaleMinMax(d,u),this.minX=Math.min(this.minX,u[0]),this.maxX=Math.max(this.maxX,u[1]),this.minY=Math.min(this.minY,u[2]),this.maxY=Math.max(this.maxY,u[3])}updateCurvePathMinMax(d,u,R,j,U,W,Y,V,o,f){const _=i.Util.bezierBoundingBox(u,R,j,U,W,Y,V,o);if(f){f[0]=Math.min(f[0],_[0],_[2]),f[1]=Math.max(f[1],_[0],_[2]),f[2]=Math.min(f[2],_[1],_[3]),f[3]=Math.max(f[3],_[1],_[3]);return}this.updateRectMinMax(d,_)}getPathBoundingBox(d=F.PathType.FILL,u=null){const R=[this.minX,this.minY,this.maxX,this.maxY];if(d===F.PathType.STROKE){u||(0,i.unreachable)("Stroke bounding box must include transform.");const j=i.Util.singularValueDecompose2dScale(u),U=j[0]*this.lineWidth/2,W=j[1]*this.lineWidth/2;R[0]-=U,R[1]-=W,R[2]+=U,R[3]+=W}return R}updateClipFromPath(){const d=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(d=F.PathType.FILL,u=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(d,u))}}function c(B,d,u=null){if(typeof ImageData<"u"&&d instanceof ImageData){B.putImageData(d,0,0);return}const R=d.height,j=d.width,U=R%h,W=(R-U)/h,Y=U===0?W:W+1,V=B.createImageData(j,h);let o=0,f;const _=d.data,P=V.data;let I,q,rt,ut,Z,ot,et,ct;if(u)switch(u.length){case 1:Z=u[0],ot=u[0],et=u[0],ct=u[0];break;case 4:Z=u[0],ot=u[1],et=u[2],ct=u[3];break}if(d.kind===i.ImageKind.GRAYSCALE_1BPP){const pt=_.byteLength,N=new Uint32Array(P.buffer,0,P.byteLength>>2),dt=N.length,bt=j+7>>3;let At=4294967295,Et=i.FeatureTest.isLittleEndian?4278190080:255;for(ct&&ct[0]===255&&ct[255]===0&&([At,Et]=[Et,At]),I=0;I<Y;I++){for(rt=I<W?h:U,f=0,q=0;q<rt;q++){const xt=pt-o;let Ft=0;const kt=xt>bt?j:xt*8-7,zt=kt&-8;let Pt=0,Ot=0;for(;Ft<zt;Ft+=8)Ot=_[o++],N[f++]=Ot&128?At:Et,N[f++]=Ot&64?At:Et,N[f++]=Ot&32?At:Et,N[f++]=Ot&16?At:Et,N[f++]=Ot&8?At:Et,N[f++]=Ot&4?At:Et,N[f++]=Ot&2?At:Et,N[f++]=Ot&1?At:Et;for(;Ft<kt;Ft++)Pt===0&&(Ot=_[o++],Pt=128),N[f++]=Ot&Pt?At:Et,Pt>>=1}for(;f<dt;)N[f++]=0;B.putImageData(V,0,I*h)}}else if(d.kind===i.ImageKind.RGBA_32BPP){const pt=!!(Z||ot||et);for(q=0,ut=j*h*4,I=0;I<W;I++){if(P.set(_.subarray(o,o+ut)),o+=ut,pt)for(let N=0;N<ut;N+=4)Z&&(P[N+0]=Z[P[N+0]]),ot&&(P[N+1]=ot[P[N+1]]),et&&(P[N+2]=et[P[N+2]]);B.putImageData(V,0,q),q+=h}if(I<Y){if(ut=j*U*4,P.set(_.subarray(o,o+ut)),pt)for(let N=0;N<ut;N+=4)Z&&(P[N+0]=Z[P[N+0]]),ot&&(P[N+1]=ot[P[N+1]]),et&&(P[N+2]=et[P[N+2]]);B.putImageData(V,0,q)}}else if(d.kind===i.ImageKind.RGB_24BPP){const pt=!!(Z||ot||et);for(rt=h,ut=j*rt,I=0;I<Y;I++){for(I>=W&&(rt=U,ut=j*rt),f=0,q=ut;q--;)P[f++]=_[o++],P[f++]=_[o++],P[f++]=_[o++],P[f++]=255;if(pt)for(let N=0;N<f;N+=4)Z&&(P[N+0]=Z[P[N+0]]),ot&&(P[N+1]=ot[P[N+1]]),et&&(P[N+2]=et[P[N+2]]);B.putImageData(V,0,I*h)}}else throw new Error(`bad image kind: ${d.kind}`)}function r(B,d){if(d.bitmap){B.drawImage(d.bitmap,0,0);return}const u=d.height,R=d.width,j=u%h,U=(u-j)/h,W=j===0?U:U+1,Y=B.createImageData(R,h);let V=0;const o=d.data,f=Y.data;for(let _=0;_<W;_++){const P=_<U?h:j;({srcPos:V}=(0,M.applyMaskImageData)({src:o,srcPos:V,dest:f,width:R,height:P})),B.putImageData(Y,0,_*h)}}function a(B,d){const u=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let R=0,j=u.length;R<j;R++){const U=u[R];B[U]!==void 0&&(d[U]=B[U])}B.setLineDash!==void 0&&(d.setLineDash(B.getLineDash()),d.lineDashOffset=B.lineDashOffset)}function g(B,d){B.strokeStyle=B.fillStyle=d||"#000000",B.fillRule="nonzero",B.globalAlpha=1,B.lineWidth=1,B.lineCap="butt",B.lineJoin="miter",B.miterLimit=10,B.globalCompositeOperation="source-over",B.font="10px sans-serif",B.setLineDash!==void 0&&(B.setLineDash([]),B.lineDashOffset=0)}function k(B,d,u,R){const j=B.length;for(let U=3;U<j;U+=4){const W=B[U];if(W===0)B[U-3]=d,B[U-2]=u,B[U-1]=R;else if(W<255){const Y=255-W;B[U-3]=B[U-3]*W+d*Y>>8,B[U-2]=B[U-2]*W+u*Y>>8,B[U-1]=B[U-1]*W+R*Y>>8}}}function S(B,d,u){const R=B.length,j=1/255;for(let U=3;U<R;U+=4){const W=u?u[B[U]]:B[U];d[U]=d[U]*W*j|0}}function m(B,d,u){const R=B.length;for(let j=3;j<R;j+=4){const U=B[j-3]*77+B[j-2]*152+B[j-1]*28;d[j]=u?d[j]*u[U>>8]>>8:d[j]*U>>16}}function O(B,d,u,R,j,U,W,Y,V,o,f){const _=!!U,P=_?U[0]:0,I=_?U[1]:0,q=_?U[2]:0;let rt;j==="Luminosity"?rt=m:rt=S;const Z=Math.min(R,Math.ceil(1048576/u));for(let ot=0;ot<R;ot+=Z){const et=Math.min(Z,R-ot),ct=B.getImageData(Y-o,ot+(V-f),u,et),pt=d.getImageData(Y,ot+V,u,et);_&&k(ct.data,P,I,q),rt(ct.data,pt.data,W),d.putImageData(pt,Y,ot+V)}}function tt(B,d,u,R){const j=R[0],U=R[1],W=R[2]-j,Y=R[3]-U;W===0||Y===0||(O(d.context,u,W,Y,d.subtype,d.backdrop,d.transferMap,j,U,d.offsetX,d.offsetY),B.save(),B.globalAlpha=1,B.globalCompositeOperation="source-over",B.setTransform(1,0,0,1,0,0),B.drawImage(u.canvas,0,0),B.restore())}function st(B,d){const u=i.Util.singularValueDecompose2dScale(B);u[0]=Math.fround(u[0]),u[1]=Math.fround(u[1]);const R=Math.fround((globalThis.devicePixelRatio||1)*e.PixelsPerInch.PDF_TO_CSS_UNITS);return d!==void 0?d:u[0]<=R||u[1]<=R}const Q=["butt","round","square"],K=["miter","round","bevel"],G={},$={},_t=class{constructor(d,u,R,j,U,W,Y,V){at(this,nt);this.ctx=d,this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=u,this.objs=R,this.canvasFactory=j,this.imageLayer=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=W,this.cachedCanvases=new s(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Y,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(V==null?void 0:V.background)||null,this.foregroundColor=(V==null?void 0:V.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(d,u=null){return typeof d=="string"?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):u}beginDrawing({transform:d,viewport:u,transparency:R=!1,background:j=null}){const U=this.ctx.canvas.width,W=this.ctx.canvas.height,Y=j||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const V=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const o=this.backgroundColor=this.ctx.fillStyle;let f=!0,_=Y;if(this.ctx.fillStyle=Y,_=this.ctx.fillStyle,f=typeof _=="string"&&/^#[0-9A-Fa-f]{6}$/.test(_),V==="#000000"&&o==="#ffffff"||V===o||!f)this.foregroundColor=this.backgroundColor=null;else{const[P,I,q]=(0,e.getRGB)(_),rt=Z=>(Z/=255,Z<=.03928?Z/12.92:((Z+.055)/1.055)**2.4),ut=Math.round(.2126*rt(P)+.7152*rt(I)+.0722*rt(q));this.selectColor=(Z,ot,et)=>{const ct=.2126*rt(Z)+.7152*rt(ot)+.0722*rt(et);return Math.round(ct)===ut?o:V}}}if(this.ctx.fillStyle=this.backgroundColor||Y,this.ctx.fillRect(0,0,U,W),this.ctx.restore(),R){const V=this.cachedCanvases.getCanvas("transparent",U,W);this.compositeCtx=this.ctx,this.transparentCanvas=V.canvas,this.ctx=V.context,this.ctx.save(),this.ctx.transform(...(0,e.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),g(this.ctx,this.foregroundColor),d&&(this.ctx.transform(...d),this.outputScaleX=d[0],this.outputScaleY=d[0]),this.ctx.transform(...u.transform),this.viewportScale=u.scale,this.baseTransform=(0,e.getCurrentTransform)(this.ctx),this.imageLayer&&((0,e.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(d,u,R,j){const U=d.argsArray,W=d.fnArray;let Y=u||0;const V=U.length;if(V===Y)return Y;const o=V-Y>C&&typeof R=="function",f=o?Date.now()+L:0;let _=0;const P=this.commonObjs,I=this.objs;let q;for(;;){if(j!==void 0&&Y===j.nextBreakPoint)return j.breakIt(Y,R),Y;if(q=W[Y],q!==i.OPS.dependency)this[q].apply(this,U[Y]);else for(const rt of U[Y]){const ut=rt.startsWith("g_")?P:I;if(!ut.has(rt))return ut.get(rt,R),Y}if(Y++,Y===V)return Y;if(o&&++_>C){if(Date.now()>f)return R(),Y;_=0}}}endDrawing(){ht(this,nt,he).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const d of this._cachedBitmapsMap.values()){for(const u of d.values())typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement&&(u.width=u.height=0);d.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(d,u){const R=d.width,j=d.height;let U=Math.max(Math.hypot(u[0],u[1]),1),W=Math.max(Math.hypot(u[2],u[3]),1),Y=R,V=j,o="prescale1",f,_;for(;U>2&&Y>1||W>2&&V>1;){let P=Y,I=V;U>2&&Y>1&&(P=Math.ceil(Y/2),U/=Y/P),W>2&&V>1&&(I=Math.ceil(V/2),W/=V/I),f=this.cachedCanvases.getCanvas(o,P,I),_=f.context,_.clearRect(0,0,P,I),_.drawImage(d,0,0,Y,V,0,0,P,I),d=f.canvas,Y=P,V=I,o=o==="prescale1"?"prescale2":"prescale1"}return{img:d,paintWidth:Y,paintHeight:V}}_createMaskCanvas(d){const u=this.ctx,{width:R,height:j}=d,U=this.current.fillColor,W=this.current.patternFill,Y=(0,e.getCurrentTransform)(u);let V,o,f,_;if((d.bitmap||d.data)&&d.count>1){const dt=d.bitmap||d.data.buffer,bt=Y.slice(0,4);o=JSON.stringify(W?bt:[bt,U]),V=this._cachedBitmapsMap.get(dt),V||(V=new Map,this._cachedBitmapsMap.set(dt,V));const At=V.get(o);if(At&&!W){const Et=Math.round(Math.min(Y[0],Y[2])+Y[4]),xt=Math.round(Math.min(Y[1],Y[3])+Y[5]);return{canvas:At,offsetX:Et,offsetY:xt}}f=At}f||(_=this.cachedCanvases.getCanvas("maskCanvas",R,j),r(_.context,d));let P=i.Util.transform(Y,[1/R,0,0,-1/j,0,0]);P=i.Util.transform(P,[1,0,0,1,0,-j]);const I=i.Util.applyTransform([0,0],P),q=i.Util.applyTransform([R,j],P),rt=i.Util.normalizeRect([I[0],I[1],q[0],q[1]]),ut=Math.round(rt[2]-rt[0])||1,Z=Math.round(rt[3]-rt[1])||1,ot=this.cachedCanvases.getCanvas("fillCanvas",ut,Z),et=ot.context,ct=Math.min(I[0],q[0]),pt=Math.min(I[1],q[1]);et.translate(-ct,-pt),et.transform(...P),f||(f=this._scaleImage(_.canvas,(0,e.getCurrentTransformInverse)(et)),f=f.img,V&&W&&V.set(o,f)),et.imageSmoothingEnabled=st((0,e.getCurrentTransform)(et),d.interpolate),l(et,f,0,0,f.width,f.height,0,0,R,j),et.globalCompositeOperation="source-in";const N=i.Util.transform((0,e.getCurrentTransformInverse)(et),[1,0,0,1,-ct,-pt]);return et.fillStyle=W?U.getPattern(u,this,N,F.PathType.FILL):U,et.fillRect(0,0,R,j),V&&!W&&(this.cachedCanvases.delete("fillCanvas"),V.set(o,ot.canvas)),{canvas:ot.canvas,offsetX:Math.round(ct),offsetY:Math.round(pt)}}setLineWidth(d){d!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=d,this.ctx.lineWidth=d}setLineCap(d){this.ctx.lineCap=Q[d]}setLineJoin(d){this.ctx.lineJoin=K[d]}setMiterLimit(d){this.ctx.miterLimit=d}setDash(d,u){const R=this.ctx;R.setLineDash!==void 0&&(R.setLineDash(d),R.lineDashOffset=u)}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(let u=0,R=d.length;u<R;u++){const j=d[u],U=j[0],W=j[1];switch(U){case"LW":this.setLineWidth(W);break;case"LC":this.setLineCap(W);break;case"LJ":this.setLineJoin(W);break;case"ML":this.setMiterLimit(W);break;case"D":this.setDash(W[0],W[1]);break;case"RI":this.setRenderingIntent(W);break;case"FL":this.setFlatness(W);break;case"Font":this.setFont(W[0],W[1]);break;case"CA":this.current.strokeAlpha=j[1];break;case"ca":this.current.fillAlpha=j[1],this.ctx.globalAlpha=j[1];break;case"BM":this.ctx.globalCompositeOperation=W;break;case"SMask":this.current.activeSMask=W?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=W}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const d=this.inSMaskMode;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const d=this.ctx.canvas.width,u=this.ctx.canvas.height,R="smaskGroupAt"+this.groupLevel,j=this.cachedCanvases.getCanvas(R,d,u);this.suspendedCtx=this.ctx,this.ctx=j.context;const U=this.ctx;U.setTransform(...(0,e.getCurrentTransform)(this.suspendedCtx)),a(this.suspendedCtx,U),t(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),a(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(d){if(!this.current.activeSMask)return;d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const u=this.current.activeSMask,R=this.suspendedCtx;tt(R,u,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(a(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const d=this.current;this.stateStack.push(d),this.current=d.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),a(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(d,u,R,j,U,W){this.ctx.transform(d,u,R,j,U,W),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(d,u,R){const j=this.ctx,U=this.current;let W=U.x,Y=U.y,V,o;const f=(0,e.getCurrentTransform)(j),_=f[0]===0&&f[3]===0||f[1]===0&&f[2]===0,P=_?R.slice(0):null;for(let I=0,q=0,rt=d.length;I<rt;I++)switch(d[I]|0){case i.OPS.rectangle:W=u[q++],Y=u[q++];const ut=u[q++],Z=u[q++],ot=W+ut,et=Y+Z;j.moveTo(W,Y),ut===0||Z===0?j.lineTo(ot,et):(j.lineTo(ot,Y),j.lineTo(ot,et),j.lineTo(W,et)),_||U.updateRectMinMax(f,[W,Y,ot,et]),j.closePath();break;case i.OPS.moveTo:W=u[q++],Y=u[q++],j.moveTo(W,Y),_||U.updatePathMinMax(f,W,Y);break;case i.OPS.lineTo:W=u[q++],Y=u[q++],j.lineTo(W,Y),_||U.updatePathMinMax(f,W,Y);break;case i.OPS.curveTo:V=W,o=Y,W=u[q+4],Y=u[q+5],j.bezierCurveTo(u[q],u[q+1],u[q+2],u[q+3],W,Y),U.updateCurvePathMinMax(f,V,o,u[q],u[q+1],u[q+2],u[q+3],W,Y,P),q+=6;break;case i.OPS.curveTo2:V=W,o=Y,j.bezierCurveTo(W,Y,u[q],u[q+1],u[q+2],u[q+3]),U.updateCurvePathMinMax(f,V,o,W,Y,u[q],u[q+1],u[q+2],u[q+3],P),W=u[q+2],Y=u[q+3],q+=4;break;case i.OPS.curveTo3:V=W,o=Y,W=u[q+2],Y=u[q+3],j.bezierCurveTo(u[q],u[q+1],W,Y,W,Y),U.updateCurvePathMinMax(f,V,o,u[q],u[q+1],W,Y,W,Y,P),q+=4;break;case i.OPS.closePath:j.closePath();break}_&&U.updateScalingPathMinMax(f,P),U.setCurrentPoint(W,Y)}closePath(){this.ctx.closePath()}stroke(d){d=typeof d<"u"?d:!0;const u=this.ctx,R=this.current.strokeColor;u.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof R=="object"&&(R!=null&&R.getPattern)?(u.save(),u.strokeStyle=R.getPattern(u,this,(0,e.getCurrentTransformInverse)(u),F.PathType.STROKE),this.rescaleAndStroke(!1),u.restore()):this.rescaleAndStroke(!0)),d&&this.consumePath(this.current.getClippedPathBoundingBox()),u.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(d){d=typeof d<"u"?d:!0;const u=this.ctx,R=this.current.fillColor,j=this.current.patternFill;let U=!1;j&&(u.save(),u.fillStyle=R.getPattern(u,this,(0,e.getCurrentTransformInverse)(u),F.PathType.FILL),U=!0);const W=this.current.getClippedPathBoundingBox();this.contentVisible&&W!==null&&(this.pendingEOFill?(u.fill("evenodd"),this.pendingEOFill=!1):u.fill()),U&&u.restore(),d&&this.consumePath(W)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=$}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const d=this.pendingTextPaths,u=this.ctx;if(d===void 0){u.beginPath();return}u.save(),u.beginPath();for(const R of d)u.setTransform(...R.transform),u.translate(R.x,R.y),R.addToPath(u,R.fontSize);u.restore(),u.clip(),u.beginPath(),delete this.pendingTextPaths}setCharSpacing(d){this.current.charSpacing=d}setWordSpacing(d){this.current.wordSpacing=d}setHScale(d){this.current.textHScale=d/100}setLeading(d){this.current.leading=-d}setFont(d,u){const R=this.commonObjs.get(d),j=this.current;if(!R)throw new Error(`Can't find font for ${d}`);if(j.fontMatrix=R.fontMatrix||i.FONT_IDENTITY_MATRIX,(j.fontMatrix[0]===0||j.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+d),u<0?(u=-u,j.fontDirection=-1):j.fontDirection=1,this.current.font=R,this.current.fontSize=u,R.isType3Font)return;const U=R.loadedName||"sans-serif";let W="normal";R.black?W="900":R.bold&&(W="bold");const Y=R.italic?"italic":"normal",V=`"${U}", ${R.fallbackName}`;let o=u;u<b?o=b:u>p&&(o=p),this.current.fontSizeScale=u/o,this.ctx.font=`${Y} ${W} ${o}px ${V}`}setTextRenderingMode(d){this.current.textRenderingMode=d}setTextRise(d){this.current.textRise=d}moveText(d,u){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=u}setLeadingMoveText(d,u){this.setLeading(-u),this.moveText(d,u)}setTextMatrix(d,u,R,j,U,W){this.current.textMatrix=[d,u,R,j,U,W],this.current.textMatrixScale=Math.hypot(d,u),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(d,u,R,j){const U=this.ctx,W=this.current,Y=W.font,V=W.textRenderingMode,o=W.fontSize/W.fontSizeScale,f=V&i.TextRenderingMode.FILL_STROKE_MASK,_=!!(V&i.TextRenderingMode.ADD_TO_PATH_FLAG),P=W.patternFill&&!Y.missingFile;let I;(Y.disableFontFace||_||P)&&(I=Y.getPathGenerator(this.commonObjs,d)),Y.disableFontFace||P?(U.save(),U.translate(u,R),U.beginPath(),I(U,o),j&&U.setTransform(...j),(f===i.TextRenderingMode.FILL||f===i.TextRenderingMode.FILL_STROKE)&&U.fill(),(f===i.TextRenderingMode.STROKE||f===i.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((f===i.TextRenderingMode.FILL||f===i.TextRenderingMode.FILL_STROKE)&&U.fillText(d,u,R),(f===i.TextRenderingMode.STROKE||f===i.TextRenderingMode.FILL_STROKE)&&U.strokeText(d,u,R)),_&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,e.getCurrentTransform)(U),x:u,y:R,fontSize:o,addToPath:I})}get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);const u=d.getImageData(0,0,10,10).data;let R=!1;for(let j=3;j<u.length;j+=4)if(u[j]>0&&u[j]<255){R=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",R)}showText(d){const u=this.current,R=u.font;if(R.isType3Font)return this.showType3Text(d);const j=u.fontSize;if(j===0)return;const U=this.ctx,W=u.fontSizeScale,Y=u.charSpacing,V=u.wordSpacing,o=u.fontDirection,f=u.textHScale*o,_=d.length,P=R.vertical,I=P?1:-1,q=R.defaultVMetrics,rt=j*u.fontMatrix[0],ut=u.textRenderingMode===i.TextRenderingMode.FILL&&!R.disableFontFace&&!u.patternFill;U.save(),U.transform(...u.textMatrix),U.translate(u.x,u.y+u.textRise),o>0?U.scale(f,-1):U.scale(f,1);let Z;if(u.patternFill){U.save();const N=u.fillColor.getPattern(U,this,(0,e.getCurrentTransformInverse)(U),F.PathType.FILL);Z=(0,e.getCurrentTransform)(U),U.restore(),U.fillStyle=N}let ot=u.lineWidth;const et=u.textMatrixScale;if(et===0||ot===0){const N=u.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(N===i.TextRenderingMode.STROKE||N===i.TextRenderingMode.FILL_STROKE)&&(ot=this.getSinglePixelWidth())}else ot/=et;W!==1&&(U.scale(W,W),ot/=W),U.lineWidth=ot;let ct=0,pt;for(pt=0;pt<_;++pt){const N=d[pt];if(typeof N=="number"){ct+=I*N*j/1e3;continue}let dt=!1;const bt=(N.isSpace?V:0)+Y,At=N.fontChar,Et=N.accent;let xt,Ft,kt=N.width;if(P){const Pt=N.vmetric||q,Ot=-(N.vmetric?Pt[1]:kt*.5)*rt,Zt=Pt[2]*rt;kt=Pt?-Pt[0]:kt,xt=Ot/W,Ft=(ct+Zt)/W}else xt=ct/W,Ft=0;if(R.remeasure&&kt>0){const Pt=U.measureText(At).width*1e3/j*W;if(kt<Pt&&this.isFontSubpixelAAEnabled){const Ot=kt/Pt;dt=!0,U.save(),U.scale(Ot,1),xt/=Ot}else kt!==Pt&&(xt+=(kt-Pt)/2e3*j/W)}if(this.contentVisible&&(N.isInFont||R.missingFile)){if(ut&&!Et)U.fillText(At,xt,Ft);else if(this.paintChar(At,xt,Ft,Z),Et){const Pt=xt+j*Et.offset.x/W,Ot=Ft-j*Et.offset.y/W;this.paintChar(Et.fontChar,Pt,Ot,Z)}}let zt;P?zt=kt*rt-bt*o:zt=kt*rt+bt*o,ct+=zt,dt&&U.restore()}P?u.y-=ct:u.x+=ct*f,U.restore(),this.compose()}showType3Text(d){const u=this.ctx,R=this.current,j=R.font,U=R.fontSize,W=R.fontDirection,Y=j.vertical?1:-1,V=R.charSpacing,o=R.wordSpacing,f=R.textHScale*W,_=R.fontMatrix||i.FONT_IDENTITY_MATRIX,P=d.length,I=R.textRenderingMode===i.TextRenderingMode.INVISIBLE;let q,rt,ut,Z;if(!(I||U===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,u.save(),u.transform(...R.textMatrix),u.translate(R.x,R.y),u.scale(f,W),q=0;q<P;++q){if(rt=d[q],typeof rt=="number"){Z=Y*rt*U/1e3,this.ctx.translate(Z,0),R.x+=Z*f;continue}const ot=(rt.isSpace?o:0)+V,et=j.charProcOperatorList[rt.operatorListId];if(!et){(0,i.warn)(`Type3 character "${rt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=rt,this.save(),u.scale(U,U),u.transform(..._),this.executeOperatorList(et),this.restore()),ut=i.Util.applyTransform([rt.width,0],_)[0]*U+ot,u.translate(ut,0),R.x+=ut*f}u.restore(),this.processingType3=null}}setCharWidth(d,u){}setCharWidthAndBounds(d,u,R,j,U,W){this.ctx.rect(R,j,U-R,W-j),this.ctx.clip(),this.endPath()}getColorN_Pattern(d){let u;if(d[0]==="TilingPattern"){const R=d[1],j=this.baseTransform||(0,e.getCurrentTransform)(this.ctx),U={createCanvasGraphics:W=>new _t(W,this.commonObjs,this.objs,this.canvasFactory)};u=new F.TilingPattern(d,R,this.ctx,U,j)}else u=this._getPattern(d[1],d[2]);return u}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(d,u,R){var U;const j=((U=this.selectColor)==null?void 0:U.call(this,d,u,R))||i.Util.makeHexColor(d,u,R);this.ctx.strokeStyle=j,this.current.strokeColor=j}setFillRGBColor(d,u,R){var U;const j=((U=this.selectColor)==null?void 0:U.call(this,d,u,R))||i.Util.makeHexColor(d,u,R);this.ctx.fillStyle=j,this.current.fillColor=j,this.current.patternFill=!1}_getPattern(d,u=null){let R;return this.cachedPatterns.has(d)?R=this.cachedPatterns.get(d):(R=(0,F.getShadingPattern)(this.objs.get(d)),this.cachedPatterns.set(d,R)),u&&(R.matrix=u),R}shadingFill(d){if(!this.contentVisible)return;const u=this.ctx;this.save();const R=this._getPattern(d);u.fillStyle=R.getPattern(u,this,(0,e.getCurrentTransformInverse)(u),F.PathType.SHADING);const j=(0,e.getCurrentTransformInverse)(u);if(j){const U=u.canvas,W=U.width,Y=U.height,V=i.Util.applyTransform([0,0],j),o=i.Util.applyTransform([0,Y],j),f=i.Util.applyTransform([W,0],j),_=i.Util.applyTransform([W,Y],j),P=Math.min(V[0],o[0],f[0],_[0]),I=Math.min(V[1],o[1],f[1],_[1]),q=Math.max(V[0],o[0],f[0],_[0]),rt=Math.max(V[1],o[1],f[1],_[1]);this.ctx.fillRect(P,I,q-P,rt-I)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(d,u){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&d.length===6&&this.transform(...d),this.baseTransform=(0,e.getCurrentTransform)(this.ctx),u)){const R=u[2]-u[0],j=u[3]-u[1];this.ctx.rect(u[0],u[1],R,j),this.current.updateRectMinMax((0,e.getCurrentTransform)(this.ctx),u),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(d){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const u=this.ctx;d.isolated||(0,i.info)("TODO: Support non-isolated groups."),d.knockout&&(0,i.warn)("Knockout groups not supported.");const R=(0,e.getCurrentTransform)(u);if(d.matrix&&u.transform(...d.matrix),!d.bbox)throw new Error("Bounding box is required.");let j=i.Util.getAxialAlignedBoundingBox(d.bbox,(0,e.getCurrentTransform)(u));const U=[0,0,u.canvas.width,u.canvas.height];j=i.Util.intersect(j,U)||[0,0,0,0];const W=Math.floor(j[0]),Y=Math.floor(j[1]);let V=Math.max(Math.ceil(j[2])-W,1),o=Math.max(Math.ceil(j[3])-Y,1),f=1,_=1;V>w&&(f=V/w,V=w),o>w&&(_=o/w,o=w),this.current.startNewPathAndClipBox([0,0,V,o]);let P="groupAt"+this.groupLevel;d.smask&&(P+="_smask_"+this.smaskCounter++%2);const I=this.cachedCanvases.getCanvas(P,V,o),q=I.context;q.scale(1/f,1/_),q.translate(-W,-Y),q.transform(...R),d.smask?this.smaskStack.push({canvas:I.canvas,context:q,offsetX:W,offsetY:Y,scaleX:f,scaleY:_,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(u.setTransform(1,0,0,1,0,0),u.translate(W,Y),u.scale(f,_),u.save()),a(u,q),this.ctx=q,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(u),this.groupLevel++}endGroup(d){if(!this.contentVisible)return;this.groupLevel--;const u=this.ctx,R=this.groupStack.pop();if(this.ctx=R,this.ctx.imageSmoothingEnabled=!1,d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const j=(0,e.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...j);const U=i.Util.getAxialAlignedBoundingBox([0,0,u.canvas.width,u.canvas.height],j);this.ctx.drawImage(u.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(d,u,R,j,U){if(ht(this,nt,he).call(this),g(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(u)&&u.length===4){const W=u[2]-u[0],Y=u[3]-u[1];if(U&&this.annotationCanvasMap){R=R.slice(),R[4]-=u[0],R[5]-=u[1],u=u.slice(),u[0]=u[1]=0,u[2]=W,u[3]=Y;const[V,o]=i.Util.singularValueDecompose2dScale((0,e.getCurrentTransform)(this.ctx)),{viewportScale:f}=this,_=Math.ceil(W*this.outputScaleX*f),P=Math.ceil(Y*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(_,P);const{canvas:I,context:q}=this.annotationCanvas;this.annotationCanvasMap.set(d,I),this.annotationCanvas.savedCtx=this.ctx,this.ctx=q,this.ctx.setTransform(V,0,0,-o,0,Y*o),g(this.ctx,this.foregroundColor)}else g(this.ctx,this.foregroundColor),this.ctx.rect(u[0],u[1],W,Y),this.ctx.clip(),this.endPath()}this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...R),this.transform(...j)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(d){if(!this.contentVisible)return;const u=d.count;d=this.getObject(d.data,d),d.count=u;const R=this.ctx,j=this.processingType3;if(j&&(j.compiled===void 0&&(j.compiled=v(d)),j.compiled)){j.compiled(R);return}const U=this._createMaskCanvas(d),W=U.canvas;R.save(),R.setTransform(1,0,0,1,0,0),R.drawImage(W,U.offsetX,U.offsetY),R.restore(),this.compose()}paintImageMaskXObjectRepeat(d,u,R=0,j=0,U,W){if(!this.contentVisible)return;d=this.getObject(d.data,d);const Y=this.ctx;Y.save();const V=(0,e.getCurrentTransform)(Y);Y.transform(u,R,j,U,0,0);const o=this._createMaskCanvas(d);Y.setTransform(1,0,0,1,0,0);for(let f=0,_=W.length;f<_;f+=2){const P=i.Util.transform(V,[u,R,j,U,W[f],W[f+1]]),[I,q]=i.Util.applyTransform([0,0],P);Y.drawImage(o.canvas,I,q)}Y.restore(),this.compose()}paintImageMaskXObjectGroup(d){if(!this.contentVisible)return;const u=this.ctx,R=this.current.fillColor,j=this.current.patternFill;for(const U of d){const{data:W,width:Y,height:V,transform:o}=U,f=this.cachedCanvases.getCanvas("maskCanvas",Y,V),_=f.context;_.save();const P=this.getObject(W,U);r(_,P),_.globalCompositeOperation="source-in",_.fillStyle=j?R.getPattern(_,this,(0,e.getCurrentTransformInverse)(u),F.PathType.FILL):R,_.fillRect(0,0,Y,V),_.restore(),u.save(),u.transform(...o),u.scale(1,-1),l(u,f.canvas,0,0,Y,V,0,-1,1,1),u.restore()}this.compose()}paintImageXObject(d){if(!this.contentVisible)return;const u=this.getObject(d);if(!u){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(u)}paintImageXObjectRepeat(d,u,R,j){if(!this.contentVisible)return;const U=this.getObject(d);if(!U){(0,i.warn)("Dependent image isn't ready yet");return}const W=U.width,Y=U.height,V=[];for(let o=0,f=j.length;o<f;o+=2)V.push({transform:[u,0,0,R,j[o],j[o+1]],x:0,y:0,w:W,h:Y});this.paintInlineImageXObjectGroup(U,V)}paintInlineImageXObject(d){if(!this.contentVisible)return;const u=d.width,R=d.height,j=this.ctx;this.save(),j.scale(1/u,-1/R);let U;if(typeof HTMLElement=="function"&&d instanceof HTMLElement||!d.data)U=d;else{const o=this.cachedCanvases.getCanvas("inlineImage",u,R),f=o.context;c(f,d,this.current.transferMaps),U=o.canvas}const W=this._scaleImage(U,(0,e.getCurrentTransformInverse)(j));j.imageSmoothingEnabled=st((0,e.getCurrentTransform)(j),d.interpolate);const[Y,V]=l(j,W.img,0,0,W.paintWidth,W.paintHeight,0,-R,u,R);if(this.imageLayer){const[o,f]=i.Util.applyTransform([0,-R],(0,e.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:d,left:o,top:f,width:Y,height:V})}this.compose(),this.restore()}paintInlineImageXObjectGroup(d,u){if(!this.contentVisible)return;const R=this.ctx,j=d.width,U=d.height,W=this.cachedCanvases.getCanvas("inlineImage",j,U),Y=W.context;c(Y,d,this.current.transferMaps);for(const V of u){if(R.save(),R.transform(...V.transform),R.scale(1,-1),l(R,W.canvas,V.x,V.y,V.w,V.h,0,-1,1,1),this.imageLayer){const[o,f]=i.Util.applyTransform([V.x,V.y],(0,e.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:d,left:o,top:f,width:j,height:U})}R.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(d){}markPointProps(d,u){}beginMarkedContent(d){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(d,u){d==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(u)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(d){const u=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);const R=this.ctx;this.pendingClip&&(u||(this.pendingClip===$?R.clip("evenodd"):R.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),R.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const d=(0,e.getCurrentTransform)(this.ctx);if(d[1]===0&&d[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(d[0]),Math.abs(d[3]));else{const u=Math.abs(d[0]*d[3]-d[2]*d[1]),R=Math.hypot(d[0],d[2]),j=Math.hypot(d[1],d[3]);this._cachedGetSinglePixelWidth=Math.max(R,j)/u}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:d}=this.current,u=(0,e.getCurrentTransform)(this.ctx);let R,j;if(u[1]===0&&u[2]===0){const U=Math.abs(u[0]),W=Math.abs(u[3]);if(d===0)R=1/U,j=1/W;else{const Y=U*d,V=W*d;R=Y<1?1/Y:1,j=V<1?1/V:1}}else{const U=Math.abs(u[0]*u[3]-u[2]*u[1]),W=Math.hypot(u[0],u[1]),Y=Math.hypot(u[2],u[3]);if(d===0)R=Y/U,j=W/U;else{const V=d*U;R=Y>V?Y/V:1,j=W>V?W/V:1}}this._cachedScaleForStroking=[R,j]}return this._cachedScaleForStroking}rescaleAndStroke(d){const{ctx:u}=this,{lineWidth:R}=this.current,[j,U]=this.getScaleForStroking();if(u.lineWidth=R||1,j===1&&U===1){u.stroke();return}let W,Y,V;d&&(W=(0,e.getCurrentTransform)(u),Y=u.getLineDash().slice(),V=u.lineDashOffset),u.scale(j,U);const o=Math.max(j,U);u.setLineDash(u.getLineDash().map(f=>f/o)),u.lineDashOffset/=o,u.stroke(),d&&(u.setTransform(...W),u.setLineDash(Y),u.lineDashOffset=V)}isContentVisible(){for(let d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}};let X=_t;nt=new WeakSet,he=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},n.CanvasGraphics=X;for(const B in i.OPS)X.prototype[B]!==void 0&&(X.prototype[i.OPS[B]]=X.prototype[B])},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=h;var e=y(1),i=y(8),F=y(3);const M={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};n.PathType=M;function x(l,v){if(!v||F.isNodeJS)return;const A=v[2]-v[0],c=v[3]-v[1],r=new Path2D;r.rect(v[0],v[1],A,c),l.clip(r)}class b{constructor(){this.constructor===b&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class p extends b{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let A;this._type==="axial"?A=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(A=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const c of this._colorStops)A.addColorStop(c[0],c[1]);return A}getPattern(v,A,c,r){let a;if(r===M.STROKE||r===M.FILL){const g=A.current.getClippedPathBoundingBox(r,(0,i.getCurrentTransform)(v))||[0,0,0,0],k=Math.ceil(g[2]-g[0])||1,S=Math.ceil(g[3]-g[1])||1,m=A.cachedCanvases.getCanvas("pattern",k,S,!0),O=m.context;O.clearRect(0,0,O.canvas.width,O.canvas.height),O.beginPath(),O.rect(0,0,O.canvas.width,O.canvas.height),O.translate(-g[0],-g[1]),c=e.Util.transform(c,[1,0,0,1,g[0],g[1]]),O.transform(...A.baseTransform),this.matrix&&O.transform(...this.matrix),x(O,this._bbox),O.fillStyle=this._createGradient(O),O.fill(),a=v.createPattern(m.canvas,"no-repeat");const tt=new DOMMatrix(c);try{a.setTransform(tt)}catch(st){(0,e.warn)(`RadialAxialShadingPattern.getPattern: "${st==null?void 0:st.message}".`)}}else x(v,this._bbox),a=this._createGradient(v);return a}}function w(l,v,A,c,r,a,g,k){const S=v.coords,m=v.colors,O=l.data,tt=l.width*4;let st;S[A+1]>S[c+1]&&(st=A,A=c,c=st,st=a,a=g,g=st),S[c+1]>S[r+1]&&(st=c,c=r,r=st,st=g,g=k,k=st),S[A+1]>S[c+1]&&(st=A,A=c,c=st,st=a,a=g,g=st);const Q=(S[A]+v.offsetX)*v.scaleX,K=(S[A+1]+v.offsetY)*v.scaleY,G=(S[c]+v.offsetX)*v.scaleX,$=(S[c+1]+v.offsetY)*v.scaleY,X=(S[r]+v.offsetX)*v.scaleX,nt=(S[r+1]+v.offsetY)*v.scaleY;if(K>=nt)return;const lt=m[a],_t=m[a+1],B=m[a+2],d=m[g],u=m[g+1],R=m[g+2],j=m[k],U=m[k+1],W=m[k+2],Y=Math.round(K),V=Math.round(nt);let o,f,_,P,I,q,rt,ut;for(let Z=Y;Z<=V;Z++){if(Z<$){let N;Z<K?N=0:N=(K-Z)/(K-$),o=Q-(Q-G)*N,f=lt-(lt-d)*N,_=_t-(_t-u)*N,P=B-(B-R)*N}else{let N;Z>nt?N=1:$===nt?N=0:N=($-Z)/($-nt),o=G-(G-X)*N,f=d-(d-j)*N,_=u-(u-U)*N,P=R-(R-W)*N}let ot;Z<K?ot=0:Z>nt?ot=1:ot=(K-Z)/(K-nt),I=Q-(Q-X)*ot,q=lt-(lt-j)*ot,rt=_t-(_t-U)*ot,ut=B-(B-W)*ot;const et=Math.round(Math.min(o,I)),ct=Math.round(Math.max(o,I));let pt=tt*Z+et*4;for(let N=et;N<=ct;N++)ot=(o-N)/(o-I),ot<0?ot=0:ot>1&&(ot=1),O[pt++]=f-(f-q)*ot|0,O[pt++]=_-(_-rt)*ot|0,O[pt++]=P-(P-ut)*ot|0,O[pt++]=255}}function L(l,v,A){const c=v.coords,r=v.colors;let a,g;switch(v.type){case"lattice":const k=v.verticesPerRow,S=Math.floor(c.length/k)-1,m=k-1;for(a=0;a<S;a++){let O=a*k;for(let tt=0;tt<m;tt++,O++)w(l,A,c[O],c[O+1],c[O+k],r[O],r[O+1],r[O+k]),w(l,A,c[O+k+1],c[O+1],c[O+k],r[O+k+1],r[O+1],r[O+k])}break;case"triangles":for(a=0,g=c.length;a<g;a+=3)w(l,A,c[a],c[a+1],c[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class C extends b{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,A,c){const k=Math.floor(this._bounds[0]),S=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-k,O=Math.ceil(this._bounds[3])-S,tt=Math.min(Math.ceil(Math.abs(m*v[0]*1.1)),3e3),st=Math.min(Math.ceil(Math.abs(O*v[1]*1.1)),3e3),Q=m/tt,K=O/st,G={coords:this._coords,colors:this._colors,offsetX:-k,offsetY:-S,scaleX:1/Q,scaleY:1/K},$=tt+2*2,X=st+2*2,nt=c.getCanvas("mesh",$,X,!1),lt=nt.context,_t=lt.createImageData(tt,st);if(A){const d=_t.data;for(let u=0,R=d.length;u<R;u+=4)d[u]=A[0],d[u+1]=A[1],d[u+2]=A[2],d[u+3]=255}for(const d of this._figures)L(_t,d,G);return lt.putImageData(_t,2,2),{canvas:nt.canvas,offsetX:k-2*Q,offsetY:S-2*K,scaleX:Q,scaleY:K}}getPattern(v,A,c,r){x(v,this._bbox);let a;if(r===M.SHADING)a=e.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(v));else if(a=e.Util.singularValueDecompose2dScale(A.baseTransform),this.matrix){const k=e.Util.singularValueDecompose2dScale(this.matrix);a=[a[0]*k[0],a[1]*k[1]]}const g=this._createMeshCanvas(a,r===M.SHADING?null:this._background,A.cachedCanvases);return r!==M.SHADING&&(v.setTransform(...A.baseTransform),this.matrix&&v.transform(...this.matrix)),v.translate(g.offsetX,g.offsetY),v.scale(g.scaleX,g.scaleY),v.createPattern(g.canvas,"no-repeat")}}class E extends b{getPattern(){return"hotpink"}}function h(l){switch(l[0]){case"RadialAxial":return new p(l);case"Mesh":return new C(l);case"Dummy":return new E}throw new Error(`Unknown IR type: ${l[0]}`)}const t={COLORED:1,UNCOLORED:2};class s{static get MAX_PATTERN_SIZE(){return(0,e.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(v,A,c,r,a){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=A,this.ctx=c,this.canvasGraphicsFactory=r,this.baseTransform=a}createPatternCanvas(v){const A=this.operatorList,c=this.bbox,r=this.xstep,a=this.ystep,g=this.paintType,k=this.tilingType,S=this.color,m=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+k);const O=c[0],tt=c[1],st=c[2],Q=c[3],K=e.Util.singularValueDecompose2dScale(this.matrix),G=e.Util.singularValueDecompose2dScale(this.baseTransform),$=[K[0]*G[0],K[1]*G[1]],X=this.getSizeAndScale(r,this.ctx.canvas.width,$[0]),nt=this.getSizeAndScale(a,this.ctx.canvas.height,$[1]),lt=v.cachedCanvases.getCanvas("pattern",X.size,nt.size,!0),_t=lt.context,B=m.createCanvasGraphics(_t);B.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext(B,g,S);let d=O,u=tt,R=st,j=Q;return O<0&&(d=0,R+=Math.abs(O)),tt<0&&(u=0,j+=Math.abs(tt)),_t.translate(-(X.scale*d),-(nt.scale*u)),B.transform(X.scale,0,0,nt.scale,0,0),_t.save(),this.clipBbox(B,d,u,R,j),B.baseTransform=(0,i.getCurrentTransform)(B.ctx),B.executeOperatorList(A),B.endDrawing(),{canvas:lt.canvas,scaleX:X.scale,scaleY:nt.scale,offsetX:d,offsetY:u}}getSizeAndScale(v,A,c){v=Math.abs(v);const r=Math.max(s.MAX_PATTERN_SIZE,A);let a=Math.ceil(v*c);return a>=r?a=r:c=a/v,{scale:c,size:a}}clipBbox(v,A,c,r,a){const g=r-A,k=a-c;v.ctx.rect(A,c,g,k),v.current.updateRectMinMax((0,i.getCurrentTransform)(v.ctx),[A,c,r,a]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,A,c){const r=v.ctx,a=v.current;switch(A){case t.COLORED:const g=this.ctx;r.fillStyle=g.fillStyle,r.strokeStyle=g.strokeStyle,a.fillColor=g.fillStyle,a.strokeColor=g.strokeStyle;break;case t.UNCOLORED:const k=e.Util.makeHexColor(c[0],c[1],c[2]);r.fillStyle=k,r.strokeStyle=k,a.fillColor=k,a.strokeColor=k;break;default:throw new e.FormatError(`Unsupported paint type: ${A}`)}}getPattern(v,A,c,r){let a=c;r!==M.SHADING&&(a=e.Util.transform(a,A.baseTransform),this.matrix&&(a=e.Util.transform(a,this.matrix)));const g=this.createPatternCanvas(A);let k=new DOMMatrix(a);k=k.translate(g.offsetX,g.offsetY),k=k.scale(1/g.scaleX,1/g.scaleY);const S=v.createPattern(g.canvas,"repeat");try{S.setTransform(k)}catch(m){(0,e.warn)(`TilingPattern.getPattern: "${m==null?void 0:m.message}".`)}return S}}n.TilingPattern=s},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.applyMaskImageData=i;var e=y(1);function i({src:F,srcPos:M=0,dest:x,destPos:b=0,width:p,height:w,inverseDecode:L=!1}){const C=e.FeatureTest.isLittleEndian?4278190080:255,[E,h]=L?[0,C]:[C,0],t=p>>3,s=p&7,l=F.length;x=new Uint32Array(x.buffer);for(let v=0;v<w;v++){for(const c=M+t;M<c;M++){const r=M<l?F[M]:255;x[b++]=r&128?h:E,x[b++]=r&64?h:E,x[b++]=r&32?h:E,x[b++]=r&16?h:E,x[b++]=r&8?h:E,x[b++]=r&4?h:E,x[b++]=r&2?h:E,x[b++]=r&1?h:E}if(s===0)continue;const A=M<l?F[M++]:255;for(let c=0;c<s;c++)x[b++]=A&1<<7-c?h:E}return{srcPos:M,destPos:b}}},(T,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;const y=Object.create(null);n.GlobalWorkerOptions=y,y.workerPort=y.workerPort===void 0?null:y.workerPort,y.workerSrc=y.workerSrc===void 0?"":y.workerSrc},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var e=y(1);const i={UNKNOWN:0,DATA:1,ERROR:2},F={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function M(b){switch(b instanceof Error||typeof b=="object"&&b!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),b.name){case"AbortException":return new e.AbortException(b.message);case"MissingPDFException":return new e.MissingPDFException(b.message);case"PasswordException":return new e.PasswordException(b.message,b.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(b.message,b.status);case"UnknownErrorException":return new e.UnknownErrorException(b.message,b.details);default:return new e.UnknownErrorException(b.message,b.toString())}}class x{constructor(p,w,L){this.sourceName=p,this.targetName=w,this.comObj=L,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=C=>{const E=C.data;if(E.targetName!==this.sourceName)return;if(E.stream){this._processStreamMessage(E);return}if(E.callback){const t=E.callbackId,s=this.callbackCapabilities[t];if(!s)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],E.callback===i.DATA)s.resolve(E.data);else if(E.callback===i.ERROR)s.reject(M(E.reason));else throw new Error("Unexpected callback case");return}const h=this.actionHandler[E.action];if(!h)throw new Error(`Unknown action from worker: ${E.action}`);if(E.callbackId){const t=this.sourceName,s=E.sourceName;new Promise(function(l){l(h(E.data))}).then(function(l){L.postMessage({sourceName:t,targetName:s,callback:i.DATA,callbackId:E.callbackId,data:l})},function(l){L.postMessage({sourceName:t,targetName:s,callback:i.ERROR,callbackId:E.callbackId,reason:M(l)})});return}if(E.streamId){this._createStreamSink(E);return}h(E.data)},L.addEventListener("message",this._onComObjOnMessage)}on(p,w){const L=this.actionHandler;if(L[p])throw new Error(`There is already an actionName called "${p}"`);L[p]=w}send(p,w,L){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:p,data:w},L)}sendWithPromise(p,w,L){const C=this.callbackId++,E=(0,e.createPromiseCapability)();this.callbackCapabilities[C]=E;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:p,callbackId:C,data:w},L)}catch(h){E.reject(h)}return E.promise}sendWithStream(p,w,L,C){const E=this.streamId++,h=this.sourceName,t=this.targetName,s=this.comObj;return new ReadableStream({start:l=>{const v=(0,e.createPromiseCapability)();return this.streamControllers[E]={controller:l,startCall:v,pullCall:null,cancelCall:null,isClosed:!1},s.postMessage({sourceName:h,targetName:t,action:p,streamId:E,data:w,desiredSize:l.desiredSize},C),v.promise},pull:l=>{const v=(0,e.createPromiseCapability)();return this.streamControllers[E].pullCall=v,s.postMessage({sourceName:h,targetName:t,stream:F.PULL,streamId:E,desiredSize:l.desiredSize}),v.promise},cancel:l=>{(0,e.assert)(l instanceof Error,"cancel must have a valid reason");const v=(0,e.createPromiseCapability)();return this.streamControllers[E].cancelCall=v,this.streamControllers[E].isClosed=!0,s.postMessage({sourceName:h,targetName:t,stream:F.CANCEL,streamId:E,reason:M(l)}),v.promise}},L)}_createStreamSink(p){const w=p.streamId,L=this.sourceName,C=p.sourceName,E=this.comObj,h=this,t=this.actionHandler[p.action],s={enqueue(l,v=1,A){if(this.isCancelled)return;const c=this.desiredSize;this.desiredSize-=v,c>0&&this.desiredSize<=0&&(this.sinkCapability=(0,e.createPromiseCapability)(),this.ready=this.sinkCapability.promise),E.postMessage({sourceName:L,targetName:C,stream:F.ENQUEUE,streamId:w,chunk:l},A)},close(){this.isCancelled||(this.isCancelled=!0,E.postMessage({sourceName:L,targetName:C,stream:F.CLOSE,streamId:w}),delete h.streamSinks[w])},error(l){(0,e.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,E.postMessage({sourceName:L,targetName:C,stream:F.ERROR,streamId:w,reason:M(l)}))},sinkCapability:(0,e.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:p.desiredSize,ready:null};s.sinkCapability.resolve(),s.ready=s.sinkCapability.promise,this.streamSinks[w]=s,new Promise(function(l){l(t(p.data,s))}).then(function(){E.postMessage({sourceName:L,targetName:C,stream:F.START_COMPLETE,streamId:w,success:!0})},function(l){E.postMessage({sourceName:L,targetName:C,stream:F.START_COMPLETE,streamId:w,reason:M(l)})})}_processStreamMessage(p){const w=p.streamId,L=this.sourceName,C=p.sourceName,E=this.comObj,h=this.streamControllers[w],t=this.streamSinks[w];switch(p.stream){case F.START_COMPLETE:p.success?h.startCall.resolve():h.startCall.reject(M(p.reason));break;case F.PULL_COMPLETE:p.success?h.pullCall.resolve():h.pullCall.reject(M(p.reason));break;case F.PULL:if(!t){E.postMessage({sourceName:L,targetName:C,stream:F.PULL_COMPLETE,streamId:w,success:!0});break}t.desiredSize<=0&&p.desiredSize>0&&t.sinkCapability.resolve(),t.desiredSize=p.desiredSize,new Promise(function(s){s(t.onPull&&t.onPull())}).then(function(){E.postMessage({sourceName:L,targetName:C,stream:F.PULL_COMPLETE,streamId:w,success:!0})},function(s){E.postMessage({sourceName:L,targetName:C,stream:F.PULL_COMPLETE,streamId:w,reason:M(s)})});break;case F.ENQUEUE:if((0,e.assert)(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(p.chunk);break;case F.CLOSE:if((0,e.assert)(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),this._deleteStreamController(h,w);break;case F.ERROR:(0,e.assert)(h,"error should have stream controller"),h.controller.error(M(p.reason)),this._deleteStreamController(h,w);break;case F.CANCEL_COMPLETE:p.success?h.cancelCall.resolve():h.cancelCall.reject(M(p.reason)),this._deleteStreamController(h,w);break;case F.CANCEL:if(!t)break;new Promise(function(s){s(t.onCancel&&t.onCancel(M(p.reason)))}).then(function(){E.postMessage({sourceName:L,targetName:C,stream:F.CANCEL_COMPLETE,streamId:w,success:!0})},function(s){E.postMessage({sourceName:L,targetName:C,stream:F.CANCEL_COMPLETE,streamId:w,reason:M(s)})}),t.sinkCapability.reject(M(p.reason)),t.isCancelled=!0,delete this.streamSinks[w];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(p,w){await Promise.allSettled([p.startCall&&p.startCall.promise,p.pullCall&&p.pullCall.promise,p.cancelCall&&p.cancelCall.promise]),delete this.streamControllers[w]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}n.MessageHandler=x},(T,n,y)=>{var F,M;Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var e=y(1);class i{constructor({parsedData:b,rawData:p}){at(this,F,void 0);at(this,M,void 0);mt(this,F,b),mt(this,M,p)}getRaw(){return D(this,M)}get(b){return D(this,F).get(b)??null}getAll(){return(0,e.objectFromMap)(D(this,F))}has(b){return D(this,F).has(b)}}F=new WeakMap,M=new WeakMap,n.Metadata=i},(T,n,y)=>{var x,b,p,w,L,C,ue;Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var e=y(1);const i=Symbol("INTERNAL");class F{constructor(t,s){at(this,x,!0);this.name=t,this.intent=s}get visible(){return D(this,x)}_setVisible(t,s){t!==i&&(0,e.unreachable)("Internal method `_setVisible` called."),mt(this,x,s)}}x=new WeakMap;class M{constructor(t){at(this,C);at(this,b,!0);at(this,p,new Map);at(this,w,null);at(this,L,null);if(this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,mt(this,L,t.order);for(const s of t.groups)D(this,p).set(s.id,new F(s.name,s.intent));if(t.baseState==="OFF")for(const s of D(this,p).values())s._setVisible(i,!1);for(const s of t.on)D(this,p).get(s)._setVisible(i,!0);for(const s of t.off)D(this,p).get(s)._setVisible(i,!1);mt(this,w,new Map);for(const[s,l]of D(this,p))D(this,w).set(s,l.visible)}}isVisible(t){if(D(this,p).size===0)return!0;if(!t)return(0,e.warn)("Optional content group not defined."),!0;if(t.type==="OCG")return D(this,p).has(t.id)?D(this,p).get(t.id).visible:((0,e.warn)(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return ht(this,C,ue).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const s of t.ids){if(!D(this,p).has(s))return(0,e.warn)(`Optional content group not found: ${s}`),!0;if(D(this,p).get(s).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const s of t.ids){if(!D(this,p).has(s))return(0,e.warn)(`Optional content group not found: ${s}`),!0;if(!D(this,p).get(s).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const s of t.ids){if(!D(this,p).has(s))return(0,e.warn)(`Optional content group not found: ${s}`),!0;if(!D(this,p).get(s).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const s of t.ids){if(!D(this,p).has(s))return(0,e.warn)(`Optional content group not found: ${s}`),!0;if(D(this,p).get(s).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,e.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,s=!0){if(!D(this,p).has(t)){(0,e.warn)(`Optional content group not found: ${t}`);return}D(this,p).get(t)._setVisible(i,!!s),mt(this,b,null)}get hasInitialVisibility(){if(D(this,b)!==null)return D(this,b);for(const[t,s]of D(this,p)){const l=D(this,w).get(t);if(s.visible!==l)return mt(this,b,!1)}return mt(this,b,!0)}getOrder(){return D(this,p).size?D(this,L)?D(this,L).slice():[...D(this,p).keys()]:null}getGroups(){return D(this,p).size>0?(0,e.objectFromMap)(D(this,p)):null}getGroup(t){return D(this,p).get(t)||null}}b=new WeakMap,p=new WeakMap,w=new WeakMap,L=new WeakMap,C=new WeakSet,ue=function(t){const s=t.length;if(s<2)return!0;const l=t[0];for(let v=1;v<s;v++){const A=t[v];let c;if(Array.isArray(A))c=ht(this,C,ue).call(this,A);else if(D(this,p).has(A))c=D(this,p).get(A).visible;else return(0,e.warn)(`Optional content group not found: ${A}`),!0;switch(l){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return l==="And"},n.OptionalContentConfig=M},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var e=y(1),i=y(8);class F{constructor(p,w){(0,e.assert)(w,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=p.progressiveDone||!1,this._contentDispositionFilename=p.contentDispositionFilename||null;const L=p.initialData;if((L==null?void 0:L.length)>0){const C=new Uint8Array(L).buffer;this._queuedChunks.push(C)}this._pdfDataRangeTransport=w,this._isStreamingSupported=!p.disableStream,this._isRangeSupported=!p.disableRange,this._contentLength=p.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((C,E)=>{this._onReceiveData({begin:C,chunk:E})}),this._pdfDataRangeTransport.addProgressListener((C,E)=>{this._onProgress({loaded:C,total:E})}),this._pdfDataRangeTransport.addProgressiveReadListener(C=>{this._onReceiveData({chunk:C})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(p){const w=new Uint8Array(p.chunk).buffer;if(p.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(w):this._queuedChunks.push(w);else{const L=this._rangeReaders.some(function(C){return C._begin!==p.begin?!1:(C._enqueue(w),!0)});(0,e.assert)(L,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}_onProgress(p){if(p.total===void 0){const w=this._rangeReaders[0];w!=null&&w.onProgress&&w.onProgress({loaded:p.loaded})}else{const w=this._fullRequestReader;w!=null&&w.onProgress&&w.onProgress({loaded:p.loaded,total:p.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(p){const w=this._rangeReaders.indexOf(p);w>=0&&this._rangeReaders.splice(w,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const p=this._queuedChunks;return this._queuedChunks=null,new M(this,p,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(p,w){if(w<=this._progressiveDataLength)return null;const L=new x(this,p,w);return this._pdfDataRangeTransport.requestDataRange(p,w),this._rangeReaders.push(L),L}cancelAllRequests(p){this._fullRequestReader&&this._fullRequestReader.cancel(p);for(const w of this._rangeReaders.slice(0))w.cancel(p);this._pdfDataRangeTransport.abort()}}n.PDFDataTransportStream=F;class M{constructor(p,w,L=!1,C=null){this._stream=p,this._done=L||!1,this._filename=(0,i.isPdfFile)(C)?C:null,this._queuedChunks=w||[],this._loaded=0;for(const E of this._queuedChunks)this._loaded+=E.byteLength;this._requests=[],this._headersReady=Promise.resolve(),p._fullRequestReader=this,this.onProgress=null}_enqueue(p){this._done||(this._requests.length>0?this._requests.shift().resolve({value:p,done:!1}):this._queuedChunks.push(p),this._loaded+=p.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const p=(0,e.createPromiseCapability)();return this._requests.push(p),p.promise}cancel(p){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class x{constructor(p,w,L){this._stream=p,this._begin=w,this._end=L,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(p){if(!this._done){if(this._requests.length===0)this._queuedChunk=p;else{this._requests.shift().resolve({value:p,done:!1});for(const L of this._requests)L.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const w=this._queuedChunk;return this._queuedChunk=null,{value:w,done:!1}}if(this._done)return{value:void 0,done:!0};const p=(0,e.createPromiseCapability)();return this._requests.push(p),p.promise}cancel(p){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(T,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;class y{static textContent(i){const F=[],M={items:F,styles:Object.create(null)};function x(b){var L;if(!b)return;let p=null;const w=b.name;if(w==="#text")p=b.value;else if(y.shouldBuildText(w))(L=b==null?void 0:b.attributes)!=null&&L.textContent?p=b.attributes.textContent:b.value&&(p=b.value);else return;if(p!==null&&F.push({str:p}),!!b.children)for(const C of b.children)x(C)}return x(i),M}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}n.XfaText=y},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var e=y(9);const i=function(b){return new Promise((p,w)=>{require$$5.readFile(b,(C,E)=>{if(C||!E){w(new Error(C));return}p(new Uint8Array(E))})})};class F extends e.BaseCanvasFactory{_createCanvas(p,w){return require$$5.createCanvas(p,w)}}n.NodeCanvasFactory=F;class M extends e.BaseCMapReaderFactory{_fetchData(p,w){return i(p).then(L=>({cMapData:L,compressionType:w}))}}n.NodeCMapReaderFactory=M;class x extends e.BaseStandardFontDataFactory{_fetchData(p){return i(p)}}n.NodeStandardFontDataFactory=x},(T,n,y)=>{var b,p,w,L,C,E,h,t,s,de,v,Re,c,pe,a,ke;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditorLayer=void 0;var e=y(7),i=y(1),F=y(23),M=y(24);const k=class{constructor(m){at(this,s);at(this,v);at(this,c);at(this,a);at(this,b,void 0);at(this,p,!1);at(this,w,this.pointerup.bind(this));at(this,L,this.pointerdown.bind(this));at(this,C,new Map);at(this,E,!1);at(this,h,!1);at(this,t,void 0);k._initialized||(k._initialized=!0,F.FreeTextEditor.initialize(m.l10n),M.InkEditor.initialize(m.l10n),m.uiManager.registerEditorTypes([F.FreeTextEditor,M.InkEditor])),mt(this,t,m.uiManager),this.annotationStorage=m.annotationStorage,this.pageIndex=m.pageIndex,this.div=m.div,mt(this,b,m.accessibilityManager),D(this,t).addLayer(this)}updateToolbar(m){D(this,t).updateToolbar(m)}updateMode(m=D(this,t).getMode()){ht(this,a,ke).call(this),m===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),D(this,t).unselectAll()}addInkEditorIfNeeded(m){if(!m&&D(this,t).getMode()!==i.AnnotationEditorType.INK)return;if(!m){for(const tt of D(this,C).values())if(tt.isEmpty()){tt.setInBackground();return}}ht(this,c,pe).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(m){D(this,t).setEditingState(m)}addCommands(m){D(this,t).addCommands(m)}enable(){this.div.style.pointerEvents="auto";for(const m of D(this,C).values())m.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const m of D(this,C).values())m.disableEditing()}setActiveEditor(m){D(this,t).getActive()!==m&&D(this,t).setActiveEditor(m)}enableClick(){this.div.addEventListener("pointerdown",D(this,L)),this.div.addEventListener("pointerup",D(this,w))}disableClick(){this.div.removeEventListener("pointerdown",D(this,L)),this.div.removeEventListener("pointerup",D(this,w))}attach(m){D(this,C).set(m.id,m)}detach(m){var O;D(this,C).delete(m.id),(O=D(this,b))==null||O.removePointerInTextLayer(m.contentDiv)}remove(m){D(this,t).removeEditor(m),this.detach(m),this.annotationStorage.remove(m.id),m.div.style.display="none",setTimeout(()=>{m.div.style.display="",m.div.remove(),m.isAttachedToDOM=!1,document.activeElement===document.body&&D(this,t).focusMainContainer()},0),D(this,h)||this.addInkEditorIfNeeded(!1)}add(m){if(ht(this,s,de).call(this,m),D(this,t).addEditor(m),this.attach(m),!m.isAttachedToDOM){const O=m.render();this.div.append(O),m.isAttachedToDOM=!0}this.moveEditorInDOM(m),m.onceAdded(),this.addToAnnotationStorage(m)}moveEditorInDOM(m){var O;(O=D(this,b))==null||O.moveElementInDOM(this.div,m.div,m.contentDiv,!0)}addToAnnotationStorage(m){!m.isEmpty()&&!this.annotationStorage.has(m.id)&&this.annotationStorage.setValue(m.id,m)}addOrRebuild(m){m.needsToBeRebuilt()?m.rebuild():this.add(m)}addANewEditor(m){const O=()=>{this.addOrRebuild(m)},tt=()=>{m.remove()};this.addCommands({cmd:O,undo:tt,mustExec:!0})}addUndoableEditor(m){const O=()=>{this.addOrRebuild(m)},tt=()=>{m.remove()};this.addCommands({cmd:O,undo:tt,mustExec:!1})}getNextId(){return D(this,t).getId()}deserialize(m){switch(m.annotationType){case i.AnnotationEditorType.FREETEXT:return F.FreeTextEditor.deserialize(m,this);case i.AnnotationEditorType.INK:return M.InkEditor.deserialize(m,this)}return null}setSelected(m){D(this,t).setSelected(m)}toggleSelected(m){D(this,t).toggleSelected(m)}isSelected(m){return D(this,t).isSelected(m)}unselect(m){D(this,t).unselect(m)}pointerup(m){const O=e.KeyboardManager.platform.isMac;if(!(m.button!==0||m.ctrlKey&&O)&&m.target===this.div&&D(this,E)){if(mt(this,E,!1),!D(this,p)){mt(this,p,!0);return}ht(this,c,pe).call(this,m)}}pointerdown(m){const O=e.KeyboardManager.platform.isMac;if(m.button!==0||m.ctrlKey&&O||m.target!==this.div)return;mt(this,E,!0);const tt=D(this,t).getActive();mt(this,p,!tt||tt.isEmpty())}drop(m){const O=m.dataTransfer.getData("text/plain"),tt=D(this,t).getEditor(O);if(!tt)return;m.preventDefault(),m.dataTransfer.dropEffect="move",ht(this,s,de).call(this,tt);const st=this.div.getBoundingClientRect(),Q=m.clientX-st.x,K=m.clientY-st.y;tt.translate(Q-tt.startX,K-tt.startY),this.moveEditorInDOM(tt),tt.div.focus()}dragover(m){m.preventDefault()}destroy(){var m,O;((m=D(this,t).getActive())==null?void 0:m.parent)===this&&D(this,t).setActiveEditor(null);for(const tt of D(this,C).values())(O=D(this,b))==null||O.removePointerInTextLayer(tt.contentDiv),tt.isAttachedToDOM=!1,tt.div.remove(),tt.parent=null;this.div=null,D(this,C).clear(),D(this,t).removeLayer(this)}render(m){this.viewport=m.viewport,(0,e.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const O of D(this,t).getEditors(this.pageIndex))this.add(O);this.updateMode()}update(m){this.viewport=m.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[m,O,tt,st]=this.viewport.viewBox,Q=tt-m,K=st-O;return[Q,K]}get viewportBaseDimensions(){const{width:m,height:O,rotation:tt}=this.viewport;return tt%180===0?[m,O]:[O,m]}setDimensions(){const{width:m,height:O,rotation:tt}=this.viewport,st=tt%180!==0,Q=Math.floor(m)+"px",K=Math.floor(O)+"px";this.div.style.width=st?K:Q,this.div.style.height=st?Q:K,this.div.setAttribute("data-main-rotation",tt)}};let x=k;b=new WeakMap,p=new WeakMap,w=new WeakMap,L=new WeakMap,C=new WeakMap,E=new WeakMap,h=new WeakMap,t=new WeakMap,s=new WeakSet,de=function(m){var O;m.parent!==this&&(this.attach(m),m.pageIndex=this.pageIndex,(O=m.parent)==null||O.detach(m),m.parent=this,m.div&&m.isAttachedToDOM&&(m.div.remove(),this.div.append(m.div)))},v=new WeakSet,Re=function(m){switch(D(this,t).getMode()){case i.AnnotationEditorType.FREETEXT:return new F.FreeTextEditor(m);case i.AnnotationEditorType.INK:return new M.InkEditor(m)}return null},c=new WeakSet,pe=function(m){const O=this.getNextId(),tt=ht(this,v,Re).call(this,{parent:this,id:O,x:m.offsetX,y:m.offsetY});return tt&&this.add(tt),tt},a=new WeakSet,ke=function(){mt(this,h,!0);for(const m of D(this,C).values())m.isEmpty()&&m.remove();mt(this,h,!1)},Mt(x,"_initialized",!1),n.AnnotationEditorLayer=x},(T,n,y)=>{var x,b,p,w,L,C,E,h,Fe,s,Me,v,Oe,c,fe;Object.defineProperty(n,"__esModule",{value:!0}),n.FreeTextEditor=void 0;var e=y(1),i=y(7),F=y(6);const a=class extends F.AnnotationEditor{constructor(S){super({...S,name:"freeTextEditor"});at(this,h);at(this,s);at(this,v);at(this,c);at(this,x,this.editorDivBlur.bind(this));at(this,b,this.editorDivFocus.bind(this));at(this,p,this.editorDivKeydown.bind(this));at(this,w,void 0);at(this,L,"");at(this,C,!1);at(this,E,void 0);mt(this,w,S.color||a._defaultColor||F.AnnotationEditor._defaultLineColor),mt(this,E,S.fontSize||a._defaultFontSize)}static initialize(S){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(O=>[O,S.get(O)]));const m=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(m.getPropertyValue("--freetext-padding"))}static updateDefaultParams(S,m){switch(S){case e.AnnotationEditorParamsType.FREETEXT_SIZE:a._defaultFontSize=m;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:a._defaultColor=m;break}}updateParams(S,m){switch(S){case e.AnnotationEditorParamsType.FREETEXT_SIZE:ht(this,h,Fe).call(this,m);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:ht(this,s,Me).call(this,m);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,a._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,a._defaultColor||F.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,D(this,E)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,D(this,w)]]}getInitialTranslation(){return[-a._internalPadding*this.parent.scaleFactor,-(a._internalPadding+D(this,E))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",D(this,p)),this.editorDiv.addEventListener("focus",D(this,b)),this.editorDiv.addEventListener("blur",D(this,x)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",D(this,p)),this.editorDiv.removeEventListener("focus",D(this,b)),this.editorDiv.removeEventListener("blur",D(this,x)),this.div.focus(),this.isEditing=!1)}focusin(S){super.focusin(S),S.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),D(this,C)||(mt(this,C,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),mt(this,L,ht(this,v,Oe).call(this).trimEnd()),ht(this,c,fe).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(S){this.enableEditMode(),this.editorDiv.focus()}keydown(S){S.target===this.div&&S.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(S){a._keyboardManager.exec(this,S)}editorDivFocus(S){this.isEditing=!0}editorDivBlur(S){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let S,m;this.width&&(S=this.x,m=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),a._l10nPromise.get("editor_free_text_aria_label").then(tt=>{var st;return(st=this.editorDiv)==null?void 0:st.setAttribute("aria-label",tt)}),a._l10nPromise.get("free_text_default_content").then(tt=>{var st;return(st=this.editorDiv)==null?void 0:st.setAttribute("default-content",tt)}),this.editorDiv.contentEditable=!0;const{style:O}=this.editorDiv;if(O.fontSize=`calc(${D(this,E)}px * var(--scale-factor))`,O.color=D(this,w),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[tt,st]=this.parent.viewportBaseDimensions;this.setAt(S*tt,m*st,this.width*tt,this.height*st);for(const Q of D(this,L).split(`
`)){const K=document.createElement("div");K.append(Q?document.createTextNode(Q):document.createElement("br")),this.editorDiv.append(K)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(S,m){const O=super.deserialize(S,m);return mt(O,E,S.fontSize),mt(O,w,e.Util.makeHexColor(...S.color)),mt(O,L,S.value),O}serialize(){if(this.isEmpty())return null;const S=a._internalPadding*this.parent.scaleFactor,m=this.getRect(S,S),O=F.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:e.AnnotationEditorType.FREETEXT,color:O,fontSize:D(this,E),value:D(this,L),pageIndex:this.parent.pageIndex,rect:m,rotation:this.rotation}}};let M=a;x=new WeakMap,b=new WeakMap,p=new WeakMap,w=new WeakMap,L=new WeakMap,C=new WeakMap,E=new WeakMap,h=new WeakSet,Fe=function(S){const m=tt=>{this.editorDiv.style.fontSize=`calc(${tt}px * var(--scale-factor))`,this.translate(0,-(tt-D(this,E))*this.parent.scaleFactor),mt(this,E,tt),ht(this,c,fe).call(this)},O=D(this,E);this.parent.addCommands({cmd:()=>{m(S)},undo:()=>{m(O)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},s=new WeakSet,Me=function(S){const m=D(this,w);this.parent.addCommands({cmd:()=>{mt(this,w,S),this.editorDiv.style.color=S},undo:()=>{mt(this,w,m),this.editorDiv.style.color=m},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},v=new WeakSet,Oe=function(){const S=this.editorDiv.getElementsByTagName("div");if(S.length===0)return this.editorDiv.innerText;const m=[];for(let O=0,tt=S.length;O<tt;O++){const Q=S[O].firstChild;(Q==null?void 0:Q.nodeName)==="#text"?m.push(Q.data):m.push("")}return m.join(`
`)},c=new WeakSet,fe=function(){const[S,m]=this.parent.viewportBaseDimensions,O=this.div.getBoundingClientRect();this.width=O.width/S,this.height=O.height/m},Mt(M,"_freeTextDefaultContent",""),Mt(M,"_l10nPromise"),Mt(M,"_internalPadding",0),Mt(M,"_defaultColor",null),Mt(M,"_defaultFontSize",10),Mt(M,"_keyboardManager",new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.prototype.commitOrRemove]])),Mt(M,"_type","freetext"),n.FreeTextEditor=M},(T,n,y)=>{var p,w,L,C,E,h,t,s,l,v,A,c,r,a,g,De,S,Ie,O,Le,st,Ne,K,ge,$,je,nt,Ue,_t,Be,d,Ht,R,me,U,ee,Y,ne,o,Yt,_,ye,I,re,rt,_e,Z,We,et,qe,pt,Ge,dt,be,At,se,xt,Kt,kt,ve;Object.defineProperty(n,"__esModule",{value:!0}),n.InkEditor=void 0,Object.defineProperty(n,"fitCurve",{enumerable:!0,get:function(){return F.fitCurve}});var e=y(1),i=y(6),F=y(25),M=y(7);const x=16,Pt=class extends i.AnnotationEditor{constructor(it){super({...it,name:"inkEditor"});at(this,g);at(this,S);at(this,O);at(this,st);at(this,K);at(this,$);at(this,nt);at(this,_t);at(this,d);at(this,R);at(this,U);at(this,Y);at(this,o);at(this,_);at(this,I);at(this,Z);at(this,et);at(this,pt);at(this,dt);at(this,At);at(this,xt);at(this,kt);at(this,p,0);at(this,w,0);at(this,L,0);at(this,C,this.canvasPointermove.bind(this));at(this,E,this.canvasPointerleave.bind(this));at(this,h,this.canvasPointerup.bind(this));at(this,t,this.canvasPointerdown.bind(this));at(this,s,!1);at(this,l,!1);at(this,v,null);at(this,A,null);at(this,c,0);at(this,r,0);at(this,a,null);this.color=it.color||null,this.thickness=it.thickness||null,this.opacity=it.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(it){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(ft=>[ft,it.get(ft)]))}static updateDefaultParams(it,ft){switch(it){case e.AnnotationEditorParamsType.INK_THICKNESS:Pt._defaultThickness=ft;break;case e.AnnotationEditorParamsType.INK_COLOR:Pt._defaultColor=ft;break;case e.AnnotationEditorParamsType.INK_OPACITY:Pt._defaultOpacity=ft/100;break}}updateParams(it,ft){switch(it){case e.AnnotationEditorParamsType.INK_THICKNESS:ht(this,g,De).call(this,ft);break;case e.AnnotationEditorParamsType.INK_COLOR:ht(this,S,Ie).call(this,ft);break;case e.AnnotationEditorParamsType.INK_OPACITY:ht(this,O,Le).call(this,ft);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,Pt._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,Pt._defaultColor||i.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(Pt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Pt._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||Pt._defaultColor||i.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Pt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ht(this,U,ee).call(this),ht(this,Y,ne).call(this)),this.isAttachedToDOM||(this.parent.add(this),ht(this,o,Yt).call(this)),ht(this,xt,Kt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,D(this,A).disconnect(),mt(this,A,null),super.remove())}enableEditMode(){D(this,s)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",D(this,t)),this.canvas.addEventListener("pointerup",D(this,h)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",D(this,t)),this.canvas.removeEventListener("pointerup",D(this,h)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){D(this,s)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),mt(this,s,!0),this.div.classList.add("disabled"),ht(this,xt,Kt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(it){super.focusin(it),this.enableEditMode()}canvasPointerdown(it){it.button!==0||!this.isInEditMode()||D(this,s)||(this.setInForeground(),it.type!=="mouse"&&this.div.focus(),it.stopPropagation(),this.canvas.addEventListener("pointerleave",D(this,E)),this.canvas.addEventListener("pointermove",D(this,C)),ht(this,$,je).call(this,it.offsetX,it.offsetY))}canvasPointermove(it){it.stopPropagation(),ht(this,nt,Ue).call(this,it.offsetX,it.offsetY)}canvasPointerup(it){it.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(it.stopPropagation(),ht(this,R,me).call(this,it),this.setInBackground())}canvasPointerleave(it){ht(this,R,me).call(this,it),this.setInBackground()}render(){if(this.div)return this.div;let it,ft;this.width&&(it=this.x,ft=this.y),super.render(),Pt._l10nPromise.get("editor_ink_aria_label").then(yt=>{var vt;return(vt=this.div)==null?void 0:vt.setAttribute("aria-label",yt)});const[J,H,z,gt]=ht(this,st,Ne).call(this);if(this.setAt(J,H,0,0),this.setDims(z,gt),ht(this,U,ee).call(this),this.width){const[yt,vt]=this.parent.viewportBaseDimensions;this.setAt(it*yt,ft*vt,this.width*yt,this.height*vt),mt(this,l,!0),ht(this,o,Yt).call(this),this.setDims(this.width*yt,this.height*vt),ht(this,d,Ht).call(this),ht(this,kt,ve).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ht(this,Y,ne).call(this),this.div}setDimensions(it,ft){const J=Math.round(it),H=Math.round(ft);if(D(this,c)===J&&D(this,r)===H)return;mt(this,c,J),mt(this,r,H),this.canvas.style.visibility="hidden",D(this,p)&&Math.abs(D(this,p)-it/ft)>.01&&(ft=Math.ceil(it/D(this,p)),this.setDims(it,ft));const[z,gt]=this.parent.viewportBaseDimensions;this.width=it/z,this.height=ft/gt,D(this,s)&&ht(this,_,ye).call(this,it,ft),ht(this,o,Yt).call(this),ht(this,d,Ht).call(this),this.canvas.style.visibility="visible"}static deserialize(it,ft){var Dt,Rt;const J=super.deserialize(it,ft);J.thickness=it.thickness,J.color=e.Util.makeHexColor(...it.color),J.opacity=it.opacity;const[H,z]=ft.pageDimensions,gt=J.width*H,yt=J.height*z,vt=ft.scaleFactor,St=it.thickness/2;mt(J,p,gt/yt),mt(J,s,!0),mt(J,c,Math.round(gt)),mt(J,r,Math.round(yt));for(const{bezier:Tt}of it.paths){const Lt=[];J.paths.push(Lt);let It=vt*(Tt[0]-St),Ut=vt*(yt-Tt[1]-St);for(let Nt=2,Wt=Tt.length;Nt<Wt;Nt+=6){const $t=vt*(Tt[Nt]-St),Vt=vt*(yt-Tt[Nt+1]-St),Gt=vt*(Tt[Nt+2]-St),jt=vt*(yt-Tt[Nt+3]-St),qt=vt*(Tt[Nt+4]-St),Xt=vt*(yt-Tt[Nt+5]-St);Lt.push([[It,Ut],[$t,Vt],[Gt,jt],[qt,Xt]]),It=qt,Ut=Xt}const wt=ht(this,rt,_e).call(this,Lt);J.bezierPath2D.push(wt)}const Ct=ht(Dt=J,dt,be).call(Dt);return mt(J,L,Math.max(x,Ct[2]-Ct[0])),mt(J,w,Math.max(x,Ct[3]-Ct[1])),ht(Rt=J,_,ye).call(Rt,gt,yt),J}serialize(){if(this.isEmpty())return null;const it=this.getRect(0,0),ft=this.rotation%180===0?it[3]-it[1]:it[2]-it[0],J=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:J,thickness:this.thickness,opacity:this.opacity,paths:ht(this,Z,We).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,ft),pageIndex:this.parent.pageIndex,rect:it,rotation:this.rotation}}};let b=Pt;p=new WeakMap,w=new WeakMap,L=new WeakMap,C=new WeakMap,E=new WeakMap,h=new WeakMap,t=new WeakMap,s=new WeakMap,l=new WeakMap,v=new WeakMap,A=new WeakMap,c=new WeakMap,r=new WeakMap,a=new WeakMap,g=new WeakSet,De=function(it){const ft=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=it,ht(this,xt,Kt).call(this)},undo:()=>{this.thickness=ft,ht(this,xt,Kt).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,Ie=function(it){const ft=this.color;this.parent.addCommands({cmd:()=>{this.color=it,ht(this,d,Ht).call(this)},undo:()=>{this.color=ft,ht(this,d,Ht).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},O=new WeakSet,Le=function(it){it/=100;const ft=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=it,ht(this,d,Ht).call(this)},undo:()=>{this.opacity=ft,ht(this,d,Ht).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},st=new WeakSet,Ne=function(){const{width:it,height:ft,rotation:J}=this.parent.viewport;switch(J){case 90:return[0,it,it,ft];case 180:return[it,ft,it,ft];case 270:return[ft,0,it,ft];default:return[0,0,it,ft]}},K=new WeakSet,ge=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,M.opacityToHex)(this.opacity)}`},$=new WeakSet,je=function(it,ft){this.isEditing=!0,D(this,l)||(mt(this,l,!0),ht(this,o,Yt).call(this),this.thickness||(this.thickness=Pt._defaultThickness),this.color||(this.color=Pt._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Pt._defaultOpacity)),this.currentPath.push([it,ft]),mt(this,v,null),ht(this,K,ge).call(this),this.ctx.beginPath(),this.ctx.moveTo(it,ft),mt(this,a,()=>{D(this,a)&&(D(this,v)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ht(this,d,Ht).call(this),this.ctx.lineTo(...D(this,v)),mt(this,v,null),this.ctx.stroke()),window.requestAnimationFrame(D(this,a)))}),window.requestAnimationFrame(D(this,a))},nt=new WeakSet,Ue=function(it,ft){const[J,H]=this.currentPath.at(-1);it===J&&ft===H||(this.currentPath.push([it,ft]),mt(this,v,[it,ft]))},_t=new WeakSet,Be=function(it,ft){var St;this.ctx.closePath(),mt(this,a,null),it=Math.min(Math.max(it,0),this.canvas.width),ft=Math.min(Math.max(ft,0),this.canvas.height);const[J,H]=this.currentPath.at(-1);(it!==J||ft!==H)&&this.currentPath.push([it,ft]);let z;if(this.currentPath.length!==1)z=(0,F.fitCurve)(this.currentPath,30,null);else{const Ct=[it,ft];z=[[Ct,Ct.slice(),Ct.slice(),Ct]]}const gt=ht(St=Pt,rt,_e).call(St,z);this.currentPath.length=0;const yt=()=>{this.paths.push(z),this.bezierPath2D.push(gt),this.rebuild()},vt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ht(this,U,ee).call(this),ht(this,Y,ne).call(this)),ht(this,xt,Kt).call(this))};this.parent.addCommands({cmd:yt,undo:vt,mustExec:!0})},d=new WeakSet,Ht=function(){if(this.isEmpty()){ht(this,I,re).call(this);return}ht(this,K,ge).call(this);const{canvas:it,ctx:ft}=this;ft.setTransform(1,0,0,1,0,0),ft.clearRect(0,0,it.width,it.height),ht(this,I,re).call(this);for(const J of this.bezierPath2D)ft.stroke(J)},R=new WeakSet,me=function(it){ht(this,_t,Be).call(this,it.offsetX,it.offsetY),this.canvas.removeEventListener("pointerleave",D(this,E)),this.canvas.removeEventListener("pointermove",D(this,C)),this.parent.addToAnnotationStorage(this)},U=new WeakSet,ee=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Pt._l10nPromise.get("editor_ink_canvas_aria_label").then(it=>{var ft;return(ft=this.canvas)==null?void 0:ft.setAttribute("aria-label",it)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Y=new WeakSet,ne=function(){mt(this,A,new ResizeObserver(it=>{const ft=it[0].contentRect;ft.width&&ft.height&&this.setDimensions(ft.width,ft.height)})),D(this,A).observe(this.div)},o=new WeakSet,Yt=function(){if(!D(this,l))return;const[it,ft]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*it),this.canvas.height=Math.ceil(this.height*ft),ht(this,I,re).call(this)},_=new WeakSet,ye=function(it,ft){const J=ht(this,At,se).call(this),H=(it-J)/D(this,L),z=(ft-J)/D(this,w);this.scaleFactor=Math.min(H,z)},I=new WeakSet,re=function(){const it=ht(this,At,se).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+it,this.translationY*this.scaleFactor+it)},rt=new WeakSet,_e=function(it){const ft=new Path2D;for(let J=0,H=it.length;J<H;J++){const[z,gt,yt,vt]=it[J];J===0&&ft.moveTo(...z),ft.bezierCurveTo(gt[0],gt[1],yt[0],yt[1],vt[0],vt[1])}return ft},Z=new WeakSet,We=function(it,ft,J,H){const gt=[],yt=this.thickness/2;let vt,St;for(const Ct of this.paths){vt=[],St=[];for(let Dt=0,Rt=Ct.length;Dt<Rt;Dt++){const[Tt,Lt,It,Ut]=Ct[Dt],wt=it*(Tt[0]+ft)+yt,Nt=H-it*(Tt[1]+J)-yt,Wt=it*(Lt[0]+ft)+yt,$t=H-it*(Lt[1]+J)-yt,Vt=it*(It[0]+ft)+yt,Gt=H-it*(It[1]+J)-yt,jt=it*(Ut[0]+ft)+yt,qt=H-it*(Ut[1]+J)-yt;Dt===0&&(vt.push(wt,Nt),St.push(wt,Nt)),vt.push(Wt,$t,Vt,Gt,jt,qt),ht(this,et,qe).call(this,wt,Nt,Wt,$t,Vt,Gt,jt,qt,4,St)}gt.push({bezier:vt,points:St})}return gt},et=new WeakSet,qe=function(it,ft,J,H,z,gt,yt,vt,St,Ct){if(ht(this,pt,Ge).call(this,it,ft,J,H,z,gt,yt,vt)){Ct.push(yt,vt);return}for(let Dt=1;Dt<St-1;Dt++){const Rt=Dt/St,Tt=1-Rt;let Lt=Rt*it+Tt*J,It=Rt*ft+Tt*H,Ut=Rt*J+Tt*z,wt=Rt*H+Tt*gt;const Nt=Rt*z+Tt*yt,Wt=Rt*gt+Tt*vt;Lt=Rt*Lt+Tt*Ut,It=Rt*It+Tt*wt,Ut=Rt*Ut+Tt*Nt,wt=Rt*wt+Tt*Wt,Lt=Rt*Lt+Tt*Ut,It=Rt*It+Tt*wt,Ct.push(Lt,It)}Ct.push(yt,vt)},pt=new WeakSet,Ge=function(it,ft,J,H,z,gt,yt,vt){const Ct=(3*J-2*it-yt)**2,Dt=(3*H-2*ft-vt)**2,Rt=(3*z-it-2*yt)**2,Tt=(3*gt-ft-2*vt)**2;return Math.max(Ct,Rt)+Math.max(Dt,Tt)<=10},dt=new WeakSet,be=function(){let it=1/0,ft=-1/0,J=1/0,H=-1/0;for(const z of this.paths)for(const[gt,yt,vt,St]of z){const Ct=e.Util.bezierBoundingBox(...gt,...yt,...vt,...St);it=Math.min(it,Ct[0]),J=Math.min(J,Ct[1]),ft=Math.max(ft,Ct[2]),H=Math.max(H,Ct[3])}return[it,J,ft,H]},At=new WeakSet,se=function(){return D(this,s)?Math.ceil(this.thickness*this.parent.scaleFactor):0},xt=new WeakSet,Kt=function(it=!1){if(this.isEmpty())return;if(!D(this,s)){ht(this,d,Ht).call(this);return}const ft=ht(this,dt,be).call(this),J=ht(this,At,se).call(this);mt(this,L,Math.max(x,ft[2]-ft[0])),mt(this,w,Math.max(x,ft[3]-ft[1]));const H=Math.ceil(J+D(this,L)*this.scaleFactor),z=Math.ceil(J+D(this,w)*this.scaleFactor),[gt,yt]=this.parent.viewportBaseDimensions;this.width=H/gt,this.height=z/yt,mt(this,p,H/z),ht(this,kt,ve).call(this);const vt=this.translationX,St=this.translationY;this.translationX=-ft[0],this.translationY=-ft[1],ht(this,o,Yt).call(this),ht(this,d,Ht).call(this),mt(this,c,H),mt(this,r,z),this.setDims(H,z);const Ct=it?J/this.scaleFactor/2:0;this.translate(vt-this.translationX-Ct,St-this.translationY-Ct)},kt=new WeakSet,ve=function(){const{style:it}=this.div;D(this,p)>=1?(it.minHeight=`${x}px`,it.minWidth=`${Math.round(D(this,p)*x)}px`):(it.minWidth=`${x}px`,it.minHeight=`${Math.round(x/D(this,p))}px`)},at(b,rt),Mt(b,"_defaultColor",null),Mt(b,"_defaultOpacity",1),Mt(b,"_defaultThickness",1),Mt(b,"_l10nPromise"),Mt(b,"_type","ink"),n.InkEditor=b},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.fitCurve=void 0;const e=y(26);n.fitCurve=e},T=>{function n(h,t,s){if(!Array.isArray(h))throw new TypeError("First argument should be an array");if(h.forEach(c=>{if(!Array.isArray(c)||c.some(r=>typeof r!="number")||c.length!==h[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),h=h.filter((c,r)=>r===0||!c.every((a,g)=>a===h[r-1][g])),h.length<2)return[];const l=h.length,v=L(h[1],h[0]),A=L(h[l-2],h[l-1]);return y(h,v,A,t,s)}function y(h,t,s,l,v){var c,r,a,g,k,S,m,O,tt,st,Q,K,G;if(h.length===2)return K=C.vectorLen(C.subtract(h[0],h[1]))/3,c=[h[0],C.addArrays(h[0],C.mulItems(t,K)),C.addArrays(h[1],C.mulItems(s,K)),h[1]],[c];if(r=x(h),[c,g,S]=e(h,r,r,t,s,v),g===0||g<l)return[c];if(g<l*l)for(a=r,k=g,m=S,G=0;G<20;G++){if(a=F(c,h,a),[c,g,S]=e(h,r,a,t,s,v),g<l)return[c];if(S===m){let $=g/k;if($>.9999&&$<1.0001)break}k=g,m=S}return Q=[],O=C.subtract(h[S-1],h[S+1]),O.every($=>$===0)&&(O=C.subtract(h[S-1],h[S]),[O[0],O[1]]=[-O[1],O[0]]),tt=C.normalize(O),st=C.mulItems(tt,-1),Q=Q.concat(y(h.slice(0,S+1),t,tt,l,v)),Q=Q.concat(y(h.slice(S),st,s,l,v)),Q}function e(h,t,s,l,v,A){var c,r,a;return c=i(h,s,l,v),[r,a]=b(h,c,t),A&&A({bez:c,points:h,params:t,maxErr:r,maxPoint:a}),[c,r,a]}function i(h,t,s,l){var v,A,c,r,a,g,k,S,m,O,tt,st,Q,K,G,$,X,nt=h[0],lt=h[h.length-1];for(v=[nt,null,null,lt],A=C.zeros_Xx2x2(t.length),Q=0,K=t.length;Q<K;Q++)$=t[Q],X=1-$,c=A[Q],c[0]=C.mulItems(s,3*$*(X*X)),c[1]=C.mulItems(l,3*X*($*$));for(r=[[0,0],[0,0]],a=[0,0],Q=0,K=h.length;Q<K;Q++)$=t[Q],c=A[Q],r[0][0]+=C.dot(c[0],c[0]),r[0][1]+=C.dot(c[0],c[1]),r[1][0]+=C.dot(c[0],c[1]),r[1][1]+=C.dot(c[1],c[1]),G=C.subtract(h[Q],E.q([nt,nt,lt,lt],$)),a[0]+=C.dot(c[0],G),a[1]+=C.dot(c[1],G);return g=r[0][0]*r[1][1]-r[1][0]*r[0][1],k=r[0][0]*a[1]-r[1][0]*a[0],S=a[0]*r[1][1]-a[1]*r[0][1],m=g===0?0:S/g,O=g===0?0:k/g,st=C.vectorLen(C.subtract(nt,lt)),tt=1e-6*st,m<tt||O<tt?(v[1]=C.addArrays(nt,C.mulItems(s,st/3)),v[2]=C.addArrays(lt,C.mulItems(l,st/3))):(v[1]=C.addArrays(nt,C.mulItems(s,m)),v[2]=C.addArrays(lt,C.mulItems(l,O))),v}function F(h,t,s){return s.map((l,v)=>M(h,t[v],l))}function M(h,t,s){var l=C.subtract(E.q(h,s),t),v=E.qprime(h,s),A=C.mulMatrix(l,v),c=C.sum(C.squareItems(v))+2*C.mulMatrix(l,E.qprimeprime(h,s));return c===0?s:s-A/c}function x(h){var t=[],s,l,v;return h.forEach((A,c)=>{s=c?l+C.vectorLen(C.subtract(A,v)):0,t.push(s),l=s,v=A}),t=t.map(A=>A/l),t}function b(h,t,s){var l,v,A,c,r,a,g,k;v=0,A=Math.floor(h.length/2);const S=p(t,10);for(r=0,a=h.length;r<a;r++)g=h[r],k=w(t,s[r],S,10),c=C.subtract(E.q(t,k),g),l=c[0]*c[0]+c[1]*c[1],l>v&&(v=l,A=r);return[v,A]}var p=function(h,t){for(var s,l=[0],v=h[0],A=0,c=1;c<=t;c++)s=E.q(h,c/t),A+=C.vectorLen(C.subtract(s,v)),l.push(A),v=s;return l=l.map(r=>r/A),l};function w(h,t,s,l){if(t<0)return 0;if(t>1)return 1;for(var v,A,c,r,a,g=1;g<=l;g++)if(t<=s[g]){r=(g-1)/l,c=g/l,A=s[g-1],v=s[g],a=(t-A)/(v-A)*(c-r)+r;break}return a}function L(h,t){return C.normalize(C.subtract(h,t))}class C{static zeros_Xx2x2(t){for(var s=[];t--;)s.push([0,0]);return s}static mulItems(t,s){return t.map(l=>l*s)}static mulMatrix(t,s){return t.reduce((l,v,A)=>l+v*s[A],0)}static subtract(t,s){return t.map((l,v)=>l-s[v])}static addArrays(t,s){return t.map((l,v)=>l+s[v])}static addItems(t,s){return t.map(l=>l+s)}static sum(t){return t.reduce((s,l)=>s+l)}static dot(t,s){return C.mulMatrix(t,s)}static vectorLen(t){return Math.hypot(...t)}static divItems(t,s){return t.map(l=>l/s)}static squareItems(t){return t.map(s=>s*s)}static normalize(t){return this.divItems(t,this.vectorLen(t))}}class E{static q(t,s){var l=1-s,v=C.mulItems(t[0],l*l*l),A=C.mulItems(t[1],3*l*l*s),c=C.mulItems(t[2],3*l*s*s),r=C.mulItems(t[3],s*s*s);return C.addArrays(C.addArrays(v,A),C.addArrays(c,r))}static qprime(t,s){var l=1-s,v=C.mulItems(C.subtract(t[1],t[0]),3*l*l),A=C.mulItems(C.subtract(t[2],t[1]),6*l*s),c=C.mulItems(C.subtract(t[3],t[2]),3*s*s);return C.addArrays(C.addArrays(v,A),c)}static qprimeprime(t,s){return C.addArrays(C.mulItems(C.addArrays(C.subtract(t[2],C.mulItems(t[1],2)),t[0]),6*(1-s)),C.mulItems(C.addArrays(C.subtract(t[3],C.mulItems(t[2],2)),t[1]),6*s))}}T.exports=n,T.exports.fitCubic=y,T.exports.createTangent=L},(T,n,y)=>{var d,Ae,R,Se,U,Ee;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationLayer=void 0;var e=y(1),i=y(8),F=y(5),M=y(28),x=y(29);const b=1e3,p=9,w=new WeakSet;function L(V){return{width:V[2]-V[0],height:V[3]-V[1]}}class C{static create(o){switch(o.data.annotationType){case e.AnnotationType.LINK:return new h(o);case e.AnnotationType.TEXT:return new t(o);case e.AnnotationType.WIDGET:switch(o.data.fieldType){case"Tx":return new l(o);case"Btn":return o.data.radioButton?new A(o):o.data.checkBox?new v(o):new c(o);case"Ch":return new r(o)}return new s(o);case e.AnnotationType.POPUP:return new a(o);case e.AnnotationType.FREETEXT:return new k(o);case e.AnnotationType.LINE:return new S(o);case e.AnnotationType.SQUARE:return new m(o);case e.AnnotationType.CIRCLE:return new O(o);case e.AnnotationType.POLYLINE:return new tt(o);case e.AnnotationType.CARET:return new Q(o);case e.AnnotationType.INK:return new K(o);case e.AnnotationType.POLYGON:return new st(o);case e.AnnotationType.HIGHLIGHT:return new G(o);case e.AnnotationType.UNDERLINE:return new $(o);case e.AnnotationType.SQUIGGLY:return new X(o);case e.AnnotationType.STRIKEOUT:return new nt(o);case e.AnnotationType.STAMP:return new lt(o);case e.AnnotationType.FILEATTACHMENT:return new _t(o);default:return new E(o)}}}class E{constructor(o,{isRenderable:f=!1,ignoreBorder:_=!1,createQuadrilaterals:P=!1}={}){this.isRenderable=f,this.data=o.data,this.layer=o.layer,this.page=o.page,this.viewport=o.viewport,this.linkService=o.linkService,this.downloadManager=o.downloadManager,this.imageResourcesPath=o.imageResourcesPath,this.renderForms=o.renderForms,this.svgFactory=o.svgFactory,this.annotationStorage=o.annotationStorage,this.enableScripting=o.enableScripting,this.hasJSActions=o.hasJSActions,this._fieldObjects=o.fieldObjects,this._mouseState=o.mouseState,f&&(this.container=this._createContainer(_)),P&&(this.quadrilaterals=this._createQuadrilaterals(_))}_createContainer(o=!1){const f=this.data,_=this.page,P=this.viewport,I=document.createElement("section"),{width:q,height:rt}=L(f.rect),[ut,Z,ot,et]=P.viewBox,ct=ot-ut,pt=et-Z;I.setAttribute("data-annotation-id",f.id);const N=e.Util.normalizeRect([f.rect[0],_.view[3]-f.rect[1]+_.view[1],f.rect[2],_.view[3]-f.rect[3]+_.view[1]]);if(!o&&f.borderStyle.width>0){I.style.borderWidth=`${f.borderStyle.width}px`;const bt=f.borderStyle.horizontalCornerRadius,At=f.borderStyle.verticalCornerRadius;if(bt>0||At>0){const xt=`calc(${bt}px * var(--scale-factor)) / calc(${At}px * var(--scale-factor))`;I.style.borderRadius=xt}else if(this instanceof A){const xt=`calc(${q}px * var(--scale-factor)) / calc(${rt}px * var(--scale-factor))`;I.style.borderRadius=xt}switch(f.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:I.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:I.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:I.style.borderBottomStyle="solid";break}const Et=f.borderColor||null;Et?I.style.borderColor=e.Util.makeHexColor(Et[0]|0,Et[1]|0,Et[2]|0):I.style.borderWidth=0}I.style.left=`${100*(N[0]-ut)/ct}%`,I.style.top=`${100*(N[1]-Z)/pt}%`;const{rotation:dt}=f;return f.hasOwnCanvas||dt===0?(I.style.width=`${100*q/ct}%`,I.style.height=`${100*rt/pt}%`):this.setRotation(dt,I),I}setRotation(o,f=this.container){const[_,P,I,q]=this.viewport.viewBox,rt=I-_,ut=q-P,{width:Z,height:ot}=L(this.data.rect);let et,ct;o%180===0?(et=100*Z/rt,ct=100*ot/ut):(et=100*ot/rt,ct=100*Z/ut),f.style.width=`${et}%`,f.style.height=`${ct}%`,f.setAttribute("data-main-rotation",(360-o)%360)}get _commonActions(){const o=(f,_,P)=>{const I=P.detail[f];P.target.style[_]=M.ColorConverters[`${I[0]}_HTML`](I.slice(1))};return(0,e.shadow)(this,"_commonActions",{display:f=>{const _=f.detail.display%2===1;this.container.style.visibility=_?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:_,print:f.detail.display===0||f.detail.display===3})},print:f=>{this.annotationStorage.setValue(this.data.id,{print:f.detail.print})},hidden:f=>{this.container.style.visibility=f.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:f.detail.hidden})},focus:f=>{setTimeout(()=>f.target.focus({preventScroll:!1}),0)},userName:f=>{f.target.title=f.detail.userName},readonly:f=>{f.detail.readonly?f.target.setAttribute("readonly",""):f.target.removeAttribute("readonly")},required:f=>{this._setRequired(f.target,f.detail.required)},bgColor:f=>{o("bgColor","backgroundColor",f)},fillColor:f=>{o("fillColor","backgroundColor",f)},fgColor:f=>{o("fgColor","color",f)},textColor:f=>{o("textColor","color",f)},borderColor:f=>{o("borderColor","borderColor",f)},strokeColor:f=>{o("strokeColor","borderColor",f)},rotation:f=>{const _=f.detail.rotation;this.setRotation(_),this.annotationStorage.setValue(this.data.id,{rotation:_})}})}_dispatchEventFromSandbox(o,f){const _=this._commonActions;for(const P of Object.keys(f.detail)){const I=o[P]||_[P];I&&I(f)}}_setDefaultPropertiesFromJS(o){if(!this.enableScripting)return;const f=this.annotationStorage.getRawValue(this.data.id);if(!f)return;const _=this._commonActions;for(const[P,I]of Object.entries(f)){const q=_[P];if(q){const rt={detail:{[P]:I},target:o};q(rt),delete f[P]}}}_createQuadrilaterals(o=!1){if(!this.data.quadPoints)return null;const f=[],_=this.data.rect;for(const P of this.data.quadPoints)this.data.rect=[P[2].x,P[2].y,P[1].x,P[1].y],f.push(this._createContainer(o));return this.data.rect=_,f}_createPopup(o,f){let _=this.container;this.quadrilaterals&&(o=o||this.quadrilaterals,_=this.quadrilaterals[0]),o||(o=document.createElement("div"),o.className="popupTriggerArea",_.append(o));const I=new g({container:_,trigger:o,color:f.color,titleObj:f.titleObj,modificationDate:f.modificationDate,contentsObj:f.contentsObj,richText:f.richText,hideWrapper:!0}).render();I.style.left="100%",_.append(I)}_renderQuadrilaterals(o){for(const f of this.quadrilaterals)f.className=o;return this.quadrilaterals}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(o,f=null){const _=[];if(this._fieldObjects){const P=this._fieldObjects[o];if(P)for(const{page:I,id:q,exportValues:rt}of P){if(I===-1||q===f)continue;const ut=typeof rt=="string"?rt:null,Z=document.querySelector(`[data-element-id="${q}"]`);if(Z&&!w.has(Z)){(0,e.warn)(`_getElementsByName - element not allowed: ${q}`);continue}_.push({id:q,exportValue:ut,domElement:Z})}return _}for(const P of document.getElementsByName(o)){const{id:I,exportValue:q}=P;I!==f&&w.has(P)&&_.push({id:I,exportValue:q,domElement:P})}return _}static get platform(){const o=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:o.includes("Win"),isMac:o.includes("Mac")})}}class h extends E{constructor(o,f=null){super(o,{isRenderable:!0,ignoreBorder:!!(f!=null&&f.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=o.data.isTooltipOnly}render(){const{data:o,linkService:f}=this,_=document.createElement("a");_.setAttribute("data-element-id",o.id);let P=!1;return o.url?(f.addLinkAttributes(_,o.url,o.newWindow),P=!0):o.action?(this._bindNamedAction(_,o.action),P=!0):o.dest?(this._bindLink(_,o.dest),P=!0):(o.actions&&(o.actions.Action||o.actions["Mouse Up"]||o.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(_,o),P=!0),o.resetForm?(this._bindResetFormAction(_,o.resetForm),P=!0):this.isTooltipOnly&&!P&&(this._bindLink(_,""),P=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((I,q)=>{const rt=q===0?_:_.cloneNode();return I.append(rt),I}):(this.container.className="linkAnnotation",P&&this.container.append(_),this.container)}_bindLink(o,f){o.href=this.linkService.getDestinationHash(f),o.onclick=()=>(f&&this.linkService.goToDestination(f),!1),(f||f==="")&&(o.className="internalLink")}_bindNamedAction(o,f){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeNamedAction(f),!1),o.className="internalLink"}_bindJSAction(o,f){o.href=this.linkService.getAnchorUrl("");const _=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const P of Object.keys(f.actions)){const I=_.get(P);I&&(o[I]=()=>{var q;return(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f.id,name:P}}),!1})}o.onclick||(o.onclick=()=>!1),o.className="internalLink"}_bindResetFormAction(o,f){const _=o.onclick;if(_||(o.href=this.linkService.getAnchorUrl("")),o.className="internalLink",!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),_||(o.onclick=()=>!1);return}o.onclick=()=>{var ot;_&&_();const{fields:P,refs:I,include:q}=f,rt=[];if(P.length!==0||I.length!==0){const et=new Set(I);for(const ct of P){const pt=this._fieldObjects[ct]||[];for(const{id:N}of pt)et.add(N)}for(const ct of Object.values(this._fieldObjects))for(const pt of ct)et.has(pt.id)===q&&rt.push(pt)}else for(const et of Object.values(this._fieldObjects))rt.push(...et);const ut=this.annotationStorage,Z=[];for(const et of rt){const{id:ct}=et;switch(Z.push(ct),et.type){case"text":{const N=et.defaultValue||"";ut.setValue(ct,{value:N});break}case"checkbox":case"radiobutton":{const N=et.defaultValue===et.exportValues;ut.setValue(ct,{value:N});break}case"combobox":case"listbox":{const N=et.defaultValue||"";ut.setValue(ct,{value:N});break}default:continue}const pt=document.querySelector(`[data-element-id="${ct}"]`);if(pt){if(!w.has(pt)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${ct}`);continue}}else continue;pt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Z,name:"ResetForm"}})),!1}}}class t extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f})}render(){this.container.className="textAnnotation";const o=document.createElement("img");return o.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",o.alt="[{{type}} Annotation]",o.dataset.l10nId="text_annotation_type",o.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(o,this.data),this.container.append(o),this.container}}class s extends E{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(o){const{isWin:f,isMac:_}=E.platform;return f&&o.ctrlKey||_&&o.metaKey}_setEventListener(o,f,_,P){f.includes("mouse")?o.addEventListener(f,I=>{var q;(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:P(I),shift:I.shiftKey,modifier:this._getKeyModifier(I)}})}):o.addEventListener(f,I=>{var q;(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:P(I)}})})}_setEventListeners(o,f,_){var P;for(const[I,q]of f)(q==="Action"||(P=this.data.actions)!=null&&P[q])&&this._setEventListener(o,I,q,_)}_setBackgroundColor(o){const f=this.data.backgroundColor||null;o.style.backgroundColor=f===null?"transparent":e.Util.makeHexColor(f[0],f[1],f[2])}_setTextStyle(o){const f=["left","center","right"],{fontColor:_}=this.data.defaultAppearanceData,P=this.data.defaultAppearanceData.fontSize||p,I=o.style;let q;if(this.data.multiLine){const rt=Math.abs(this.data.rect[3]-this.data.rect[1]),ut=Math.round(rt/(e.LINE_FACTOR*P))||1,Z=rt/ut;q=Math.min(P,Math.round(Z/e.LINE_FACTOR))}else{const rt=Math.abs(this.data.rect[3]-this.data.rect[1]);q=Math.min(P,Math.round(rt/e.LINE_FACTOR))}I.fontSize=`calc(${q}px * var(--scale-factor))`,I.color=e.Util.makeHexColor(_[0],_[1],_[2]),this.data.textAlignment!==null&&(I.textAlign=f[this.data.textAlignment])}_setRequired(o,f){f?o.setAttribute("required",!0):o.removeAttribute("required"),o.setAttribute("aria-required",f)}}class l extends s{constructor(o){const f=o.renderForms||!o.data.hasAppearance&&!!o.data.fieldValue;super(o,{isRenderable:f})}setPropertyOnSiblings(o,f,_,P){const I=this.annotationStorage;for(const q of this._getElementsByName(o.name,o.id))q.domElement&&(q.domElement[f]=_),I.setValue(q.id,{[P]:_})}render(){var P;const o=this.annotationStorage,f=this.data.id;this.container.className="textWidgetAnnotation";let _=null;if(this.renderForms){const I=o.getValue(f,{value:this.data.fieldValue});let q=I.formattedValue||I.value||"";const rt=o.getValue(f,{charLimit:this.data.maxLen}).charLimit;rt&&q.length>rt&&(q=q.slice(0,rt));const ut={userValue:q,formattedValue:null,valueOnFocus:""};this.data.multiLine?(_=document.createElement("textarea"),_.textContent=q,this.data.doNotScroll&&(_.style.overflowY="hidden")):(_=document.createElement("input"),_.type="text",_.setAttribute("value",q),this.data.doNotScroll&&(_.style.overflowX="hidden")),w.add(_),_.setAttribute("data-element-id",f),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=b,this._setRequired(_,this.data.required),rt&&(_.maxLength=rt),_.addEventListener("input",ot=>{o.setValue(f,{value:ot.target.value}),this.setPropertyOnSiblings(_,"value",ot.target.value,"value")}),_.addEventListener("resetform",ot=>{const et=this.data.defaultFieldValue??"";_.value=ut.userValue=et,ut.formattedValue=null});let Z=ot=>{const{formattedValue:et}=ut;et!=null&&(ot.target.value=et),ot.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",et=>{ut.userValue&&(et.target.value=ut.userValue),ut.valueOnFocus=et.target.value}),_.addEventListener("updatefromsandbox",et=>{const ct={value(pt){ut.userValue=pt.detail.value??"",o.setValue(f,{value:ut.userValue.toString()}),pt.target.value=ut.userValue},formattedValue(pt){const{formattedValue:N}=pt.detail;ut.formattedValue=N,N!=null&&pt.target!==document.activeElement&&(pt.target.value=N),o.setValue(f,{formattedValue:N})},selRange(pt){pt.target.setSelectionRange(...pt.detail.selRange)},charLimit:pt=>{var At;const{charLimit:N}=pt.detail,{target:dt}=pt;if(N===0){dt.removeAttribute("maxLength");return}dt.setAttribute("maxLength",N);let bt=ut.userValue;!bt||bt.length<=N||(bt=bt.slice(0,N),dt.value=ut.userValue=bt,o.setValue(f,{value:bt}),(At=this.linkService.eventBus)==null||At.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f,name:"Keystroke",value:bt,willCommit:!0,commitKey:1,selStart:dt.selectionStart,selEnd:dt.selectionEnd}}))}};this._dispatchEventFromSandbox(ct,et)}),_.addEventListener("keydown",et=>{var N;let ct=-1;if(et.key==="Escape"?ct=0:et.key==="Enter"?ct=2:et.key==="Tab"&&(ct=3),ct===-1)return;const{value:pt}=et.target;ut.valueOnFocus!==pt&&(ut.userValue=pt,(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f,name:"Keystroke",value:pt,willCommit:!0,commitKey:ct,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}}))});const ot=Z;Z=null,_.addEventListener("blur",et=>{var pt;const{value:ct}=et.target;ut.userValue=ct,this._mouseState.isDown&&ut.valueOnFocus!==ct&&((pt=this.linkService.eventBus)==null||pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f,name:"Keystroke",value:ct,willCommit:!0,commitKey:1,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}})),ot(et)}),(P=this.data.actions)!=null&&P.Keystroke&&_.addEventListener("beforeinput",et=>{var xt;const{data:ct,target:pt}=et,{value:N,selectionStart:dt,selectionEnd:bt}=pt;let At=dt,Et=bt;switch(et.inputType){case"deleteWordBackward":{const Ft=N.substring(0,dt).match(/\w*[^\w]*$/);Ft&&(At-=Ft[0].length);break}case"deleteWordForward":{const Ft=N.substring(dt).match(/^[^\w]*\w*/);Ft&&(Et+=Ft[0].length);break}case"deleteContentBackward":dt===bt&&(At-=1);break;case"deleteContentForward":dt===bt&&(Et+=1);break}et.preventDefault(),(xt=this.linkService.eventBus)==null||xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f,name:"Keystroke",value:N,change:ct||"",willCommit:!1,selStart:At,selEnd:Et}})}),this._setEventListeners(_,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],et=>et.target.value)}if(Z&&_.addEventListener("blur",Z),this.data.comb){const et=(this.data.rect[2]-this.data.rect[0])/rt;_.classList.add("comb"),_.style.letterSpacing=`calc(${et}px * var(--scale-factor) - 1ch)`}}else _=document.createElement("div"),_.textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell";return this._setTextStyle(_),this._setBackgroundColor(_),this._setDefaultPropertiesFromJS(_),this.container.append(_),this.container}}class v extends s{constructor(o){super(o,{isRenderable:o.renderForms})}render(){const o=this.annotationStorage,f=this.data,_=f.id;let P=o.getValue(_,{value:f.exportValue===f.fieldValue}).value;typeof P=="string"&&(P=P!=="Off",o.setValue(_,{value:P})),this.container.className="buttonWidgetAnnotation checkBox";const I=document.createElement("input");return w.add(I),I.setAttribute("data-element-id",_),I.disabled=f.readOnly,this._setRequired(I,this.data.required),I.type="checkbox",I.name=f.fieldName,P&&I.setAttribute("checked",!0),I.setAttribute("exportValue",f.exportValue),I.tabIndex=b,I.addEventListener("change",q=>{const{name:rt,checked:ut}=q.target;for(const Z of this._getElementsByName(rt,_)){const ot=ut&&Z.exportValue===f.exportValue;Z.domElement&&(Z.domElement.checked=ot),o.setValue(Z.id,{value:ot})}o.setValue(_,{value:ut})}),I.addEventListener("resetform",q=>{const rt=f.defaultFieldValue||"Off";q.target.checked=rt===f.exportValue}),this.enableScripting&&this.hasJSActions&&(I.addEventListener("updatefromsandbox",q=>{const rt={value(ut){ut.target.checked=ut.detail.value!=="Off",o.setValue(_,{value:ut.target.checked})}};this._dispatchEventFromSandbox(rt,q)}),this._setEventListeners(I,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],q=>q.target.checked)),this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}class A extends s{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const o=this.annotationStorage,f=this.data,_=f.id;let P=o.getValue(_,{value:f.fieldValue===f.buttonValue}).value;typeof P=="string"&&(P=P!==f.buttonValue,o.setValue(_,{value:P}));const I=document.createElement("input");if(w.add(I),I.setAttribute("data-element-id",_),I.disabled=f.readOnly,this._setRequired(I,this.data.required),I.type="radio",I.name=f.fieldName,P&&I.setAttribute("checked",!0),I.tabIndex=b,I.addEventListener("change",q=>{const{name:rt,checked:ut}=q.target;for(const Z of this._getElementsByName(rt,_))o.setValue(Z.id,{value:!1});o.setValue(_,{value:ut})}),I.addEventListener("resetform",q=>{const rt=f.defaultFieldValue;q.target.checked=rt!=null&&rt===f.buttonValue}),this.enableScripting&&this.hasJSActions){const q=f.buttonValue;I.addEventListener("updatefromsandbox",rt=>{const ut={value:Z=>{const ot=q===Z.detail.value;for(const et of this._getElementsByName(Z.target.name)){const ct=ot&&et.id===_;et.domElement&&(et.domElement.checked=ct),o.setValue(et.id,{value:ct})}}};this._dispatchEventFromSandbox(ut,rt)}),this._setEventListeners(I,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],rt=>rt.target.checked)}return this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}class c extends h{constructor(o){super(o,{ignoreBorder:o.data.hasAppearance})}render(){const o=super.render();o.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(o.title=this.data.alternativeText);const f=o.lastChild;return this.enableScripting&&this.hasJSActions&&f&&(this._setDefaultPropertiesFromJS(f),f.addEventListener("updatefromsandbox",_=>{this._dispatchEventFromSandbox({},_)})),o}}class r extends s{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const o=this.annotationStorage,f=this.data.id,_=o.getValue(f,{value:this.data.fieldValue}),P=document.createElement("select");w.add(P),P.setAttribute("data-element-id",f),P.disabled=this.data.readOnly,this._setRequired(P,this.data.required),P.name=this.data.fieldName,P.tabIndex=b;let I=this.data.combo&&this.data.options.length>0;this.data.combo||(P.size=this.data.options.length,this.data.multiSelect&&(P.multiple=!0)),P.addEventListener("resetform",Z=>{const ot=this.data.defaultFieldValue;for(const et of P.options)et.selected=et.value===ot});for(const Z of this.data.options){const ot=document.createElement("option");ot.textContent=Z.displayValue,ot.value=Z.exportValue,_.value.includes(Z.exportValue)&&(ot.setAttribute("selected",!0),I=!1),P.append(ot)}let q=null;if(I){const Z=document.createElement("option");Z.value=" ",Z.setAttribute("hidden",!0),Z.setAttribute("selected",!0),P.prepend(Z),q=()=>{Z.remove(),P.removeEventListener("input",q),q=null},P.addEventListener("input",q)}const rt=(Z,ot)=>{const et=ot?"value":"textContent",ct=Z.target.options;return Z.target.multiple?Array.prototype.filter.call(ct,pt=>pt.selected).map(pt=>pt[et]):ct.selectedIndex===-1?null:ct[ct.selectedIndex][et]},ut=Z=>{const ot=Z.target.options;return Array.prototype.map.call(ot,et=>({displayValue:et.textContent,exportValue:et.value}))};return this.enableScripting&&this.hasJSActions?(P.addEventListener("updatefromsandbox",Z=>{const ot={value(et){q==null||q();const ct=et.detail.value,pt=new Set(Array.isArray(ct)?ct:[ct]);for(const N of P.options)N.selected=pt.has(N.value);o.setValue(f,{value:rt(et,!0)})},multipleSelection(et){P.multiple=!0},remove(et){const ct=P.options,pt=et.detail.remove;ct[pt].selected=!1,P.remove(pt),ct.length>0&&Array.prototype.findIndex.call(ct,dt=>dt.selected)===-1&&(ct[0].selected=!0),o.setValue(f,{value:rt(et,!0),items:ut(et)})},clear(et){for(;P.length!==0;)P.remove(0);o.setValue(f,{value:null,items:[]})},insert(et){const{index:ct,displayValue:pt,exportValue:N}=et.detail.insert,dt=P.children[ct],bt=document.createElement("option");bt.textContent=pt,bt.value=N,dt?dt.before(bt):P.append(bt),o.setValue(f,{value:rt(et,!0),items:ut(et)})},items(et){const{items:ct}=et.detail;for(;P.length!==0;)P.remove(0);for(const pt of ct){const{displayValue:N,exportValue:dt}=pt,bt=document.createElement("option");bt.textContent=N,bt.value=dt,P.append(bt)}P.options.length>0&&(P.options[0].selected=!0),o.setValue(f,{value:rt(et,!0),items:ut(et)})},indices(et){const ct=new Set(et.detail.indices);for(const pt of et.target.options)pt.selected=ct.has(pt.index);o.setValue(f,{value:rt(et,!0)})},editable(et){et.target.disabled=!et.detail.editable}};this._dispatchEventFromSandbox(ot,Z)}),P.addEventListener("input",Z=>{var ct;const ot=rt(Z,!0),et=rt(Z,!1);o.setValue(f,{value:ot}),(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f,name:"Keystroke",value:et,changeEx:ot,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(P,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],Z=>Z.target.checked)):P.addEventListener("input",function(Z){o.setValue(f,{value:rt(Z,!0)})}),this.data.combo&&this._setTextStyle(P),this._setBackgroundColor(P),this._setDefaultPropertiesFromJS(P),this.container.append(P),this.container}}class a extends E{constructor(o){var _,P,I;const f=!!((_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f})}render(){const o=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",o.includes(this.data.parentType))return this.container;const f=`[data-annotation-id="${this.data.parentId}"]`,_=this.layer.querySelectorAll(f);if(_.length===0)return this.container;const P=new g({container:this.container,trigger:Array.from(_),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),I=this.page,q=e.Util.normalizeRect([this.data.parentRect[0],I.view[3]-this.data.parentRect[1]+I.view[1],this.data.parentRect[2],I.view[3]-this.data.parentRect[3]+I.view[1]]),rt=q[0]+this.data.parentRect[2]-this.data.parentRect[0],ut=q[1],[Z,ot,et,ct]=this.viewport.viewBox,pt=et-Z,N=ct-ot;return this.container.style.left=`${100*(rt-Z)/pt}%`,this.container.style.top=`${100*(ut-ot)/N}%`,this.container.append(P.render()),this.container}}class g{constructor(o){this.container=o.container,this.trigger=o.trigger,this.color=o.color,this.titleObj=o.titleObj,this.modificationDate=o.modificationDate,this.contentsObj=o.contentsObj,this.richText=o.richText,this.hideWrapper=o.hideWrapper||!1,this.pinned=!1}render(){var rt,ut;const f=document.createElement("div");f.className="popupWrapper",this.hideElement=this.hideWrapper?f:this.container,this.hideElement.hidden=!0;const _=document.createElement("div");_.className="popup";const P=this.color;if(P){const Z=.7*(255-P[0])+P[0],ot=.7*(255-P[1])+P[1],et=.7*(255-P[2])+P[2];_.style.backgroundColor=e.Util.makeHexColor(Z|0,ot|0,et|0)}const I=document.createElement("h1");I.dir=this.titleObj.dir,I.textContent=this.titleObj.str,_.append(I);const q=i.PDFDateString.toDateObject(this.modificationDate);if(q){const Z=document.createElement("span");Z.className="popupDate",Z.textContent="{{date}}, {{time}}",Z.dataset.l10nId="annotation_date_string",Z.dataset.l10nArgs=JSON.stringify({date:q.toLocaleDateString(),time:q.toLocaleTimeString()}),_.append(Z)}if((rt=this.richText)!=null&&rt.str&&(!((ut=this.contentsObj)!=null&&ut.str)||this.contentsObj.str===this.richText.str))x.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:_}),_.lastChild.className="richText popupContent";else{const Z=this._formatContents(this.contentsObj);_.append(Z)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Z of this.trigger)Z.addEventListener("click",this._toggle.bind(this)),Z.addEventListener("mouseover",this._show.bind(this,!1)),Z.addEventListener("mouseout",this._hide.bind(this,!1));return _.addEventListener("click",this._hide.bind(this,!0)),f.append(_),f}_formatContents({str:o,dir:f}){const _=document.createElement("p");_.className="popupContent",_.dir=f;const P=o.split(/(?:\r\n?|\n)/);for(let I=0,q=P.length;I<q;++I){const rt=P[I];_.append(document.createTextNode(rt)),I<q-1&&_.append(document.createElement("br"))}return _}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(o=!1){o&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(o=!0){o&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class k extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0}),this.textContent=o.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const o=document.createElement("div");o.className="annotationTextContent",o.setAttribute("role","comment");for(const f of this.textContent){const _=document.createElement("span");_.textContent=f,o.append(_)}this.container.append(o)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class S extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const o=this.data,{width:f,height:_}=L(o.rect),P=this.svgFactory.create(f,_,!0),I=this.svgFactory.createElement("svg:line");return I.setAttribute("x1",o.rect[2]-o.lineCoordinates[0]),I.setAttribute("y1",o.rect[3]-o.lineCoordinates[1]),I.setAttribute("x2",o.rect[2]-o.lineCoordinates[2]),I.setAttribute("y2",o.rect[3]-o.lineCoordinates[3]),I.setAttribute("stroke-width",o.borderStyle.width||1),I.setAttribute("stroke","transparent"),I.setAttribute("fill","transparent"),P.append(I),this.container.append(P),this._createPopup(I,o),this.container}}class m extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const o=this.data,{width:f,height:_}=L(o.rect),P=this.svgFactory.create(f,_,!0),I=o.borderStyle.width,q=this.svgFactory.createElement("svg:rect");return q.setAttribute("x",I/2),q.setAttribute("y",I/2),q.setAttribute("width",f-I),q.setAttribute("height",_-I),q.setAttribute("stroke-width",I||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),P.append(q),this.container.append(P),this._createPopup(q,o),this.container}}class O extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const o=this.data,{width:f,height:_}=L(o.rect),P=this.svgFactory.create(f,_,!0),I=o.borderStyle.width,q=this.svgFactory.createElement("svg:ellipse");return q.setAttribute("cx",f/2),q.setAttribute("cy",_/2),q.setAttribute("rx",f/2-I/2),q.setAttribute("ry",_/2-I/2),q.setAttribute("stroke-width",I||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),P.append(q),this.container.append(P),this._createPopup(q,o),this.container}}class tt extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const o=this.data,{width:f,height:_}=L(o.rect),P=this.svgFactory.create(f,_,!0);let I=[];for(const rt of o.vertices){const ut=rt.x-o.rect[0],Z=o.rect[3]-rt.y;I.push(ut+","+Z)}I=I.join(" ");const q=this.svgFactory.createElement(this.svgElementName);return q.setAttribute("points",I),q.setAttribute("stroke-width",o.borderStyle.width||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),P.append(q),this.container.append(P),this._createPopup(q,o),this.container}}class st extends tt{constructor(o){super(o),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Q extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class K extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const o=this.data,{width:f,height:_}=L(o.rect),P=this.svgFactory.create(f,_,!0);for(const I of o.inkLists){let q=[];for(const ut of I){const Z=ut.x-o.rect[0],ot=o.rect[3]-ut.y;q.push(`${Z},${ot}`)}q=q.join(" ");const rt=this.svgFactory.createElement(this.svgElementName);rt.setAttribute("points",q),rt.setAttribute("stroke-width",o.borderStyle.width||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),this._createPopup(rt,o),P.append(rt)}return this.container.append(P),this.container}}class G extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class $ extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class X extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class nt extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class lt extends E{constructor(o){var _,P,I;const f=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(P=o.data.contentsObj)!=null&&P.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:f,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class _t extends E{constructor(o){var P;super(o,{isRenderable:!0});const{filename:f,content:_}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(f),this.content=_,(P=this.linkService.eventBus)==null||P.dispatch("fileattachmentannotation",{source:this,filename:f,content:_})}render(){var f,_;this.container.className="fileAttachmentAnnotation";const o=document.createElement("div");return o.className="popupTriggerArea",o.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((f=this.data.titleObj)!=null&&f.str||(_=this.data.contentsObj)!=null&&_.str||this.data.richText)&&this._createPopup(o,this.data),this.container.append(o),this.container}_download(){var o;(o=this.downloadManager)==null||o.openOrDownloadData(this.container,this.content,this.filename)}}const Y=class{static render(o){var rt,ut;const{annotations:f,div:_,viewport:P,accessibilityManager:I}=o;ht(this,R,Se).call(this,_,P);let q=0;for(const Z of f){if(Z.annotationType!==e.AnnotationType.POPUP){const{width:et,height:ct}=L(Z.rect);if(et<=0||ct<=0)continue}const ot=C.create({data:Z,layer:_,page:o.page,viewport:P,linkService:o.linkService,downloadManager:o.downloadManager,imageResourcesPath:o.imageResourcesPath||"",renderForms:o.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:o.annotationStorage||new F.AnnotationStorage,enableScripting:o.enableScripting,hasJSActions:o.hasJSActions,fieldObjects:o.fieldObjects,mouseState:o.mouseState||{isDown:!1}});if(ot.isRenderable){const et=ot.render();if(Z.hidden&&(et.style.visibility="hidden"),Array.isArray(et))for(const ct of et)ct.style.zIndex=q++,ht(rt=Y,d,Ae).call(rt,ct,Z.id,_,I);else et.style.zIndex=q++,ot instanceof a?_.prepend(et):ht(ut=Y,d,Ae).call(ut,et,Z.id,_,I)}}ht(this,U,Ee).call(this,_,o.annotationCanvasMap)}static update(o){const{annotationCanvasMap:f,div:_,viewport:P}=o;ht(this,R,Se).call(this,_,P),ht(this,U,Ee).call(this,_,f),_.hidden=!1}};let B=Y;d=new WeakSet,Ae=function(o,f,_,P){const I=o.firstChild||o;I.id=`${i.AnnotationPrefix}${f}`,_.append(o),P==null||P.moveElementInDOM(_,o,I,!1)},R=new WeakSet,Se=function(o,{width:f,height:_,rotation:P}){const{style:I}=o,q=P%180!==0,rt=Math.floor(f)+"px",ut=Math.floor(_)+"px";I.width=q?ut:rt,I.height=q?rt:ut,o.setAttribute("data-main-rotation",P)},U=new WeakSet,Ee=function(o,f){if(f){for(const[_,P]of f){const I=o.querySelector(`[data-annotation-id="${_}"]`);if(!I)continue;const{firstChild:q}=I;q?q.nodeName==="CANVAS"?q.replaceWith(P):q.before(P):I.append(P)}f.clear()}},at(B,d),at(B,R),at(B,U),n.AnnotationLayer=B},(T,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;function y(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}class e{static CMYK_G([F,M,x,b]){return["G",1-Math.min(1,.3*F+.59*x+.11*M+b)]}static G_CMYK([F]){return["CMYK",0,0,0,1-F]}static G_RGB([F]){return["RGB",F,F,F]}static G_HTML([F]){const M=y(F);return`#${M}${M}${M}`}static RGB_G([F,M,x]){return["G",.3*F+.59*M+.11*x]}static RGB_HTML([F,M,x]){const b=y(F),p=y(M),w=y(x);return`#${b}${p}${w}`}static T_HTML(){return"#00000000"}static CMYK_RGB([F,M,x,b]){return["RGB",1-Math.min(1,F+b),1-Math.min(1,x+b),1-Math.min(1,M+b)]}static CMYK_HTML(F){const M=this.CMYK_RGB(F).slice(1);return this.RGB_HTML(M)}static RGB_CMYK([F,M,x]){const b=1-F,p=1-M,w=1-x,L=Math.min(b,p,w);return["CMYK",b,p,w,L]}}n.ColorConverters=e},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var e=y(20);class i{static setupStorage(M,x,b,p,w){const L=p.getValue(x,{value:null});switch(b.name){case"textarea":if(L.value!==null&&(M.textContent=L.value),w==="print")break;M.addEventListener("input",C=>{p.setValue(x,{value:C.target.value})});break;case"input":if(b.attributes.type==="radio"||b.attributes.type==="checkbox"){if(L.value===b.attributes.xfaOn?M.setAttribute("checked",!0):L.value===b.attributes.xfaOff&&M.removeAttribute("checked"),w==="print")break;M.addEventListener("change",C=>{p.setValue(x,{value:C.target.checked?C.target.getAttribute("xfaOn"):C.target.getAttribute("xfaOff")})})}else{if(L.value!==null&&M.setAttribute("value",L.value),w==="print")break;M.addEventListener("input",C=>{p.setValue(x,{value:C.target.value})})}break;case"select":if(L.value!==null)for(const C of b.children)C.attributes.value===L.value&&(C.attributes.selected=!0);M.addEventListener("input",C=>{const E=C.target.options,h=E.selectedIndex===-1?"":E[E.selectedIndex].value;p.setValue(x,{value:h})});break}}static setAttributes({html:M,element:x,storage:b=null,intent:p,linkService:w}){const{attributes:L}=x,C=M instanceof HTMLAnchorElement;L.type==="radio"&&(L.name=`${L.name}-${p}`);for(const[E,h]of Object.entries(L))if(h!=null)switch(E){case"class":h.length&&M.setAttribute(E,h.join(" "));break;case"dataId":break;case"id":M.setAttribute("data-element-id",h);break;case"style":Object.assign(M.style,h);break;case"textContent":M.textContent=h;break;default:(!C||E!=="href"&&E!=="newWindow")&&M.setAttribute(E,h)}C&&w.addLinkAttributes(M,L.href,L.newWindow),b&&L.dataId&&this.setupStorage(M,L.dataId,x,b)}static render(M){var t;const x=M.annotationStorage,b=M.linkService,p=M.xfaHtml,w=M.intent||"display",L=document.createElement(p.name);p.attributes&&this.setAttributes({html:L,element:p,intent:w,linkService:b});const C=[[p,-1,L]],E=M.div;if(E.append(L),M.viewport){const s=`matrix(${M.viewport.transform.join(",")})`;E.style.transform=s}w!=="richText"&&E.setAttribute("class","xfaLayer xfaFont");const h=[];for(;C.length>0;){const[s,l,v]=C.at(-1);if(l+1===s.children.length){C.pop();continue}const A=s.children[++C.at(-1)[1]];if(A===null)continue;const{name:c}=A;if(c==="#text"){const a=document.createTextNode(A.value);h.push(a),v.append(a);continue}let r;if((t=A==null?void 0:A.attributes)!=null&&t.xmlns?r=document.createElementNS(A.attributes.xmlns,c):r=document.createElement(c),v.append(r),A.attributes&&this.setAttributes({html:r,element:A,storage:x,intent:w,linkService:b}),A.children&&A.children.length>0)C.push([A,-1,r]);else if(A.value){const a=document.createTextNode(A.value);e.XfaText.shouldBuildText(c)&&h.push(a),r.append(a)}}for(const s of E.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))s.setAttribute("readOnly",!0);return{textDivs:h}}static update(M){const x=`matrix(${M.viewport.transform.join(",")})`;M.div.style.transform=x,M.div.hidden=!1}}n.XfaLayer=i},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TextLayerRenderTask=void 0,n.renderTextLayer=v;var e=y(1),i=y(8);const F=1e5,M=30,x=.8,b=new Map,p=/^\s+$/g;function w(A,c){const r=b.get(A);if(r)return r;c.save(),c.font=`${M}px ${A}`;const a=c.measureText("");let g=a.fontBoundingBoxAscent,k=Math.abs(a.fontBoundingBoxDescent);if(g){c.restore();const m=g/(g+k);return b.set(A,m),m}c.strokeStyle="red",c.clearRect(0,0,M,M),c.strokeText("g",0,0);let S=c.getImageData(0,0,M,M).data;k=0;for(let m=S.length-1-3;m>=0;m-=4)if(S[m]>0){k=Math.ceil(m/4/M);break}c.clearRect(0,0,M,M),c.strokeText("A",0,M),S=c.getImageData(0,0,M,M).data,g=0;for(let m=0,O=S.length;m<O;m+=4)if(S[m]>0){g=M-Math.floor(m/4/M);break}if(c.restore(),g){const m=g/(g+k);return b.set(A,m),m}return b.set(A,x),x}function L(A,c,r,a){const g=document.createElement("span"),k=A._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:c.str!=="",hasEOL:c.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:c.str!=="",hasEOL:c.hasEOL,fontSize:0};A._textDivs.push(g);const S=e.Util.transform(A._viewport.transform,c.transform);let m=Math.atan2(S[1],S[0]);const O=r[c.fontName];O.vertical&&(m+=Math.PI/2);const tt=Math.hypot(S[2],S[3]),st=tt*w(O.fontFamily,a);let Q,K;m===0?(Q=S[4],K=S[5]-st):(Q=S[4]+st*Math.sin(m),K=S[5]-st*Math.cos(m)),g.style.left=`${Q}px`,g.style.top=`${K}px`,g.style.fontSize=`${tt}px`,g.style.fontFamily=O.fontFamily,k.fontSize=tt,g.setAttribute("role","presentation"),g.textContent=c.str,g.dir=c.dir,A._fontInspectorEnabled&&(g.dataset.fontName=c.fontName),m!==0&&(k.angle=m*(180/Math.PI));let G=!1;if(c.str.length>1||A._enhanceTextSelection&&p.test(c.str))G=!0;else if(c.str!==" "&&c.transform[0]!==c.transform[3]){const $=Math.abs(c.transform[0]),X=Math.abs(c.transform[3]);$!==X&&Math.max($,X)/Math.min($,X)>1.5&&(G=!0)}if(G&&(O.vertical?k.canvasWidth=c.height*A._viewport.scale:k.canvasWidth=c.width*A._viewport.scale),A._textDivProperties.set(g,k),A._textContentStream&&A._layoutText(g),A._enhanceTextSelection&&k.hasText){let $=1,X=0;m!==0&&($=Math.cos(m),X=Math.sin(m));const nt=(O.vertical?c.height:c.width)*A._viewport.scale,lt=tt;let _t,B;m!==0?(_t=[$,X,-X,$,Q,K],B=e.Util.getAxialAlignedBoundingBox([0,0,nt,lt],_t)):B=[Q,K,Q+nt,K+lt],A._bounds.push({left:B[0],top:B[1],right:B[2],bottom:B[3],div:g,size:[nt,lt],m:_t})}}function C(A){if(A._canceled)return;const c=A._textDivs,r=A._capability,a=c.length;if(a>F){A._renderingDone=!0,r.resolve();return}if(!A._textContentStream)for(let g=0;g<a;g++)A._layoutText(c[g]);A._renderingDone=!0,r.resolve()}function E(A,c,r){let a=0;for(let g=0;g<r;g++){const k=A[c++];k>0&&(a=a?Math.min(k,a):k)}return a}function h(A){const c=A._bounds,r=A._viewport,a=t(r.width,r.height,c);for(let g=0;g<a.length;g++){const k=c[g].div,S=A._textDivProperties.get(k);if(S.angle===0){S.paddingLeft=c[g].left-a[g].left,S.paddingTop=c[g].top-a[g].top,S.paddingRight=a[g].right-c[g].right,S.paddingBottom=a[g].bottom-c[g].bottom,A._textDivProperties.set(k,S);continue}const m=a[g],O=c[g],tt=O.m,st=tt[0],Q=tt[1],K=[[0,0],[0,O.size[1]],[O.size[0],0],O.size],G=new Float64Array(64);for(let X=0,nt=K.length;X<nt;X++){const lt=e.Util.applyTransform(K[X],tt);G[X+0]=st&&(m.left-lt[0])/st,G[X+4]=Q&&(m.top-lt[1])/Q,G[X+8]=st&&(m.right-lt[0])/st,G[X+12]=Q&&(m.bottom-lt[1])/Q,G[X+16]=Q&&(m.left-lt[0])/-Q,G[X+20]=st&&(m.top-lt[1])/st,G[X+24]=Q&&(m.right-lt[0])/-Q,G[X+28]=st&&(m.bottom-lt[1])/st,G[X+32]=st&&(m.left-lt[0])/-st,G[X+36]=Q&&(m.top-lt[1])/-Q,G[X+40]=st&&(m.right-lt[0])/-st,G[X+44]=Q&&(m.bottom-lt[1])/-Q,G[X+48]=Q&&(m.left-lt[0])/Q,G[X+52]=st&&(m.top-lt[1])/-st,G[X+56]=Q&&(m.right-lt[0])/Q,G[X+60]=st&&(m.bottom-lt[1])/-st}const $=1+Math.min(Math.abs(st),Math.abs(Q));S.paddingLeft=E(G,32,16)/$,S.paddingTop=E(G,48,16)/$,S.paddingRight=E(G,0,16)/$,S.paddingBottom=E(G,16,16)/$,A._textDivProperties.set(k,S)}}function t(A,c,r){const a=r.map(function(k,S){return{x1:k.left,y1:k.top,x2:k.right,y2:k.bottom,index:S,x1New:void 0,x2New:void 0}});s(A,a);const g=new Array(r.length);for(const k of a){const S=k.index;g[S]={left:k.x1New,top:0,right:k.x2New,bottom:0}}r.map(function(k,S){const m=g[S],O=a[S];O.x1=k.top,O.y1=A-m.right,O.x2=k.bottom,O.y2=A-m.left,O.index=S,O.x1New=void 0,O.x2New=void 0}),s(c,a);for(const k of a){const S=k.index;g[S].top=k.x1New,g[S].bottom=k.x2New}return g}function s(A,c){c.sort(function(g,k){return g.x1-k.x1||g.index-k.index});const a=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const g of c){let k=0;for(;k<a.length&&a[k].end<=g.y1;)k++;let S=a.length-1;for(;S>=0&&a[S].start>=g.y2;)S--;let m,O,tt,st,Q=-1/0;for(tt=k;tt<=S;tt++){m=a[tt],O=m.boundary;let $;O.x2>g.x1?$=O.index>g.index?O.x1New:g.x1:O.x2New===void 0?$=(O.x2+g.x1)/2:$=O.x2New,$>Q&&(Q=$)}for(g.x1New=Q,tt=k;tt<=S;tt++)m=a[tt],O=m.boundary,O.x2New===void 0?O.x2>g.x1?O.index>g.index&&(O.x2New=O.x2):O.x2New=Q:O.x2New>Q&&(O.x2New=Math.max(Q,O.x2));const K=[];let G=null;for(tt=k;tt<=S;tt++){m=a[tt],O=m.boundary;const $=O.x2>g.x2?O:g;G===$?K.at(-1).end=m.end:(K.push({start:m.start,end:m.end,boundary:$}),G=$)}for(a[k].start<g.y1&&(K[0].start=g.y1,K.unshift({start:a[k].start,end:g.y1,boundary:a[k].boundary})),g.y2<a[S].end&&(K.at(-1).end=g.y2,K.push({start:g.y2,end:a[S].end,boundary:a[S].boundary})),tt=k;tt<=S;tt++){if(m=a[tt],O=m.boundary,O.x2New!==void 0)continue;let $=!1;for(st=k-1;!$&&st>=0&&a[st].start>=O.y1;st--)$=a[st].boundary===O;for(st=S+1;!$&&st<a.length&&a[st].end<=O.y2;st++)$=a[st].boundary===O;for(st=0;!$&&st<K.length;st++)$=K[st].boundary===O;$||(O.x2New=Q)}Array.prototype.splice.apply(a,[k,S-k+1,...K])}for(const g of a){const k=g.boundary;k.x2New===void 0&&(k.x2New=Math.max(A,k.x2))}}class l{constructor({textContent:c,textContentStream:r,container:a,viewport:g,textDivs:k,textContentItemsStr:S,enhanceTextSelection:m}){var O;m&&(0,i.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=c,this._textContentStream=r,this._container=a,this._document=a.ownerDocument,this._viewport=g,this._textDivs=k||[],this._textContentItemsStr=S||[],this._enhanceTextSelection=!!m,this._fontInspectorEnabled=!!((O=globalThis.FontInspector)!=null&&O.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,e.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(c,r){for(let a=0,g=c.length;a<g;a++){if(c[a].str===void 0){if(c[a].type==="beginMarkedContentProps"||c[a].type==="beginMarkedContent"){const k=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),c[a].id!==null&&this._container.setAttribute("id",`${c[a].id}`),k.append(this._container)}else c[a].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(c[a].str),L(this,c[a],r,this._layoutTextCtx)}}_layoutText(c){const r=this._textDivProperties.get(c);let a="";if(r.canvasWidth!==0&&r.hasText){const{fontFamily:g}=c.style,{fontSize:k}=r;(k!==this._layoutTextLastFontSize||g!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${k*this._devicePixelRatio}px ${g}`,this._layoutTextLastFontSize=k,this._layoutTextLastFontFamily=g);const{width:S}=this._layoutTextCtx.measureText(c.textContent);if(S>0){const m=this._devicePixelRatio*r.canvasWidth/S;this._enhanceTextSelection&&(r.scale=m),a=`scaleX(${m})`}}if(r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(this._enhanceTextSelection&&(r.originalTransform=a),c.style.transform=a),r.hasText&&this._container.append(c),r.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this._container.append(g)}}_render(c=0){const r=(0,e.createPromiseCapability)();let a=Object.create(null);const g=this._document.createElement("canvas");if(g.height=g.width=M,this._layoutTextCtx=g.getContext("2d",{alpha:!1}),this._textContent){const k=this._textContent.items,S=this._textContent.styles;this._processItems(k,S),r.resolve()}else if(this._textContentStream){const k=()=>{this._reader.read().then(({value:S,done:m})=>{if(m){r.resolve();return}Object.assign(a,S.styles),this._processItems(S.items,a),k()},r.reject)};this._reader=this._textContentStream.getReader(),k()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');r.promise.then(()=>{a=null,c?this._renderTimer=setTimeout(()=>{C(this),this._renderTimer=null},c):C(this)},this._capability.reject)}expandTextDivs(c=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(h(this),this._bounds=null);const r=[],a=[];for(let g=0,k=this._textDivs.length;g<k;g++){const S=this._textDivs[g],m=this._textDivProperties.get(S);m.hasText&&(c?(r.length=0,a.length=0,m.originalTransform&&r.push(m.originalTransform),m.paddingTop>0?(a.push(`${m.paddingTop}px`),r.push(`translateY(${-m.paddingTop}px)`)):a.push(0),m.paddingRight>0?a.push(`${m.paddingRight/m.scale}px`):a.push(0),m.paddingBottom>0?a.push(`${m.paddingBottom}px`):a.push(0),m.paddingLeft>0?(a.push(`${m.paddingLeft/m.scale}px`),r.push(`translateX(${-m.paddingLeft/m.scale}px)`)):a.push(0),S.style.padding=a.join(" "),r.length&&(S.style.transform=r.join(" "))):(S.style.padding=null,S.style.transform=m.originalTransform))}}}n.TextLayerRenderTask=l;function v(A){const c=new l({textContent:A.textContent,textContentStream:A.textContentStream,container:A.container,viewport:A.viewport,textDivs:A.textDivs,textContentItemsStr:A.textContentItemsStr,enhanceTextSelection:A.enhanceTextSelection});return c._render(A.timeout),c}},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var e=y(8),i=y(1),F=y(3);let M=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};n.SVGGraphics=M;{let t=function(r){let a=[];const g=[];for(const k of r){if(k.fn==="save"){a.push({fnId:92,fn:"group",items:[]}),g.push(a),a=a.at(-1).items;continue}k.fn==="restore"?a=g.pop():a.push(k)}return a},s=function(r){if(Number.isInteger(r))return r.toString();const a=r.toFixed(10);let g=a.length-1;if(a[g]!=="0")return a;do g--;while(a[g]==="0");return a.substring(0,a[g]==="."?g:g+1)},l=function(r){if(r[4]===0&&r[5]===0){if(r[1]===0&&r[2]===0)return r[0]===1&&r[3]===1?"":`scale(${s(r[0])} ${s(r[3])})`;if(r[0]===r[3]&&r[1]===-r[2]){const a=Math.acos(r[0])*180/Math.PI;return`rotate(${s(a)})`}}else if(r[0]===1&&r[1]===0&&r[2]===0&&r[3]===1)return`translate(${s(r[4])} ${s(r[5])})`;return`matrix(${s(r[0])} ${s(r[1])} ${s(r[2])} ${s(r[3])} ${s(r[4])} ${s(r[5])})`};const x={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},b="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/1999/xlink",w=["butt","round","square"],L=["miter","round","bevel"],C=function(r,a="",g=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!g)return URL.createObjectURL(new Blob([r],{type:a}));const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let S=`data:${a};base64,`;for(let m=0,O=r.length;m<O;m+=3){const tt=r[m]&255,st=r[m+1]&255,Q=r[m+2]&255,K=tt>>2,G=(tt&3)<<4|st>>4,$=m+1<O?(st&15)<<2|Q>>6:64,X=m+2<O?Q&63:64;S+=k[K]+k[G]+k[$]+k[X]}return S},E=function(){const r=new Uint8Array([137,80,78,71,13,10,26,10]),a=12,g=new Int32Array(256);for(let Q=0;Q<256;Q++){let K=Q;for(let G=0;G<8;G++)K&1?K=3988292384^K>>1&2147483647:K=K>>1&2147483647;g[Q]=K}function k(Q,K,G){let $=-1;for(let X=K;X<G;X++){const nt=($^Q[X])&255,lt=g[nt];$=$>>>8^lt}return $^-1}function S(Q,K,G,$){let X=$;const nt=K.length;G[X]=nt>>24&255,G[X+1]=nt>>16&255,G[X+2]=nt>>8&255,G[X+3]=nt&255,X+=4,G[X]=Q.charCodeAt(0)&255,G[X+1]=Q.charCodeAt(1)&255,G[X+2]=Q.charCodeAt(2)&255,G[X+3]=Q.charCodeAt(3)&255,X+=4,G.set(K,X),X+=K.length;const lt=k(G,$+4,X);G[X]=lt>>24&255,G[X+1]=lt>>16&255,G[X+2]=lt>>8&255,G[X+3]=lt&255}function m(Q,K,G){let $=1,X=0;for(let nt=K;nt<G;++nt)$=($+(Q[nt]&255))%65521,X=(X+$)%65521;return X<<16|$}function O(Q){if(!F.isNodeJS)return tt(Q);try{let K;parseInt(process.versions.node)>=8?K=Q:K=Buffer.from(Q);const G=require$$5.deflateSync(K,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(K){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+K)}return tt(Q)}function tt(Q){let K=Q.length;const G=65535,$=Math.ceil(K/G),X=new Uint8Array(2+K+$*5+4);let nt=0;X[nt++]=120,X[nt++]=156;let lt=0;for(;K>G;)X[nt++]=0,X[nt++]=255,X[nt++]=255,X[nt++]=0,X[nt++]=0,X.set(Q.subarray(lt,lt+G),nt),nt+=G,lt+=G,K-=G;X[nt++]=1,X[nt++]=K&255,X[nt++]=K>>8&255,X[nt++]=~K&65535&255,X[nt++]=(~K&65535)>>8&255,X.set(Q.subarray(lt),nt),nt+=Q.length-lt;const _t=m(Q,0,Q.length);return X[nt++]=_t>>24&255,X[nt++]=_t>>16&255,X[nt++]=_t>>8&255,X[nt++]=_t&255,X}function st(Q,K,G,$){const X=Q.width,nt=Q.height;let lt,_t,B;const d=Q.data;switch(K){case i.ImageKind.GRAYSCALE_1BPP:_t=0,lt=1,B=X+7>>3;break;case i.ImageKind.RGB_24BPP:_t=2,lt=8,B=X*3;break;case i.ImageKind.RGBA_32BPP:_t=6,lt=8,B=X*4;break;default:throw new Error("invalid format")}const u=new Uint8Array((1+B)*nt);let R=0,j=0;for(let f=0;f<nt;++f)u[R++]=0,u.set(d.subarray(j,j+B),R),j+=B,R+=B;if(K===i.ImageKind.GRAYSCALE_1BPP&&$){R=0;for(let f=0;f<nt;f++){R++;for(let _=0;_<B;_++)u[R++]^=255}}const U=new Uint8Array([X>>24&255,X>>16&255,X>>8&255,X&255,nt>>24&255,nt>>16&255,nt>>8&255,nt&255,lt,_t,0,0,0]),W=O(u),Y=r.length+a*3+U.length+W.length,V=new Uint8Array(Y);let o=0;return V.set(r,o),o+=r.length,S("IHDR",U,V,o),o+=a+U.length,S("IDATA",W,V,o),o+=a+W.length,S("IEND",new Uint8Array(0),V,o),C(V,"image/png",G)}return function(K,G,$){const X=K.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:K.kind;return st(K,X,G,$)}}();class h{constructor(){this.fontSizeScale=1,this.fontWeight=x.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=x.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(a,g){this.x=a,this.y=g}}let v=0,A=0,c=0;n.SVGGraphics=M=class{constructor(r,a,g=!1){(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new h,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=r,this.objs=a,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!g,this._operatorIdMapping=[];for(const k in i.OPS)this._operatorIdMapping[i.OPS[k]]=k}save(){this.transformStack.push(this.transformMatrix);const r=this.current;this.extraStack.push(r),this.current=r.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(r){this.save(),this.executeOpTree(r),this.restore()}loadDependencies(r){const a=r.fnArray,g=r.argsArray;for(let k=0,S=a.length;k<S;k++)if(a[k]===i.OPS.dependency)for(const m of g[k]){const O=m.startsWith("g_")?this.commonObjs:this.objs,tt=new Promise(st=>{O.get(m,st)});this.current.dependencies.push(tt)}return Promise.all(this.current.dependencies)}transform(r,a,g,k,S,m){const O=[r,a,g,k,S,m];this.transformMatrix=i.Util.transform(this.transformMatrix,O),this.tgrp=null}getSVG(r,a){this.viewport=a;const g=this._initialize(a);return this.loadDependencies(r).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(r)),g))}convertOpList(r){const a=this._operatorIdMapping,g=r.argsArray,k=r.fnArray,S=[];for(let m=0,O=k.length;m<O;m++){const tt=k[m];S.push({fnId:tt,fn:a[tt],args:g[m]})}return t(S)}executeOpTree(r){for(const a of r){const g=a.fn,k=a.fnId,S=a.args;switch(k|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(S);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(S[0],S[1]);break;case i.OPS.setFont:this.setFont(S);break;case i.OPS.showText:this.showText(S[0]);break;case i.OPS.showSpacedText:this.showText(S[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(S[0],S[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(S[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(S[0]);break;case i.OPS.setHScale:this.setHScale(S[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(S[0],S[1],S[2],S[3],S[4],S[5]);break;case i.OPS.setTextRise:this.setTextRise(S[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(S[0]);break;case i.OPS.setLineWidth:this.setLineWidth(S[0]);break;case i.OPS.setLineJoin:this.setLineJoin(S[0]);break;case i.OPS.setLineCap:this.setLineCap(S[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(S[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(S[0],S[1],S[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(S[0],S[1],S[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(S);break;case i.OPS.setFillColorN:this.setFillColorN(S);break;case i.OPS.shadingFill:this.shadingFill(S[0]);break;case i.OPS.setDash:this.setDash(S[0],S[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(S[0]);break;case i.OPS.setFlatness:this.setFlatness(S[0]);break;case i.OPS.setGState:this.setGState(S[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(S[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(S[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(S[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(S[0],S[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(S[0],S[1],S[2],S[3],S[4],S[5]);break;case i.OPS.constructPath:this.constructPath(S[0],S[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,i.warn)(`Unimplemented operator ${g}`);break}}}setWordSpacing(r){this.current.wordSpacing=r}setCharSpacing(r){this.current.charSpacing=r}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(r,a,g,k,S,m){const O=this.current;O.textMatrix=O.lineMatrix=[r,a,g,k,S,m],O.textMatrixScale=Math.hypot(r,a),O.x=O.lineX=0,O.y=O.lineY=0,O.xcoords=[],O.ycoords=[],O.tspan=this.svgFactory.createElement("svg:tspan"),O.tspan.setAttributeNS(null,"font-family",O.fontFamily),O.tspan.setAttributeNS(null,"font-size",`${s(O.fontSize)}px`),O.tspan.setAttributeNS(null,"y",s(-O.y)),O.txtElement=this.svgFactory.createElement("svg:text"),O.txtElement.append(O.tspan)}beginText(){const r=this.current;r.x=r.lineX=0,r.y=r.lineY=0,r.textMatrix=i.IDENTITY_MATRIX,r.lineMatrix=i.IDENTITY_MATRIX,r.textMatrixScale=1,r.tspan=this.svgFactory.createElement("svg:tspan"),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtgrp=this.svgFactory.createElement("svg:g"),r.xcoords=[],r.ycoords=[]}moveText(r,a){const g=this.current;g.x=g.lineX+=r,g.y=g.lineY+=a,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${s(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",s(-g.y))}showText(r){const a=this.current,g=a.font,k=a.fontSize;if(k===0)return;const S=a.fontSizeScale,m=a.charSpacing,O=a.wordSpacing,tt=a.fontDirection,st=a.textHScale*tt,Q=g.vertical,K=Q?1:-1,G=g.defaultVMetrics,$=k*a.fontMatrix[0];let X=0;for(const _t of r){if(_t===null){X+=tt*O;continue}else if(typeof _t=="number"){X+=K*_t*k/1e3;continue}const B=(_t.isSpace?O:0)+m,d=_t.fontChar;let u,R,j=_t.width;if(Q){let W;const Y=_t.vmetric||G;W=_t.vmetric?Y[1]:j*.5,W=-W*$;const V=Y[2]*$;j=Y?-Y[0]:j,u=W/S,R=(X+V)/S}else u=X/S,R=0;(_t.isInFont||g.missingFile)&&(a.xcoords.push(a.x+u),Q&&a.ycoords.push(-a.y+R),a.tspan.textContent+=d);let U;Q?U=j*$-B*tt:U=j*$+B*tt,X+=U}a.tspan.setAttributeNS(null,"x",a.xcoords.map(s).join(" ")),Q?a.tspan.setAttributeNS(null,"y",a.ycoords.map(s).join(" ")):a.tspan.setAttributeNS(null,"y",s(-a.y)),Q?a.y-=X:a.x+=X*st,a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${s(a.fontSize)}px`),a.fontStyle!==x.fontStyle&&a.tspan.setAttributeNS(null,"font-style",a.fontStyle),a.fontWeight!==x.fontWeight&&a.tspan.setAttributeNS(null,"font-weight",a.fontWeight);const nt=a.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(nt===i.TextRenderingMode.FILL||nt===i.TextRenderingMode.FILL_STROKE?(a.fillColor!==x.fillColor&&a.tspan.setAttributeNS(null,"fill",a.fillColor),a.fillAlpha<1&&a.tspan.setAttributeNS(null,"fill-opacity",a.fillAlpha)):a.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?a.tspan.setAttributeNS(null,"fill","transparent"):a.tspan.setAttributeNS(null,"fill","none"),nt===i.TextRenderingMode.STROKE||nt===i.TextRenderingMode.FILL_STROKE){const _t=1/(a.textMatrixScale||1);this._setStrokeAttributes(a.tspan,_t)}let lt=a.textMatrix;a.textRise!==0&&(lt=lt.slice(),lt[5]+=a.textRise),a.txtElement.setAttributeNS(null,"transform",`${l(lt)} scale(${s(st)}, -1)`),a.txtElement.setAttributeNS(b,"xml:space","preserve"),a.txtElement.append(a.tspan),a.txtgrp.append(a.txtElement),this._ensureTransformGroup().append(a.txtElement)}setLeadingMoveText(r,a){this.setLeading(-a),this.moveText(r,a)}addFontStyle(r){if(!r.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const a=C(r.data,r.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${r.loadedName}"; src: url(${a}); }
`}setFont(r){const a=this.current,g=this.commonObjs.get(r[0]);let k=r[1];a.font=g,this.embedFonts&&!g.missingFile&&!this.embeddedFonts[g.loadedName]&&(this.addFontStyle(g),this.embeddedFonts[g.loadedName]=g),a.fontMatrix=g.fontMatrix||i.FONT_IDENTITY_MATRIX;let S="normal";g.black?S="900":g.bold&&(S="bold");const m=g.italic?"italic":"normal";k<0?(k=-k,a.fontDirection=-1):a.fontDirection=1,a.fontSize=k,a.fontFamily=g.loadedName,a.fontWeight=S,a.fontStyle=m,a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"y",s(-a.y)),a.xcoords=[],a.ycoords=[]}endText(){var a;const r=this.current;r.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((a=r.txtElement)!=null&&a.hasChildNodes())&&(r.element=r.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(r){r>0&&(this.current.lineWidth=r)}setLineCap(r){this.current.lineCap=w[r]}setLineJoin(r){this.current.lineJoin=L[r]}setMiterLimit(r){this.current.miterLimit=r}setStrokeAlpha(r){this.current.strokeAlpha=r}setStrokeRGBColor(r,a,g){this.current.strokeColor=i.Util.makeHexColor(r,a,g)}setFillAlpha(r){this.current.fillAlpha=r}setFillRGBColor(r,a,g){this.current.fillColor=i.Util.makeHexColor(r,a,g),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(r){this.current.strokeColor=this._makeColorN_Pattern(r)}setFillColorN(r){this.current.fillColor=this._makeColorN_Pattern(r)}shadingFill(r){const a=this.viewport.width,g=this.viewport.height,k=i.Util.inverseTransform(this.transformMatrix),S=i.Util.applyTransform([0,0],k),m=i.Util.applyTransform([0,g],k),O=i.Util.applyTransform([a,0],k),tt=i.Util.applyTransform([a,g],k),st=Math.min(S[0],m[0],O[0],tt[0]),Q=Math.min(S[1],m[1],O[1],tt[1]),K=Math.max(S[0],m[0],O[0],tt[0]),G=Math.max(S[1],m[1],O[1],tt[1]),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",st),$.setAttributeNS(null,"y",Q),$.setAttributeNS(null,"width",K-st),$.setAttributeNS(null,"height",G-Q),$.setAttributeNS(null,"fill",this._makeShadingPattern(r)),this.current.fillAlpha<1&&$.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($)}_makeColorN_Pattern(r){return r[0]==="TilingPattern"?this._makeTilingPattern(r):this._makeShadingPattern(r)}_makeTilingPattern(r){const a=r[1],g=r[2],k=r[3]||i.IDENTITY_MATRIX,[S,m,O,tt]=r[4],st=r[5],Q=r[6],K=r[7],G=`shading${c++}`,[$,X,nt,lt]=i.Util.normalizeRect([...i.Util.applyTransform([S,m],k),...i.Util.applyTransform([O,tt],k)]),[_t,B]=i.Util.singularValueDecompose2dScale(k),d=st*_t,u=Q*B,R=this.svgFactory.createElement("svg:pattern");R.setAttributeNS(null,"id",G),R.setAttributeNS(null,"patternUnits","userSpaceOnUse"),R.setAttributeNS(null,"width",d),R.setAttributeNS(null,"height",u),R.setAttributeNS(null,"x",`${$}`),R.setAttributeNS(null,"y",`${X}`);const j=this.svg,U=this.transformMatrix,W=this.current.fillColor,Y=this.current.strokeColor,V=this.svgFactory.create(nt-$,lt-X);if(this.svg=V,this.transformMatrix=k,K===2){const o=i.Util.makeHexColor(...a);this.current.fillColor=o,this.current.strokeColor=o}return this.executeOpTree(this.convertOpList(g)),this.svg=j,this.transformMatrix=U,this.current.fillColor=W,this.current.strokeColor=Y,R.append(V.childNodes[0]),this.defs.append(R),`url(#${G})`}_makeShadingPattern(r){switch(typeof r=="string"&&(r=this.objs.get(r)),r[0]){case"RadialAxial":const a=`shading${c++}`,g=r[3];let k;switch(r[1]){case"axial":const S=r[4],m=r[5];k=this.svgFactory.createElement("svg:linearGradient"),k.setAttributeNS(null,"id",a),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"x1",S[0]),k.setAttributeNS(null,"y1",S[1]),k.setAttributeNS(null,"x2",m[0]),k.setAttributeNS(null,"y2",m[1]);break;case"radial":const O=r[4],tt=r[5],st=r[6],Q=r[7];k=this.svgFactory.createElement("svg:radialGradient"),k.setAttributeNS(null,"id",a),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"cx",tt[0]),k.setAttributeNS(null,"cy",tt[1]),k.setAttributeNS(null,"r",Q),k.setAttributeNS(null,"fx",O[0]),k.setAttributeNS(null,"fy",O[1]),k.setAttributeNS(null,"fr",st);break;default:throw new Error(`Unknown RadialAxial type: ${r[1]}`)}for(const S of g){const m=this.svgFactory.createElement("svg:stop");m.setAttributeNS(null,"offset",S[0]),m.setAttributeNS(null,"stop-color",S[1]),k.append(m)}return this.defs.append(k),`url(#${a})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${r[0]}`)}}setDash(r,a){this.current.dashArray=r,this.current.dashPhase=a}constructPath(r,a){const g=this.current;let k=g.x,S=g.y,m=[],O=0;for(const tt of r)switch(tt|0){case i.OPS.rectangle:k=a[O++],S=a[O++];const st=a[O++],Q=a[O++],K=k+st,G=S+Q;m.push("M",s(k),s(S),"L",s(K),s(S),"L",s(K),s(G),"L",s(k),s(G),"Z");break;case i.OPS.moveTo:k=a[O++],S=a[O++],m.push("M",s(k),s(S));break;case i.OPS.lineTo:k=a[O++],S=a[O++],m.push("L",s(k),s(S));break;case i.OPS.curveTo:k=a[O+4],S=a[O+5],m.push("C",s(a[O]),s(a[O+1]),s(a[O+2]),s(a[O+3]),s(k),s(S)),O+=6;break;case i.OPS.curveTo2:m.push("C",s(k),s(S),s(a[O]),s(a[O+1]),s(a[O+2]),s(a[O+3])),k=a[O+2],S=a[O+3],O+=4;break;case i.OPS.curveTo3:k=a[O+2],S=a[O+3],m.push("C",s(a[O]),s(a[O+1]),s(k),s(S),s(k),s(S)),O+=4;break;case i.OPS.closePath:m.push("Z");break}m=m.join(" "),g.path&&r.length>0&&r[0]!==i.OPS.rectangle&&r[0]!==i.OPS.moveTo?m=g.path.getAttributeNS(null,"d")+m:(g.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(g.path)),g.path.setAttributeNS(null,"d",m),g.path.setAttributeNS(null,"fill","none"),g.element=g.path,g.setCurrentPoint(k,S)}endPath(){const r=this.current;if(r.path=null,!this.pendingClip)return;if(!r.element){this.pendingClip=null;return}const a=`clippath${v++}`,g=this.svgFactory.createElement("svg:clipPath");g.setAttributeNS(null,"id",a),g.setAttributeNS(null,"transform",l(this.transformMatrix));const k=r.element.cloneNode(!0);if(this.pendingClip==="evenodd"?k.setAttributeNS(null,"clip-rule","evenodd"):k.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,g.append(k),this.defs.append(g),r.activeClipUrl){r.clipGroup=null;for(const S of this.extraStack)S.clipGroup=null;g.setAttributeNS(null,"clip-path",r.activeClipUrl)}r.activeClipUrl=`url(#${a})`,this.tgrp=null}clip(r){this.pendingClip=r}closePath(){const r=this.current;if(r.path){const a=`${r.path.getAttributeNS(null,"d")}Z`;r.path.setAttributeNS(null,"d",a)}}setLeading(r){this.current.leading=-r}setTextRise(r){this.current.textRise=r}setTextRenderingMode(r){this.current.textRenderingMode=r}setHScale(r){this.current.textHScale=r/100}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[a,g]of r)switch(a){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g);break;case"CA":this.setStrokeAlpha(g);break;case"ca":this.setFillAlpha(g);break;default:(0,i.warn)(`Unimplemented graphic state operator ${a}`);break}}fill(){const r=this.current;r.element&&(r.element.setAttributeNS(null,"fill",r.fillColor),r.element.setAttributeNS(null,"fill-opacity",r.fillAlpha),this.endPath())}stroke(){const r=this.current;r.element&&(this._setStrokeAttributes(r.element),r.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(r,a=1){const g=this.current;let k=g.dashArray;a!==1&&k.length>0&&(k=k.map(function(S){return a*S})),r.setAttributeNS(null,"stroke",g.strokeColor),r.setAttributeNS(null,"stroke-opacity",g.strokeAlpha),r.setAttributeNS(null,"stroke-miterlimit",s(g.miterLimit)),r.setAttributeNS(null,"stroke-linecap",g.lineCap),r.setAttributeNS(null,"stroke-linejoin",g.lineJoin),r.setAttributeNS(null,"stroke-width",s(a*g.lineWidth)+"px"),r.setAttributeNS(null,"stroke-dasharray",k.map(s).join(" ")),r.setAttributeNS(null,"stroke-dashoffset",s(a*g.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","1px"),r.setAttributeNS(null,"height","1px"),r.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(r)}paintImageXObject(r){const a=r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r);if(!a){(0,i.warn)(`Dependent image with object ID ${r} is not ready yet`);return}this.paintInlineImageXObject(a)}paintInlineImageXObject(r,a){const g=r.width,k=r.height,S=E(r,this.forceDataSchema,!!a),m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width",s(g)),m.setAttributeNS(null,"height",s(k)),this.current.element=m,this.clip("nonzero");const O=this.svgFactory.createElement("svg:image");O.setAttributeNS(p,"xlink:href",S),O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y",s(-k)),O.setAttributeNS(null,"width",s(g)+"px"),O.setAttributeNS(null,"height",s(k)+"px"),O.setAttributeNS(null,"transform",`scale(${s(1/g)} ${s(-1/k)})`),a?a.append(O):this._ensureTransformGroup().append(O)}paintImageMaskXObject(r){const a=this.current,g=r.width,k=r.height,S=a.fillColor;a.maskId=`mask${A++}`;const m=this.svgFactory.createElement("svg:mask");m.setAttributeNS(null,"id",a.maskId);const O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",s(g)),O.setAttributeNS(null,"height",s(k)),O.setAttributeNS(null,"fill",S),O.setAttributeNS(null,"mask",`url(#${a.maskId})`),this.defs.append(m),this._ensureTransformGroup().append(O),this.paintInlineImageXObject(r,m)}paintFormXObjectBegin(r,a){if(Array.isArray(r)&&r.length===6&&this.transform(r[0],r[1],r[2],r[3],r[4],r[5]),a){const g=a[2]-a[0],k=a[3]-a[1],S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x",a[0]),S.setAttributeNS(null,"y",a[1]),S.setAttributeNS(null,"width",s(g)),S.setAttributeNS(null,"height",s(k)),this.current.element=S,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(r){const a=this.svgFactory.create(r.width,r.height),g=this.svgFactory.createElement("svg:defs");a.append(g),this.defs=g;const k=this.svgFactory.createElement("svg:g");return k.setAttributeNS(null,"transform",l(r.transform)),a.append(k),this.svg=k,a}_ensureClipGroup(){if(!this.current.clipGroup){const r=this.svgFactory.createElement("svg:g");r.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(r),this.current.clipGroup=r}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",l(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var e=y(1),i=y(33);const F=require$$5,M=require$$5,x=require$$5,b=require$$5,p=/^file:\/\/\/[a-zA-Z]:\//;function w(A){const c=b.parse(A);return c.protocol==="file:"||c.host?c:/^[a-z]:[/\\]/i.test(A)?b.parse(`file:///${A}`):(c.host||(c.protocol="file:"),c)}class L{constructor(c){this.source=c,this.url=w(c.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&c.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var c;return((c=this._fullRequestReader)==null?void 0:c._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new l(this):new t(this),this._fullRequestReader}getRangeReader(c,r){if(r<=this._progressiveDataLength)return null;const a=this.isFsUrl?new v(this,c,r):new s(this,c,r);return this._rangeRequestReaders.push(a),a}cancelAllRequests(c){this._fullRequestReader&&this._fullRequestReader.cancel(c);for(const r of this._rangeRequestReaders.slice(0))r.cancel(c)}}n.PDFNodeStream=L;class C{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=c.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._headersCapability=(0,e.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=c.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",r=>{this._error(r)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)();const r=c.source;this._isStreamingSupported=!r.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=c.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",r=>{this._error(r)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function h(A,c){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:c}}class t extends C{constructor(c){super(c);const r=a=>{if(a.statusCode===404){const m=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m,this._headersCapability.reject(m);return}this._headersCapability.resolve(),this._setReadableStream(a);const g=m=>this._readableStream.headers[m.toLowerCase()],{allowRangeRequests:k,suggestedLength:S}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:c.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=S||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(g)};this._request=null,this._url.protocol==="http:"?this._request=M.request(h(this._url,c.httpHeaders),r):this._request=x.request(h(this._url,c.httpHeaders),r),this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}}class s extends E{constructor(c,r,a){super(c),this._httpHeaders={};for(const k in c.httpHeaders){const S=c.httpHeaders[k];typeof S>"u"||(this._httpHeaders[k]=S)}this._httpHeaders.Range=`bytes=${r}-${a-1}`;const g=k=>{if(k.statusCode===404){const S=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=S;return}this._setReadableStream(k)};this._request=null,this._url.protocol==="http:"?this._request=M.request(h(this._url,this._httpHeaders),g):this._request=x.request(h(this._url,this._httpHeaders),g),this._request.on("error",k=>{this._storedError=k}),this._request.end()}}class l extends C{constructor(c){super(c);let r=decodeURIComponent(this._url.path);p.test(this._url.href)&&(r=r.replace(/^\//,"")),F.lstat(r,(a,g)=>{if(a){a.code==="ENOENT"&&(a=new e.MissingPDFException(`Missing PDF "${r}".`)),this._storedError=a,this._headersCapability.reject(a);return}this._contentLength=g.size,this._setReadableStream(F.createReadStream(r)),this._headersCapability.resolve()})}}class v extends E{constructor(c,r,a){super(c);let g=decodeURIComponent(this._url.path);p.test(this._url.href)&&(g=g.replace(/^\//,"")),this._setReadableStream(F.createReadStream(g,{start:r,end:a-1}))}}},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=b,n.extractFilenameFromHeader=x,n.validateRangeRequestCapabilities=M,n.validateResponseStatus=p;var e=y(1),i=y(34),F=y(8);function M({getResponseHeader:w,isHttp:L,rangeChunkSize:C,disableRange:E}){const h={allowRangeRequests:!1,suggestedLength:void 0},t=parseInt(w("Content-Length"),10);return!Number.isInteger(t)||(h.suggestedLength=t,t<=2*C)||E||!L||w("Accept-Ranges")!=="bytes"||(w("Content-Encoding")||"identity")!=="identity"||(h.allowRangeRequests=!0),h}function x(w){const L=w("Content-Disposition");if(L){let C=(0,i.getFilenameFromContentDispositionHeader)(L);if(C.includes("%"))try{C=decodeURIComponent(C)}catch{}if((0,F.isPdfFile)(C))return C}return null}function b(w,L){return w===404||w===0&&L.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+L+'".'):new e.UnexpectedResponseException(`Unexpected server response (${w}) while retrieving PDF "${L}".`,w)}function p(w){return w===200||w===206}},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=i;var e=y(1);function i(F){let M=!0,x=b("filename\\*","i").exec(F);if(x){x=x[1];let t=C(x);return t=unescape(t),t=E(t),t=h(t),w(t)}if(x=L(F),x){const t=h(x);return w(t)}if(x=b("filename","i").exec(F),x){x=x[1];let t=C(x);return t=h(t),w(t)}function b(t,s){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',s)}function p(t,s){if(t){if(!/^[\x00-\xFF]+$/.test(s))return s;try{const l=new TextDecoder(t,{fatal:!0}),v=(0,e.stringToBytes)(s);s=l.decode(v),M=!1}catch{}}return s}function w(t){return M&&/[\x80-\xff]/.test(t)&&(t=p("utf-8",t),M&&(t=p("iso-8859-1",t))),t}function L(t){const s=[];let l;const v=b("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(l=v.exec(t))!==null;){let[,c,r,a]=l;if(c=parseInt(c,10),c in s){if(c===0)break;continue}s[c]=[r,a]}const A=[];for(let c=0;c<s.length&&c in s;++c){let[r,a]=s[c];a=C(a),r&&(a=unescape(a),c===0&&(a=E(a))),A.push(a)}return A.join("")}function C(t){if(t.startsWith('"')){const s=t.slice(1).split('\\"');for(let l=0;l<s.length;++l){const v=s[l].indexOf('"');v!==-1&&(s[l]=s[l].slice(0,v),s.length=l+1),s[l]=s[l].replace(/\\(.)/g,"$1")}t=s.join('"')}return t}function E(t){const s=t.indexOf("'");if(s===-1)return t;const l=t.slice(0,s),A=t.slice(s+1).replace(/^[^']*'/,"");return p(l,A)}function h(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(s,l,v,A){if(v==="q"||v==="Q")return A=A.replace(/_/g," "),A=A.replace(/=([0-9a-fA-F]{2})/g,function(c,r){return String.fromCharCode(parseInt(r,16))}),p(l,A);try{A=atob(A)}catch{}return p(l,A)})}return""}},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var e=y(1),i=y(33);const F=200,M=206;function x(C){const E=C.response;return typeof E!="string"?E:(0,e.stringToBytes)(E).buffer}class b{constructor(E,h={}){this.url=E,this.isHttp=/^https?:/i.test(E),this.httpHeaders=this.isHttp&&h.httpHeaders||Object.create(null),this.withCredentials=h.withCredentials||!1,this.getXhr=h.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(E,h,t){const s={begin:E,end:h};for(const l in t)s[l]=t[l];return this.request(s)}requestFull(E){return this.request(E)}request(E){const h=this.getXhr(),t=this.currXhrId++,s=this.pendingRequests[t]={xhr:h};h.open("GET",this.url),h.withCredentials=this.withCredentials;for(const l in this.httpHeaders){const v=this.httpHeaders[l];typeof v>"u"||h.setRequestHeader(l,v)}return this.isHttp&&"begin"in E&&"end"in E?(h.setRequestHeader("Range",`bytes=${E.begin}-${E.end-1}`),s.expectedStatus=M):s.expectedStatus=F,h.responseType="arraybuffer",E.onError&&(h.onerror=function(l){E.onError(h.status)}),h.onreadystatechange=this.onStateChange.bind(this,t),h.onprogress=this.onProgress.bind(this,t),s.onHeadersReceived=E.onHeadersReceived,s.onDone=E.onDone,s.onError=E.onError,s.onProgress=E.onProgress,h.send(null),t}onProgress(E,h){var s;const t=this.pendingRequests[E];t&&((s=t.onProgress)==null||s.call(t,h))}onStateChange(E,h){var c,r,a;const t=this.pendingRequests[E];if(!t)return;const s=t.xhr;if(s.readyState>=2&&t.onHeadersReceived&&(t.onHeadersReceived(),delete t.onHeadersReceived),s.readyState!==4||!(E in this.pendingRequests))return;if(delete this.pendingRequests[E],s.status===0&&this.isHttp){(c=t.onError)==null||c.call(t,s.status);return}const l=s.status||F;if(!(l===F&&t.expectedStatus===M)&&l!==t.expectedStatus){(r=t.onError)==null||r.call(t,s.status);return}const A=x(s);if(l===M){const g=s.getResponseHeader("Content-Range"),k=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);t.onDone({begin:parseInt(k[1],10),chunk:A})}else A?t.onDone({begin:0,chunk:A}):(a=t.onError)==null||a.call(t,s.status)}getRequestXhr(E){return this.pendingRequests[E].xhr}isPendingRequest(E){return E in this.pendingRequests}abortRequest(E){const h=this.pendingRequests[E].xhr;delete this.pendingRequests[E],h.abort()}}class p{constructor(E){this._source=E,this._manager=new b(E.url,{httpHeaders:E.httpHeaders,withCredentials:E.withCredentials}),this._rangeChunkSize=E.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(E){const h=this._rangeRequestReaders.indexOf(E);h>=0&&this._rangeRequestReaders.splice(h,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new w(this._manager,this._source),this._fullRequestReader}getRangeReader(E,h){const t=new L(this._manager,E,h);return t.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(t),t}cancelAllRequests(E){var h;(h=this._fullRequestReader)==null||h.cancel(E);for(const t of this._rangeRequestReaders.slice(0))t.cancel(E)}}n.PDFNetworkStream=p;class w{constructor(E,h){this._manager=E;const t={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._fullRequestId=E.requestFull(t),this._headersReceivedCapability=(0,e.createPromiseCapability)(),this._disableRange=h.disableRange||!1,this._contentLength=h.length,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const E=this._fullRequestId,h=this._manager.getRequestXhr(E),t=v=>h.getResponseHeader(v),{allowRangeRequests:s,suggestedLength:l}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(t),this._isRangeSupported&&this._manager.abortRequest(E),this._headersReceivedCapability.resolve()}_onDone(E){if(E&&(this._requests.length>0?this._requests.shift().resolve({value:E.chunk,done:!1}):this._cachedChunks.push(E.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(E){this._storedError=(0,i.createResponseStatusError)(E,this._url),this._headersReceivedCapability.reject(this._storedError);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(E){var h;(h=this.onProgress)==null||h.call(this,{loaded:E.loaded,total:E.lengthComputable?E.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=(0,e.createPromiseCapability)();return this._requests.push(E),E.promise}cancel(E){this._done=!0,this._headersReceivedCapability.reject(E);for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L{constructor(E,h,t){this._manager=E;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._requestId=E.requestRange(h,t,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var E;(E=this.onClosed)==null||E.call(this,this)}_onDone(E){const h=E.chunk;this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunk=h,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(E){this._storedError=(0,i.createResponseStatusError)(E,this._url);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(E){var h;this.isStreamingSupported||(h=this.onProgress)==null||h.call(this,{loaded:E.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const h=this._queuedChunk;return this._queuedChunk=null,{value:h,done:!1}}if(this._done)return{value:void 0,done:!0};const E=(0,e.createPromiseCapability)();return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(T,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var e=y(1),i=y(33);function F(w,L,C){return{method:"GET",headers:w,signal:C.signal,mode:"cors",credentials:L?"include":"same-origin",redirect:"follow"}}function M(w){const L=new Headers;for(const C in w){const E=w[C];typeof E>"u"||L.append(C,E)}return L}class x{constructor(L){this.source=L,this.isHttp=/^https?:/i.test(L.url),this.httpHeaders=this.isHttp&&L.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var L;return((L=this._fullRequestReader)==null?void 0:L._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(L,C){if(C<=this._progressiveDataLength)return null;const E=new p(this,L,C);return this._rangeRequestReaders.push(E),E}cancelAllRequests(L){this._fullRequestReader&&this._fullRequestReader.cancel(L);for(const C of this._rangeRequestReaders.slice(0))C.cancel(L)}}n.PDFFetchStream=x;class b{constructor(L){this._stream=L,this._reader=null,this._loaded=0,this._filename=null;const C=L.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=(0,e.createPromiseCapability)(),this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=M(this._stream.httpHeaders);const E=C.url;fetch(E,F(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,i.validateResponseStatus)(h.status))throw(0,i.createResponseStatusError)(h.status,E);this._reader=h.body.getReader(),this._headersCapability.resolve();const t=v=>h.headers.get(v),{allowRangeRequests:s,suggestedLength:l}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=l||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:L,done:C}=await this._reader.read();return C?{value:L,done:C}:(this._loaded+=L.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(L).buffer,done:!1})}cancel(L){this._reader&&this._reader.cancel(L),this._abortController.abort()}}class p{constructor(L,C,E){this._stream=L,this._reader=null,this._loaded=0;const h=L.source;this._withCredentials=h.withCredentials||!1,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!h.disableStream,this._abortController=new AbortController,this._headers=M(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${E-1}`);const t=h.url;fetch(t,F(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!(0,i.validateResponseStatus)(s.status))throw(0,i.createResponseStatusError)(s.status,t);this._readCapability.resolve(),this._reader=s.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:L,done:C}=await this._reader.read();return C?{value:L,done:C}:(this._loaded+=L.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(L).buffer,done:!1})}cancel(L){this._reader&&this._reader.cancel(L),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(T){var n=__webpack_module_cache__[T];if(n!==void 0)return n.exports;var y=__webpack_module_cache__[T]={exports:{}};return __webpack_modules__[T](y,y.exports,__w_pdfjs_require__),y.exports}var __webpack_exports__={};return(()=>{var T=__webpack_exports__;Object.defineProperty(T,"__esModule",{value:!0}),Object.defineProperty(T,"AnnotationEditorLayer",{enumerable:!0,get:function(){return i.AnnotationEditorLayer}}),Object.defineProperty(T,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return n.AnnotationEditorParamsType}}),Object.defineProperty(T,"AnnotationEditorType",{enumerable:!0,get:function(){return n.AnnotationEditorType}}),Object.defineProperty(T,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return F.AnnotationEditorUIManager}}),Object.defineProperty(T,"AnnotationLayer",{enumerable:!0,get:function(){return M.AnnotationLayer}}),Object.defineProperty(T,"AnnotationMode",{enumerable:!0,get:function(){return n.AnnotationMode}}),Object.defineProperty(T,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(T,"GlobalWorkerOptions",{enumerable:!0,get:function(){return x.GlobalWorkerOptions}}),Object.defineProperty(T,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(T,"LoopbackPort",{enumerable:!0,get:function(){return y.LoopbackPort}}),Object.defineProperty(T,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(T,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(T,"PDFDataRangeTransport",{enumerable:!0,get:function(){return y.PDFDataRangeTransport}}),Object.defineProperty(T,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(T,"PDFWorker",{enumerable:!0,get:function(){return y.PDFWorker}}),Object.defineProperty(T,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(T,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(T,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(T,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(T,"SVGGraphics",{enumerable:!0,get:function(){return w.SVGGraphics}}),Object.defineProperty(T,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return n.UNSUPPORTED_FEATURES}}),Object.defineProperty(T,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(T,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(T,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(T,"XfaLayer",{enumerable:!0,get:function(){return L.XfaLayer}}),Object.defineProperty(T,"build",{enumerable:!0,get:function(){return y.build}}),Object.defineProperty(T,"createPromiseCapability",{enumerable:!0,get:function(){return n.createPromiseCapability}}),Object.defineProperty(T,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(T,"getDocument",{enumerable:!0,get:function(){return y.getDocument}}),Object.defineProperty(T,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(T,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(T,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(T,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(T,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(T,"renderTextLayer",{enumerable:!0,get:function(){return p.renderTextLayer}}),Object.defineProperty(T,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(T,"version",{enumerable:!0,get:function(){return y.version}});var n=__w_pdfjs_require__(1),y=__w_pdfjs_require__(4),e=__w_pdfjs_require__(8),i=__w_pdfjs_require__(22),F=__w_pdfjs_require__(7),M=__w_pdfjs_require__(27),x=__w_pdfjs_require__(15),b=__w_pdfjs_require__(3),p=__w_pdfjs_require__(30),w=__w_pdfjs_require__(31),L=__w_pdfjs_require__(29);if(b.isNodeJS){const{PDFNodeStream:C}=__w_pdfjs_require__(32);(0,y.setPDFNetworkStreamFactory)(E=>new C(E))}else{const{PDFNetworkStream:C}=__w_pdfjs_require__(35),{PDFFetchStream:E}=__w_pdfjs_require__(36);(0,y.setPDFNetworkStreamFactory)(h=>(0,e.isValidFetchUrl)(h.url)?new E(h):new C(h))}})(),__webpack_exports__})())})(pdf);function _objectWithoutProperties(T,n){if(T==null)return{};var y=_objectWithoutPropertiesLoose(T,n),e,i;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(T);for(i=0;i<F.length;i++)e=F[i],!(n.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(T,e)&&(y[e]=T[e])}return y}function _typeof(T){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(T)}function _classCallCheck(T,n){if(!(T instanceof n))throw new TypeError("Cannot call a class as a function")}function _toPrimitive(T,n){if(_typeof(T)!=="object"||T===null)return T;var y=T[Symbol.toPrimitive];if(y!==void 0){var e=y.call(T,n||"default");if(_typeof(e)!=="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(T)}function _toPropertyKey(T){var n=_toPrimitive(T,"string");return _typeof(n)==="symbol"?n:String(n)}function _defineProperties(T,n){for(var y=0;y<n.length;y++){var e=n[y];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(T,_toPropertyKey(e.key),e)}}function _createClass(T,n,y){return n&&_defineProperties(T.prototype,n),y&&_defineProperties(T,y),Object.defineProperty(T,"prototype",{writable:!1}),T}function _inherits(T,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(n&&n.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),n&&_setPrototypeOf(T,n)}function _possibleConstructorReturn(T,n){if(n&&(_typeof(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(T)}function _getPrototypeOf(T){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},_getPrototypeOf(T)}function _defineProperty(T,n,y){return n=_toPropertyKey(n),n in T?Object.defineProperty(T,n,{value:y,enumerable:!0,configurable:!0,writable:!0}):T[n]=y,T}var __spreadArray=globalThis&&globalThis.__spreadArray||function(T,n,y){if(y||arguments.length===2)for(var e=0,i=n.length,F;e<i;e++)(F||!(e in n))&&(F||(F=Array.prototype.slice.call(n,0,e)),F[e]=n[e]);return T.concat(F||Array.prototype.slice.call(n))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],focusEvents=["onFocus","onBlur"],formEvents=["onChange","onInput","onInvalid","onReset","onSubmit"],genericEvents=["onError","onLoad"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],uiEvents=["onScroll"],wheelEvents=["onWheel"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],imageEvents=["onLoad","onError"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),keyboardEvents,!0),focusEvents,!0),formEvents,!0),genericEvents,!0),mouseEvents,!0),pointerEvents,!0),selectionEvents,!0),touchEvents,!0),uiEvents,!0),wheelEvents,!0),mediaEvents,!0),imageEvents,!0),animationEvents,!0),transitionEvents,!0),otherEvents,!0);function makeEventProps(T,n){var y={};return allEvents.forEach(function(e){var i=T[e];if(i){if(!n){y[e]=i;return}y[e]=function(F){return i(F,n(e))}}}),y}function makeCancellablePromise(T){var n=!1,y=new Promise(function(e,i){T.then(function(F){return!n&&e(F)}).catch(function(F){return!n&&i(F)})});return{promise:y,cancel:function(){n=!0}}}var isProduction$1=!0,prefix="Invariant failed";function invariant(T,n){if(!T){if(isProduction$1)throw new Error(prefix);var y=typeof n=="function"?n():n,e=y?"".concat(prefix,": ").concat(y):prefix;throw new Error(e)}}var isProduction=!0;function warning(T,n){if(!isProduction){if(T)return;var y="Warning: "+n;typeof console<"u"&&console.warn(y);try{throw Error(y)}catch{}}}const DocumentContext=reactExports.createContext(null);function Message(T){var n=T.children,y=T.type;return React.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(y)},n)}Message.propTypes={children:propTypesExports.node,type:propTypesExports.oneOf(["error","loading","no-data"]).isRequired};var DEFAULT_LINK_REL="noopener noreferrer nofollow",LinkService=function(){function T(){_classCallCheck(this,T),this.externalLinkTarget=null,this.externalLinkRel=null}return _createClass(T,[{key:"setDocument",value:function(y){this.pdfDocument=y}},{key:"setViewer",value:function(y){this.pdfViewer=y}},{key:"setExternalLinkRel",value:function(y){this.externalLinkRel=y}},{key:"setExternalLinkTarget",value:function(y){this.externalLinkTarget=y}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(y){this.pdfViewer.currentPageNumber=y}},{key:"rotation",get:function(){return 0},set:function(y){}},{key:"goToDestination",value:function(y){var e=this;new Promise(function(i){typeof y=="string"?e.pdfDocument.getDestination(y).then(i):Array.isArray(y)?i(y):y.then(i)}).then(function(i){invariant(Array.isArray(i),'"'.concat(i,'" is not a valid destination array.'));var F=i[0];new Promise(function(M){F instanceof Object?e.pdfDocument.getPageIndex(F).then(function(x){M(x)}).catch(function(){invariant(!1,'"'.concat(F,'" is not a valid page reference.'))}):typeof F=="number"?M(F):invariant(!1,'"'.concat(F,'" is not a valid destination reference.'))}).then(function(M){var x=M+1;invariant(x>=1&&x<=e.pagesCount,'"'.concat(x,'" is not a valid page number.')),e.pdfViewer.scrollPageIntoView({dest:y,pageIndex:M,pageNumber:x})})})}},{key:"navigateTo",value:function(y){this.goToDestination(y)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(y,e,i){y.href=e,y.rel=this.externalLinkRel||DEFAULT_LINK_REL,y.target=i?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),T}(),PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function _arrayWithHoles(T){if(Array.isArray(T))return T}function _iterableToArrayLimit(T,n){var y=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(y!=null){var e,i,F,M,x=[],b=!0,p=!1;try{if(F=(y=y.call(T)).next,n===0){if(Object(y)!==y)return;b=!1}else for(;!(b=(e=F.call(y)).done)&&(x.push(e.value),x.length!==n);b=!0);}catch(w){p=!0,i=w}finally{try{if(!b&&y.return!=null&&(M=y.return(),Object(M)!==M))return}finally{if(p)throw i}}return x}}function _arrayLikeToArray(T,n){(n==null||n>T.length)&&(n=T.length);for(var y=0,e=new Array(n);y<n;y++)e[y]=T[y];return e}function _unsupportedIterableToArray(T,n){if(T){if(typeof T=="string")return _arrayLikeToArray(T,n);var y=Object.prototype.toString.call(T).slice(8,-1);if(y==="Object"&&T.constructor&&(y=T.constructor.name),y==="Map"||y==="Set")return Array.from(T);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(T,n)}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(T,n){return _arrayWithHoles(T)||_iterableToArrayLimit(T,n)||_unsupportedIterableToArray(T,n)||_nonIterableRest()}var isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(T){return typeof T<"u"}function isProvided(T){return isDefined(T)&&T!==null}function isString(T){return typeof T=="string"}function isArrayBuffer(T){return T instanceof ArrayBuffer}function isBlob(T){return invariant(isBrowser,"isBlob can only be used in a browser environment"),T instanceof Blob}function isFile$1(T){return invariant(isBrowser,"isFile can only be used in a browser environment"),T instanceof File}function isDataURI(T){return isString(T)&&/^data:/.test(T)}function dataURItoByteString(T){invariant(isDataURI(T),"Invalid data URI.");var n=T.split(","),y=_slicedToArray(n,2),e=y[0],i=y[1],F=e.split(";");return F.indexOf("base64")!==-1?atob(i):unescape(i)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}var allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function displayWorkerWarning(){warning(!isLocalFileSystem,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function cancelRunningTask(T){T&&T.cancel&&T.cancel()}function makePageCallback(T,n){return Object.defineProperty(T,"width",{get:function(){return this.view[2]*n},configurable:!0}),Object.defineProperty(T,"height",{get:function(){return this.view[3]*n},configurable:!0}),Object.defineProperty(T,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(T,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),T}function isCancelException(T){return T.name==="RenderingCancelledException"}function loadFromFile(T){return new Promise(function(n,y){var e=new FileReader;return e.onload=function(){return n(new Uint8Array(e.result))},e.onerror=function(i){switch(i.target.error.code){case i.target.error.NOT_FOUND_ERR:return y(new Error("Error while reading a file: File not found."));case i.target.error.NOT_READABLE_ERR:return y(new Error("Error while reading a file: File not readable."));case i.target.error.SECURITY_ERR:return y(new Error("Error while reading a file: Security error."));case i.target.error.ABORT_ERR:return y(new Error("Error while reading a file: Aborted."));default:return y(new Error("Error while reading a file."))}},e.readAsArrayBuffer(T),null})}function _arrayWithoutHoles(T){if(Array.isArray(T))return _arrayLikeToArray(T)}function _iterableToArray(T){if(typeof Symbol<"u"&&T[Symbol.iterator]!=null||T["@@iterator"]!=null)return Array.from(T)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(T){return _arrayWithoutHoles(T)||_iterableToArray(T)||_unsupportedIterableToArray(T)||_nonIterableSpread()}var eventProps=function(){var T={};return[].concat(_toConsumableArray(mouseEvents),_toConsumableArray(touchEvents),_toConsumableArray(keyboardEvents)).forEach(function(n){T[n]=propTypesExports.func}),T}(),fileTypes=[propTypesExports.string,propTypesExports.instanceOf(ArrayBuffer),propTypesExports.shape({data:propTypesExports.oneOfType([propTypesExports.object,propTypesExports.string]),httpHeaders:propTypesExports.object,range:propTypesExports.object,url:propTypesExports.string,withCredentials:propTypesExports.bool})];typeof File<"u"&&fileTypes.push(propTypesExports.instanceOf(File));typeof Blob<"u"&&fileTypes.push(propTypesExports.instanceOf(Blob));var isClassName=propTypesExports.oneOfType([propTypesExports.string,propTypesExports.arrayOf(propTypesExports.string)]),isFile=propTypesExports.oneOfType(fileTypes),isLinkService=propTypesExports.instanceOf(LinkService);propTypesExports.oneOf(["_self","_blank","_parent","_top"]);var isPage=propTypesExports.shape({commonObjs:propTypesExports.shape({}).isRequired,getAnnotations:propTypesExports.func.isRequired,getTextContent:propTypesExports.func.isRequired,getViewport:propTypesExports.func.isRequired,render:propTypesExports.func.isRequired}),isPageIndex=function T(n,y,e){var i=n[y],F=n.pageNumber,M=n.pdf;if(!isDefined(M))return null;if(isDefined(i)){if(typeof i!="number")return new Error("`".concat(y,"` of type `").concat(_typeof(i),"` supplied to `").concat(e,"`, expected `number`."));if(i<0)return new Error("Expected `".concat(y,"` to be greater or equal to 0."));var x=M.numPages;if(i+1>x)return new Error("Expected `".concat(y,"` to be less or equal to ").concat(x-1,"."))}else if(!isDefined(F))return new Error("`".concat(y,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(e,"`."));return null},isPageNumber=function T(n,y,e){var i=n[y],F=n.pageIndex,M=n.pdf;if(!isDefined(M))return null;if(isDefined(i)){if(typeof i!="number")return new Error("`".concat(y,"` of type `").concat(_typeof(i),"` supplied to `").concat(e,"`, expected `number`."));if(i<1)return new Error("Expected `".concat(y,"` to be greater or equal to 1."));var x=M.numPages;if(i>x)return new Error("Expected `".concat(y,"` to be less or equal to ").concat(x,"."))}else if(!isDefined(F))return new Error("`".concat(y,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(e,"`."));return null},isPdf=propTypesExports.oneOfType([propTypesExports.shape({getDestination:propTypesExports.func.isRequired,getOutline:propTypesExports.func.isRequired,getPage:propTypesExports.func.isRequired,numPages:propTypesExports.number.isRequired}),propTypesExports.bool]),isRef=propTypesExports.oneOfType([propTypesExports.func,propTypesExports.shape({current:propTypesExports.any})]),isRenderMode=propTypesExports.oneOf(["canvas","none","svg"]),isRotate=propTypesExports.oneOf([0,90,180,270]),_excluded=["url"];function ownKeys$3(T,n){var y=Object.keys(T);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(T);n&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(T,i).enumerable})),y.push.apply(y,e)}return y}function _objectSpread$3(T){for(var n=1;n<arguments.length;n++){var y=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$3(Object(y),!0).forEach(function(e){_defineProperty(T,e,y[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(y)):ownKeys$3(Object(y)).forEach(function(e){Object.defineProperty(T,e,Object.getOwnPropertyDescriptor(y,e))})}return T}function _createSuper$5(T){var n=_isNativeReflectConstruct$5();return function(){var e=_getPrototypeOf(T),i;if(n){var F=_getPrototypeOf(this).constructor;i=Reflect.construct(e,arguments,F)}else i=e.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _isNativeReflectConstruct$5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PDFDataRangeTransport=pdfExports.PDFDataRangeTransport,Document=function(T){_inherits(y,T);var n=_createSuper$5(y);function y(){var e;_classCallCheck(this,y);for(var i=arguments.length,F=new Array(i),M=0;M<i;M++)F[M]=arguments[M];return e=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(e),"state",{pdf:null}),_defineProperty(_assertThisInitialized(e),"viewer",{scrollPageIntoView:function(b){var p=b.dest,w=b.pageIndex,L=b.pageNumber,C=e.props.onItemClick;if(C){C({dest:p,pageIndex:w,pageNumber:L});return}var E=e.pages[w];if(E){E.scrollIntoView();return}warning(!1,"An internal link leading to page ".concat(L," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}}),_defineProperty(_assertThisInitialized(e),"linkService",new LinkService),_defineProperty(_assertThisInitialized(e),"loadDocument",function(){cancelRunningTask(e.runningTask),e.loadingTask&&e.loadingTask.destroy();var x=makeCancellablePromise(e.findDocumentSource());e.runningTask=x,x.promise.then(function(b){if(e.onSourceSuccess(),!!b){e.setState(function(h){return h.pdf?{pdf:null}:null});var p=e.props,w=p.options,L=p.onLoadProgress,C=p.onPassword,E=pdfExports.getDocument(_objectSpread$3(_objectSpread$3({},b),w));E.onPassword=C,L&&(E.onProgress=L),e.loadingTask=E,E.promise.then(function(h){e.setState(function(t){return t.pdf&&t.pdf.fingerprint===h.fingerprint?null:{pdf:h}},e.onLoadSuccess)}).catch(function(h){e.onLoadError(h)})}}).catch(function(b){e.onSourceError(b)})}),_defineProperty(_assertThisInitialized(e),"setupLinkService",function(){var x=e.props,b=x.externalLinkRel,p=x.externalLinkTarget;e.linkService.setViewer(e.viewer),e.linkService.setExternalLinkRel(b),e.linkService.setExternalLinkTarget(p)}),_defineProperty(_assertThisInitialized(e),"onSourceSuccess",function(){var x=e.props.onSourceSuccess;x&&x()}),_defineProperty(_assertThisInitialized(e),"onSourceError",function(x){warning(x);var b=e.props.onSourceError;b&&b(x)}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var x=e.props.onLoadSuccess,b=e.state.pdf;x&&x(b),e.pages=new Array(b.numPages),e.linkService.setDocument(b)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(x){e.setState({pdf:!1}),warning(x);var b=e.props.onLoadError;b&&b(x)}),_defineProperty(_assertThisInitialized(e),"findDocumentSource",function(){return new Promise(function(x){var b=e.props.file;if(b||x(null),typeof b=="string"){if(isDataURI(b)){var p=dataURItoByteString(b);x({data:p})}displayCORSWarning(),x({url:b})}if(b instanceof PDFDataRangeTransport&&x({range:b}),isArrayBuffer(b)&&x({data:b}),isBrowser&&(isBlob(b)||isFile$1(b))){loadFromFile(b).then(function(E){x({data:E})});return}if(invariant(_typeof(b)==="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(b.url||b.data||b.range,"Invalid parameter object: need either .data, .range or .url"),typeof b.url=="string"){if(isDataURI(b.url)){var w=b.url,L=_objectWithoutProperties(b,_excluded),C=dataURItoByteString(w);x(_objectSpread$3({data:C},L))}displayCORSWarning()}x(b)})}),_defineProperty(_assertThisInitialized(e),"registerPage",function(x,b){e.pages[x]=b}),_defineProperty(_assertThisInitialized(e),"unregisterPage",function(x){delete e.pages[x]}),e}return _createClass(y,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(i){var F=this.props.file;F!==i.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"childContext",get:function(){var i=this.linkService,F=this.registerPage,M=this.unregisterPage,x=this.props,b=x.imageResourcesPath,p=x.renderMode,w=x.rotate,L=this.state.pdf;return{imageResourcesPath:b,linkService:i,pdf:L,registerPage:F,renderMode:p,rotate:w,unregisterPage:M}}},{key:"eventProps",get:function(){var i=this;return makeEventProps(this.props,function(){return i.state.pdf})}},{key:"renderChildren",value:function(){var i=this.props.children;return React.createElement(DocumentContext.Provider,{value:this.childContext},i)}},{key:"renderContent",value:function(){var i=this.props.file,F=this.state.pdf;if(!i){var M=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof M=="function"?M():M)}if(F===null){var x=this.props.loading;return React.createElement(Message,{type:"loading"},typeof x=="function"?x():x)}if(F===!1){var b=this.props.error;return React.createElement(Message,{type:"error"},typeof b=="function"?b():b)}return this.renderChildren()}},{key:"render",value:function(){var i=this.props,F=i.className,M=i.inputRef;return React.createElement("div",_extends({className:clsx("react-pdf__Document",F),ref:M},this.eventProps),this.renderContent())}}]),y}(reactExports.PureComponent);Document.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF…",noData:"No PDF file specified.",onPassword:function T(n,y){switch(y){case PasswordResponses.NEED_PASSWORD:{var e=prompt("Enter the password to open this PDF file.");n(e);break}case PasswordResponses.INCORRECT_PASSWORD:{var i=prompt("Invalid password. Please try again.");n(i);break}}}};var isFunctionOrNode$1=propTypesExports.oneOfType([propTypesExports.func,propTypesExports.node]);Document.propTypes=_objectSpread$3(_objectSpread$3({},eventProps),{},{children:propTypesExports.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:propTypesExports.string,externalLinkTarget:propTypesExports.string,file:isFile,imageResourcesPath:propTypesExports.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:propTypesExports.func,onLoadError:propTypesExports.func,onLoadProgress:propTypesExports.func,onLoadSuccess:propTypesExports.func,onPassword:propTypesExports.func,onSourceError:propTypesExports.func,onSourceSuccess:propTypesExports.func,rotate:propTypesExports.number});var isDestination=propTypesExports.oneOfType([propTypesExports.string,propTypesExports.arrayOf(propTypesExports.any)]);propTypesExports.shape({dest:isDestination,items:propTypesExports.arrayOf(propTypesExports.shape({dest:isDestination,title:propTypesExports.string})),title:propTypesExports.string}).isRequired,propTypesExports.func,isPdf.isRequired;function ownKeys$2(T,n){var y=Object.keys(T);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(T);n&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(T,i).enumerable})),y.push.apply(y,e)}return y}function _objectSpread$2(T){for(var n=1;n<arguments.length;n++){var y=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$2(Object(y),!0).forEach(function(e){_defineProperty(T,e,y[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(y)):ownKeys$2(Object(y)).forEach(function(e){Object.defineProperty(T,e,Object.getOwnPropertyDescriptor(y,e))})}return T}_objectSpread$2({className:isClassName,inputRef:isRef,onItemClick:propTypesExports.func,onLoadError:propTypesExports.func,onLoadSuccess:propTypesExports.func,pdf:isPdf},eventProps);function mergeRefs(){for(var T=[],n=0;n<arguments.length;n++)T[n]=arguments[n];var y=T.filter(Boolean);if(y.length<=1){var e=y[0];return e||null}return function(F){y.forEach(function(M){typeof M=="function"?M(F):M&&(M.current=F)})}}const PageContext=reactExports.createContext(null);function _createSuper$4(T){var n=_isNativeReflectConstruct$4();return function(){var e=_getPrototypeOf(T),i;if(n){var F=_getPrototypeOf(this).constructor;i=Reflect.construct(e,arguments,F)}else i=e.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ANNOTATION_MODE=pdfExports.AnnotationMode,PageCanvasInternal=function(T){_inherits(y,T);var n=_createSuper$4(y);function y(){var e;_classCallCheck(this,y);for(var i=arguments.length,F=new Array(i),M=0;M<i;M++)F[M]=arguments[M];return e=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(e),"canvasElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){e.renderer=null;var x=e.props,b=x.onRenderSuccess,p=x.page,w=x.scale;b&&b(makePageCallback(p,w))}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(x){if(!isCancelException(x)){warning(x);var b=e.props.onRenderError;b&&b(x)}}),_defineProperty(_assertThisInitialized(e),"drawPageOnCanvas",function(){var x=e.canvasElement.current;if(!x)return null;var b=_assertThisInitialized(e),p=b.renderViewport,w=b.viewport,L=e.props,C=L.canvasBackground,E=L.page,h=L.renderForms;x.width=p.width,x.height=p.height,x.style.width="".concat(Math.floor(w.width),"px"),x.style.height="".concat(Math.floor(w.height),"px");var t={annotationMode:h?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,get canvasContext(){return x.getContext("2d",{alpha:!1})},viewport:p};C&&(t.background=C),e.cancelRenderingTask();var s=E.render(t);return e.renderer=s,s.promise.then(e.onRenderSuccess).catch(e.onRenderError)}),e}return _createClass(y,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(i){var F=this.props,M=F.canvasBackground,x=F.devicePixelRatio,b=F.page,p=F.renderForms;(M!==i.canvasBackground||x!==i.devicePixelRatio||p!==i.renderForms)&&(b.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask();var i=this.canvasElement.current;i&&(i.width=0,i.height=0)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"devicePixelRatio",get:function(){var i=this.props.devicePixelRatio;return i||getDevicePixelRatio()}},{key:"renderViewport",get:function(){var i=this.devicePixelRatio,F=this.props,M=F.page,x=F.rotate,b=F.scale;return M.getViewport({scale:b*i,rotation:x})}},{key:"viewport",get:function(){var i=this.props,F=i.page,M=i.rotate,x=i.scale;return F.getViewport({scale:x,rotation:M})}},{key:"render",value:function(){var i=this.props.canvasRef;return React.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:mergeRefs(i,this.canvasElement),style:{display:"block",userSelect:"none"}})}}]),y}(reactExports.PureComponent);PageCanvasInternal.propTypes={canvasBackground:propTypesExports.string,canvasRef:isRef,devicePixelRatio:propTypesExports.number,onRenderError:propTypesExports.func,onRenderSuccess:propTypesExports.func,page:isPage.isRequired,renderForms:propTypesExports.bool,rotate:isRotate,scale:propTypesExports.number.isRequired};function PageCanvas(T){return React.createElement(PageContext.Consumer,null,function(n){return React.createElement(PageCanvasInternal,_extends({},n,T))})}function _createSuper$3(T){var n=_isNativeReflectConstruct$3();return function(){var e=_getPrototypeOf(T),i;if(n){var F=_getPrototypeOf(this).constructor;i=Reflect.construct(e,arguments,F)}else i=e.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PageSVGInternal=function(T){_inherits(y,T);var n=_createSuper$3(y);function y(){var e;_classCallCheck(this,y);for(var i=arguments.length,F=new Array(i),M=0;M<i;M++)F[M]=arguments[M];return e=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(e),"state",{svg:null}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){e.renderer=null;var x=e.props,b=x.onRenderSuccess,p=x.page,w=x.scale;b&&b(makePageCallback(p,w))}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(x){if(!isCancelException(x)){warning(x);var b=e.props.onRenderError;b&&b(x)}}),_defineProperty(_assertThisInitialized(e),"renderSVG",function(){var x=e.props.page;return e.renderer=x.getOperatorList(),e.renderer.then(function(b){var p=new pdfExports.SVGGraphics(x.commonObjs,x.objs);e.renderer=p.getSVG(b,e.viewport).then(function(w){e.setState({svg:w},e.onRenderSuccess)}).catch(e.onRenderError)}).catch(e.onRenderError)}),_defineProperty(_assertThisInitialized(e),"drawPageOnContainer",function(x){var b=e.state.svg;if(!(!x||!b)){x.firstElementChild||x.appendChild(b);var p=e.viewport,w=p.width,L=p.height;b.setAttribute("width",w),b.setAttribute("height",L)}}),e}return _createClass(y,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"viewport",get:function(){var i=this.props,F=i.page,M=i.rotate,x=i.scale;return F.getViewport({scale:x,rotation:M})}},{key:"render",value:function(){var i=this,F=this.viewport,M=F.width,x=F.height;return React.createElement("div",{className:"react-pdf__Page__svg",ref:function(p){return i.drawPageOnContainer(p)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:M,height:x,userSelect:"none"}})}}]),y}(reactExports.PureComponent);PageSVGInternal.propTypes={onRenderError:propTypesExports.func,onRenderSuccess:propTypesExports.func,page:isPage.isRequired,rotate:isRotate,scale:propTypesExports.number.isRequired};function PageSVG(T){return React.createElement(PageContext.Consumer,null,function(n){return React.createElement(PageSVGInternal,_extends({},n,T))})}function ownKeys$1(T,n){var y=Object.keys(T);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(T);n&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(T,i).enumerable})),y.push.apply(y,e)}return y}function _objectSpread$1(T){for(var n=1;n<arguments.length;n++){var y=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(y),!0).forEach(function(e){_defineProperty(T,e,y[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(y)):ownKeys$1(Object(y)).forEach(function(e){Object.defineProperty(T,e,Object.getOwnPropertyDescriptor(y,e))})}return T}function _createSuper$2(T){var n=_isNativeReflectConstruct$2();return function(){var e=_getPrototypeOf(T),i;if(n){var F=_getPrototypeOf(this).constructor;i=Reflect.construct(e,arguments,F)}else i=e.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var TextLayerInternal=function(T){_inherits(y,T);var n=_createSuper$2(y);function y(){var e;_classCallCheck(this,y);for(var i=arguments.length,F=new Array(i),M=0;M<i;M++)F[M]=arguments[M];return e=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(e),"state",{textContent:null}),_defineProperty(_assertThisInitialized(e),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"endElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"loadTextContent",function(){var x=e.props.page,b=makeCancellablePromise(x.getTextContent());e.runningTask=b,b.promise.then(function(p){e.setState({textContent:p},e.onLoadSuccess)}).catch(function(p){e.onLoadError(p)})}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var x=e.props.onGetTextSuccess,b=e.state.textContent;x&&x(b)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(x){e.setState({textItems:!1}),warning(x);var b=e.props.onGetTextError;b&&b(x)}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){var x=e.props.onRenderTextLayerSuccess;x&&x()}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(x){warning(x);var b=e.props.onRenderTextLayerError;b&&b(x)}),_defineProperty(_assertThisInitialized(e),"onMouseDown",function(){var x=e.endElement.current;x&&x.classList.add("active")}),_defineProperty(_assertThisInitialized(e),"onMouseUp",function(){var x=e.endElement.current;x&&x.classList.remove("active")}),e}return _createClass(y,[{key:"componentDidMount",value:function(){var i=this.props.page;invariant(i,"Attempted to load page text content, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),this.loadTextContent()}},{key:"componentDidUpdate",value:function(i){var F=this.props.page;i.page&&F!==i.page&&this.loadTextContent()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var i=this.props,F=i.page,M=i.rotate,x=i.scale;return F.getViewport({scale:x,rotation:M})}},{key:"unrotatedViewport",get:function(){var i=this.props,F=i.page,M=i.scale;return F.getViewport({scale:M})}},{key:"rotate",get:function(){var i=this.props,F=i.page,M=i.rotate;return M-F.rotate}},{key:"renderTextLayer",value:function(){var i=this,F=this.state.textContent;if(!F)return null;var M=this.layerElement.current,x=this.viewport,b=this.props,p=b.customTextRenderer,w=b.pageIndex,L=b.pageNumber;cancelRunningTask(this.runningTask),M.innerHTML="";var C={container:M,textContent:F,viewport:x},E=pdfExports.renderTextLayer(C);this.runningTask=E,E.promise.then(function(){var h=document.createElement("div");if(h.className="endOfContent",M.append(h),i.endElement.current=h,p){var t=0;F.items.forEach(function(s,l){var v=i.layerElement.current.children[t],A=p(_objectSpread$1({pageIndex:w,pageNumber:L,itemIndex:l},s));v.innerHTML=A,t+=s.str&&s.hasEOL?2:1})}i.onRenderSuccess()}).catch(function(h){i.onRenderError(h)})}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__textContent textLayer",onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,ref:this.layerElement},this.renderTextLayer())}}]),y}(reactExports.PureComponent);TextLayerInternal.propTypes={customTextRenderer:propTypesExports.func,onGetTextError:propTypesExports.func,onGetTextSuccess:propTypesExports.func,onRenderTextLayerError:propTypesExports.func,onRenderTextLayerSuccess:propTypesExports.func,page:isPage.isRequired,pageIndex:propTypesExports.number.isRequired,pageNumber:propTypesExports.number.isRequired,rotate:isRotate,scale:propTypesExports.number};function TextLayer(T){return React.createElement(PageContext.Consumer,null,function(n){return React.createElement(TextLayerInternal,_extends({},n,T))})}function _createSuper$1(T){var n=_isNativeReflectConstruct$1();return function(){var e=_getPrototypeOf(T),i;if(n){var F=_getPrototypeOf(this).constructor;i=Reflect.construct(e,arguments,F)}else i=e.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var AnnotationLayerInternal=function(T){_inherits(y,T);var n=_createSuper$1(y);function y(){var e;_classCallCheck(this,y);for(var i=arguments.length,F=new Array(i),M=0;M<i;M++)F[M]=arguments[M];return e=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(e),"state",{annotations:null}),_defineProperty(_assertThisInitialized(e),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"loadAnnotations",function(){var x=e.props.page,b=makeCancellablePromise(x.getAnnotations());e.runningTask=b,b.promise.then(function(p){e.setState({annotations:p},e.onLoadSuccess)}).catch(function(p){e.onLoadError(p)})}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var x=e.props.onGetAnnotationsSuccess,b=e.state.annotations;x&&x(b)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(x){e.setState({annotations:!1}),warning(x);var b=e.props.onGetAnnotationsError;b&&b(x)}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){var x=e.props.onRenderAnnotationLayerSuccess;x&&x()}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(x){warning(x);var b=e.props.onRenderAnnotationLayerError;b&&b(x)}),e}return _createClass(y,[{key:"componentDidMount",value:function(){var i=this.props.page;invariant(i,"Attempted to load page annotations, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),this.loadAnnotations()}},{key:"componentDidUpdate",value:function(i){var F=this.props,M=F.page,x=F.renderForms;(i.page&&M!==i.page||x!==i.renderForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var i=this.props,F=i.page,M=i.rotate,x=i.scale;return F.getViewport({scale:x,rotation:M})}},{key:"renderAnnotationLayer",value:function(){var i=this.state.annotations;if(i){var F=this.props,M=F.imageResourcesPath,x=F.linkService,b=F.page,p=F.renderForms,w=this.viewport.clone({dontFlip:!0}),L={annotations:i,div:this.layerElement.current,imageResourcesPath:M,linkService:x,page:b,renderForms:p,viewport:w};this.layerElement.current.innerHTML="";try{pdfExports.AnnotationLayer.render(L),this.onRenderSuccess()}catch(C){this.onRenderError(C)}}}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:this.layerElement},this.renderAnnotationLayer())}}]),y}(reactExports.PureComponent);AnnotationLayerInternal.propTypes={imageResourcesPath:propTypesExports.string,linkService:isLinkService.isRequired,onGetAnnotationsError:propTypesExports.func,onGetAnnotationsSuccess:propTypesExports.func,onRenderAnnotationLayerError:propTypesExports.func,onRenderAnnotationLayerSuccess:propTypesExports.func,page:isPage,renderForms:propTypesExports.bool,rotate:isRotate,scale:propTypesExports.number};var AnnotationLayer=function T(n){return React.createElement(DocumentContext.Consumer,null,function(y){return React.createElement(PageContext.Consumer,null,function(e){return React.createElement(AnnotationLayerInternal,_extends({},y,e,n))})})};function ownKeys(T,n){var y=Object.keys(T);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(T);n&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(T,i).enumerable})),y.push.apply(y,e)}return y}function _objectSpread(T){for(var n=1;n<arguments.length;n++){var y=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(y),!0).forEach(function(e){_defineProperty(T,e,y[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(y)):ownKeys(Object(y)).forEach(function(e){Object.defineProperty(T,e,Object.getOwnPropertyDescriptor(y,e))})}return T}function _createSuper(T){var n=_isNativeReflectConstruct();return function(){var e=_getPrototypeOf(T),i;if(n){var F=_getPrototypeOf(this).constructor;i=Reflect.construct(e,arguments,F)}else i=e.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var defaultScale=1,PageInternal=function(T){_inherits(y,T);var n=_createSuper(y);function y(){var e;_classCallCheck(this,y);for(var i=arguments.length,F=new Array(i),M=0;M<i;M++)F[M]=arguments[M];return e=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(e),"state",{page:null}),_defineProperty(_assertThisInitialized(e),"pageElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var x=e.props,b=x.onLoadSuccess,p=x.registerPage,w=e.state.page;b&&b(makePageCallback(w,e.scale)),p&&p(e.pageIndex,e.pageElement.current)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(x){e.setState({page:!1}),warning(x);var b=e.props.onLoadError;b&&b(x)}),_defineProperty(_assertThisInitialized(e),"loadPage",function(){var x=e.props.pdf,b=e.getPageNumber();if(b){e.setState(function(w){return w.page?{page:null}:null});var p=makeCancellablePromise(x.getPage(b));e.runningTask=p,p.promise.then(function(w){e.setState({page:w},e.onLoadSuccess)}).catch(function(w){e.onLoadError(w)})}}),e}return _createClass(y,[{key:"componentDidMount",value:function(){var i=this.props.pdf;invariant(i,"Attempted to load a page, but no document was specified."),this.loadPage()}},{key:"componentDidUpdate",value:function(i){var F=this.props.pdf;if(i.pdf&&F!==i.pdf||this.getPageNumber()!==this.getPageNumber(i)){var M=this.props.unregisterPage;M&&M(this.getPageIndex(i)),this.loadPage()}}},{key:"componentWillUnmount",value:function(){var i=this.props.unregisterPage;i&&i(this.pageIndex),cancelRunningTask(this.runningTask)}},{key:"childContext",get:function(){var i=this.pageIndex,F=this.pageNumber,M=this.state.page;if(!M)return{};var x=this.props,b=x.canvasBackground,p=x.customTextRenderer,w=x.devicePixelRatio,L=x.onGetAnnotationsError,C=x.onGetAnnotationsSuccess,E=x.onGetTextError,h=x.onGetTextSuccess,t=x.onRenderAnnotationLayerError,s=x.onRenderAnnotationLayerSuccess,l=x.onRenderError,v=x.onRenderSuccess,A=x.onRenderTextLayerError,c=x.onRenderTextLayerSuccess,r=x.renderForms,a=x.renderInteractiveForms;return{canvasBackground:b,customTextRenderer:p,devicePixelRatio:w,onGetAnnotationsError:L,onGetAnnotationsSuccess:C,onGetTextError:E,onGetTextSuccess:h,onRenderAnnotationLayerError:t,onRenderAnnotationLayerSuccess:s,onRenderError:l,onRenderSuccess:v,onRenderTextLayerError:A,onRenderTextLayerSuccess:c,page:M,pageIndex:i,pageNumber:F,renderForms:r??a,rotate:this.rotate,scale:this.scale}}},{key:"getPageIndex",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(i.pageNumber)?i.pageNumber-1:isProvided(i.pageIndex)?i.pageIndex:null}},{key:"getPageNumber",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(i.pageNumber)?i.pageNumber:isProvided(i.pageIndex)?i.pageIndex+1:null}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var i=this.props.rotate;if(isProvided(i))return i;var F=this.state.page;return F?F.rotate:null}},{key:"scale",get:function(){var i=this.state.page;if(!i)return null;var F=this.props,M=F.scale,x=F.width,b=F.height,p=this.rotate,w=1,L=M===null?defaultScale:M;if(x||b){var C=i.getViewport({scale:1,rotation:p});w=x?x/C.width:b/C.height}return L*w}},{key:"eventProps",get:function(){var i=this;return makeEventProps(this.props,function(){var F=i.state.page;return F&&makePageCallback(F,i.scale)})}},{key:"pageKey",get:function(){return"".concat(this.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){return"".concat(this.pageIndex,"/").concat(this.rotate)}},{key:"renderMainLayer",value:function(){var i=this.props,F=i.canvasRef,M=i.renderMode;switch(M){case"none":return null;case"svg":return React.createElement(PageSVG,{key:"".concat(this.pageKeyNoScale,"_svg")});case"canvas":default:return React.createElement(PageCanvas,{key:"".concat(this.pageKey,"_canvas"),canvasRef:F})}}},{key:"renderTextLayer",value:function(){var i=this.props.renderTextLayer;return i?React.createElement(TextLayer,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){var i=this.props.renderAnnotationLayer;return i?React.createElement(AnnotationLayer,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var i=this.props.children;return React.createElement(PageContext.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),i)}},{key:"renderContent",value:function(){var i=this.pageNumber,F=this.props.pdf,M=this.state.page;if(!i){var x=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof x=="function"?x():x)}if(F===null||M===null){var b=this.props.loading;return React.createElement(Message,{type:"loading"},typeof b=="function"?b():b)}if(F===!1||M===!1){var p=this.props.error;return React.createElement(Message,{type:"error"},typeof p=="function"?p():p)}return this.renderChildren()}},{key:"render",value:function(){var i=this.pageNumber,F=this.props,M=F.className,x=F.inputRef;return React.createElement("div",_extends({className:clsx("react-pdf__Page",M),"data-page-number":i,ref:mergeRefs(x,this.pageElement),style:{position:"relative",minWidth:"min-content",minHeight:"min-content"}},this.eventProps),this.renderContent())}}]),y}(reactExports.PureComponent);PageInternal.defaultProps={error:"Failed to load the page.",loading:"Loading page…",noData:"No page specified.",renderAnnotationLayer:!0,renderMode:"canvas",renderTextLayer:!0,scale:defaultScale};var isFunctionOrNode=propTypesExports.oneOfType([propTypesExports.func,propTypesExports.node]);PageInternal.propTypes=_objectSpread(_objectSpread({},eventProps),{},{canvasBackground:propTypesExports.string,children:propTypesExports.node,className:isClassName,customTextRenderer:propTypesExports.func,devicePixelRatio:propTypesExports.number,error:isFunctionOrNode,height:propTypesExports.number,imageResourcesPath:propTypesExports.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:propTypesExports.func,onGetTextSuccess:propTypesExports.func,onLoadError:propTypesExports.func,onLoadSuccess:propTypesExports.func,onRenderError:propTypesExports.func,onRenderSuccess:propTypesExports.func,onRenderTextLayerError:propTypesExports.func,onRenderTextLayerSuccess:propTypesExports.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,registerPage:propTypesExports.func,renderAnnotationLayer:propTypesExports.bool,renderForms:propTypesExports.bool,renderInteractiveForms:propTypesExports.bool,renderMode:isRenderMode,renderTextLayer:propTypesExports.bool,rotate:isRotate,scale:propTypesExports.number,unregisterPage:propTypesExports.func,width:propTypesExports.number});function Page(T,n){return React.createElement(DocumentContext.Consumer,null,function(y){return React.createElement(PageInternal,_extends({ref:n},y,T))})}const Page$1=React.forwardRef(Page);displayWorkerWarning();pdfExports.GlobalWorkerOptions.workerSrc="pdf.worker.js";export{Document as D,Page$1 as P};
